<!DOCTYPE html><html><head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=Edge">
        <meta name="description">
        <meta name="keywords" content="static content generator,static site generator,static site,HTML,web development,.NET,C#,Razor,Markdown,YAML">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="shortcut icon" href="/animancer/assets/img/favicon.ico" type="image/x-icon">
        <link rel="icon" href="/animancer/assets/img/favicon.ico" type="image/x-icon">
        <title>Animancer - 06-01 Characters</title>
        <link href="/animancer/assets/css/highlight.css" rel="stylesheet">
        <link href="/animancer/assets/css/bootstrap/bootstrap.css" rel="stylesheet">
        <link href="/animancer/assets/css/adminlte/AdminLTE.css" rel="stylesheet">
        <link href="/animancer/assets/css/theme/theme.css" rel="stylesheet">
        <link href="//fonts.googleapis.com/css?family=Roboto+Mono:400,700|Roboto:400,400i,700,700i" rel="stylesheet">
        <link href="/animancer/assets/css/font-awesome.min.css" rel="stylesheet" type="text/css">
        <link href="/animancer/assets/css/override.css" rel="stylesheet">
        <script src="/animancer/assets/js/jquery-2.2.3.min.js"></script>
        <script src="/animancer/assets/js/bootstrap.min.js"></script>        
        <script src="/animancer/assets/js/app.min.js"></script>         
        <script src="/animancer/assets/js/highlight.pack.js"></script>   
        <script src="/animancer/assets/js/jquery.slimscroll.min.js"></script>
        <script src="/animancer/assets/js/jquery.sticky-kit.min.js"></script>
        <script src="/animancer/assets/js/mermaid.min.js"></script>
        <script src="/animancer/assets/js/svg-pan-zoom.min.js"></script>
        <!--[if lt IE 9]>
        <script src="/animancer/assets/js/html5shiv.min.js"></script>
        <script src="/animancer/assets/js/respond.min.js"></script>
        <![endif]-->  

        
    </head>
    <body class="hold-transition wyam layout-boxed  ">    
        <div class="top-banner"></div>
        <div class="wrapper with-container">
            <!-- Header -->
            <header class="main-header">   
                     
                <a href="/animancer/" class="logo">
                            <span>Animancer</span>
                </a>   
                         
                <nav class="navbar navbar-static-top" role="navigation">
                    <!-- Sidebar toggle button-->
                        <a href="#" class="sidebar-toggle visible-xs-block" data-toggle="offcanvas" role="button">
                            <span class="sr-only">Toggle side menu</span>
                            <i class="fa fa-chevron-circle-right"></i>
                        </a>
                                        
                    <div class="navbar-header">
                        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse">
                            <span class="sr-only">Toggle side menu</span>
                            <i class="fa fa-chevron-circle-down"></i>
                        </button>
                    </div>
            
                    <!-- Collect the nav links, forms, and other content for toggling -->
                    <div class="collapse navbar-collapse pull-left" id="navbar-collapse">
                        <ul class="nav navbar-nav">                            
                                    <li><a href="/animancer/docs/introduction/features"><img src="/animancer/images/features.png" height="20px" width="20px" style="left:-7px"> Features</a></li>
        <li><a href="/animancer/docs/download"><img src="/animancer/images/download.png" height="20px" width="20px" style="left:-7px"> Download</a></li>
        <li class="active"><a href="/animancer/docs"><img src="/animancer/images/docs.png" height="20px" width="7.5px" style="left:-5px"> Documentation</a></li>
        <li><a href="/animancer/docs/help"><img src="/animancer/images/help.png" height="20px" width="10.625px" style="left:-4px"> Help</a></li>
        <li><a href="/animancer/api/Animancer/AnimancerComponent"><img src="/animancer/images/api.png" height="20px" width="18.125px" style="left:-3px"> API v7.4</a></li>
        <li><a href="https://kybernetik.com.au"><img src="/animancer/images/kybernetik.png" height="20px" width="20px" style="left:-2px"> Other Assets</a></li>

<li style="width:100%">
<form class="search-form" name="search" action="/animancer/search">
<span><input class="search-input" id="search" name="q" type="text" placeholder="Search..."></span>
<div class="search-button"><button type="submit"><i class="fa fa-search"></i></button></div>
</form>
</li> 
                        </ul>       
                    </div>
                    <!-- /.navbar-collapse -->
                
                    <!-- Navbar Right Menu -->
                </nav>
            </header>
            
            <!-- Left side column. contains the logo and sidebar -->
            <aside class="main-sidebar ">
                <section class="infobar" data-spy="affix" data-offset-top="60" data-offset-bottom="200"> 
                    	
    <div id="infobar-headings"><h6>On This Page</h6><p><a href="#summary">Summary</a></p>
<p><a href="#controls">Controls</a></p>
<p><a href="#introduction">Introduction</a></p>
<p><a href="#overview">Overview</a></p>
<p><a href="#character">Character</a></p>
<p><a href="#state-machine">State Machine</a></p>
<p><a href="#states">States</a></p>
<p><a href="#idle-state">Idle State</a></p>
<p><a href="#move-state">Move State</a></p>
<p><a href="#action-state">Action State</a></p>
<p><a href="#brain">Brain</a></p>
<p><a href="#scene-setup">Scene Setup</a></p>
<p><a href="#what-next">What Next?</a></p>
<hr class="infobar-hidden">
</div>

                </section>
                <section class="sidebar">    
                                     
                    

                    <ul class="sidebar-menu">
                        

                <li><a href="/animancer/docs/download">Download</a></li>
                <li class="treeview">
                    <a href="/animancer/docs/introduction">Introduction</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/introduction/features">Features</a></li>
                <li class="treeview">
                    <a href="/animancer/docs/introduction/mecanim-vs-animancer">Mecanim vs. Animancer</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li class="treeview">
                    <a href="/animancer/docs/introduction/mecanim-vs-animancer/why">Why Replace Mecanim?</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/introduction/mecanim-vs-animancer/why/simplicity">Simplicity</a></li>
                <li><a href="/animancer/docs/introduction/mecanim-vs-animancer/why/transparency">Transparency</a></li>
                <li><a href="/animancer/docs/introduction/mecanim-vs-animancer/why/adaptability">Adaptability</a></li>
                <li><a href="/animancer/docs/introduction/mecanim-vs-animancer/why/clarity">Clarity</a></li>
                <li><a href="/animancer/docs/introduction/mecanim-vs-animancer/why/safety">Safety</a></li>
                <li><a href="/animancer/docs/introduction/mecanim-vs-animancer/why/reliability">Reliability</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/introduction/mecanim-vs-animancer/comparison">Comparison</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/introduction/mecanim-vs-animancer/comparison/playing">Playing</a></li>
                <li><a href="/animancer/docs/introduction/mecanim-vs-animancer/comparison/waiting">Waiting</a></li>
                <li><a href="/animancer/docs/introduction/mecanim-vs-animancer/comparison/speed-and-time">Speed and Time</a></li>
                <li><a href="/animancer/docs/introduction/mecanim-vs-animancer/comparison/weapon-animations">Weapon Animations</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/docs/introduction/mecanim-vs-animancer/performance">Performance</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/docs/introduction/glossary">Glossary</a></li>
                <li><a href="/animancer/docs/introduction/cs">C# in Unity</a></li>

                    </ul>
                </li>
                <li class="treeview active">
                    <a href="/animancer/docs/examples">Examples</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li class="treeview">
                    <a href="/animancer/docs/examples/basics">01 Basics</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/basics/quick-play">01-01 Quick Play</a></li>
                <li><a href="/animancer/docs/examples/basics/movement">01-02 Basic Movement</a></li>
                <li class="treeview">
                    <a href="/animancer/docs/examples/basics/action">01-03 Basic Action</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/basics/action/holding">Holding a Pistol</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/docs/examples/basics/transitions">01-04 Transitions</a></li>
                <li><a href="/animancer/docs/examples/basics/character">01-05 Basic Character</a></li>
                <li><a href="/animancer/docs/examples/basics/scene-setup">Basic Scene Setup</a></li>
                <li><a href="/animancer/docs/examples/basics/input">Input</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/examples/fine-control">02 Fine Control</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/fine-control/named-animations">02-01 Named Animations</a></li>
                <li><a href="/animancer/docs/examples/fine-control/speed-and-time">02-02 Speed and Time</a></li>
                <li><a href="/animancer/docs/examples/fine-control/doors">02-03 Doors</a></li>
                <li><a href="/animancer/docs/examples/fine-control/update-rate">02-04 Update Rate</a></li>
                <li><a href="/animancer/docs/examples/fine-control/solo-animation">02-05 Solo Animation</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/examples/locomotion">03 Locomotion</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/locomotion/root-motion">03-01 Root Motion</a></li>
                <li><a href="/animancer/docs/examples/locomotion/linear-blending">03-02 Linear Blending</a></li>
                <li><a href="/animancer/docs/examples/locomotion/directional-blending">03-03 Directional Blending</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/examples/directional-sprites">04 Directional Sprites</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/directional-sprites/basics">04-01 Directional Basics</a></li>
                <li><a href="/animancer/docs/examples/directional-sprites/character">04-02 Directional Character</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/examples/events">05 Events</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/events/footsteps">05-01 Footstep Events</a></li>
                <li><a href="/animancer/docs/examples/events/golf">05-02 Golf Events</a></li>
                <li><a href="/animancer/docs/examples/events/utilities">05-03 Event Utilities</a></li>

                    </ul>
                </li>
                <li class="treeview active">
                    <a href="/animancer/docs/examples/fsm">06 State Machines</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li class="selected"><a href="/animancer/docs/examples/fsm/characters">06-01 Characters</a></li>
                <li><a href="/animancer/docs/examples/fsm/interruptions">06-02 Interruptions</a></li>
                <li><a href="/animancer/docs/examples/fsm/brains">06-03 Brains</a></li>
                <li><a href="/animancer/docs/examples/fsm/weapons">06-04 Weapons</a></li>
                <li><a href="/animancer/docs/examples/fsm/platformer">Platformer Game Kit</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/examples/layers">07 Layers</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/layers/basic">07-01 Basic Layers</a></li>
                <li><a href="/animancer/docs/examples/layers/dynamic">07-02 Dynamic Layers</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/examples/ik">08 Inverse Kinematics</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/ik/puppet">08-01 Puppet</a></li>
                <li><a href="/animancer/docs/examples/ik/uneven-ground">08-02 Uneven Ground</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/examples/animator-controllers">09 Animator Controllers</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/animator-controllers/basics">09-01 Hybrid Basics</a></li>
                <li><a href="/animancer/docs/examples/animator-controllers/character">09-02 Hybrid Character</a></li>
                <li class="treeview">
                    <a href="/animancer/docs/examples/animator-controllers/3d-game-kit">09-03 3D Game Kit</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/animator-controllers/3d-game-kit/problems">Problems with the Mecanim Character</a></li>
                <li><a href="/animancer/docs/examples/animator-controllers/3d-game-kit/respawn">Respawn</a></li>
                <li><a href="/animancer/docs/examples/animator-controllers/3d-game-kit/idle">Idle</a></li>
                <li class="treeview">
                    <a href="/animancer/docs/examples/animator-controllers/3d-game-kit/locomotion">Locomotion</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/animator-controllers/3d-game-kit/locomotion/movement">Movement</a></li>
                <li><a href="/animancer/docs/examples/animator-controllers/3d-game-kit/locomotion/turning">Turning</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/docs/examples/animator-controllers/3d-game-kit/airborne">Airborne</a></li>
                <li><a href="/animancer/docs/examples/animator-controllers/3d-game-kit/landing">Landing</a></li>
                <li><a href="/animancer/docs/examples/animator-controllers/3d-game-kit/attack">Attack</a></li>
                <li><a href="/animancer/docs/examples/animator-controllers/3d-game-kit/flinch">Flinch</a></li>
                <li><a href="/animancer/docs/examples/animator-controllers/3d-game-kit/die">Die</a></li>

                    </ul>
                </li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/examples/jobs">10 Animation Jobs</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/jobs/two-bone-ik">10-01 Two Bone IK</a></li>
                <li><a href="/animancer/docs/examples/jobs/damping">10-02 Damping</a></li>
                <li><a href="/animancer/docs/examples/jobs/lean">10-03 Lean</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/examples/integration">Integration</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/integration/animation-rigging">Animation Rigging</a></li>
                <li><a href="/animancer/docs/examples/integration/dynamic-bone">Dynamic Bone</a></li>
                <li><a href="/animancer/docs/examples/integration/final-ik">Final IK</a></li>
                <li><a href="/animancer/docs/examples/integration/hairibar-ragdoll">Hairibar Ragdoll</a></li>
                <li><a href="/animancer/docs/examples/integration/lod">Level of Detail (LOD)</a></li>
                <li><a href="/animancer/docs/examples/integration/odin-inspector">Odin Inspector</a></li>
                <li><a href="/animancer/docs/examples/integration/puppet-master">Puppet Master</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/docs/examples/no-video-tutorials">No Video Tutorials</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/manual">User Manual</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li class="treeview">
                    <a href="/animancer/docs/manual/getting">Getting Animations</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/manual/getting/mixamo">Mixamo</a></li>
                <li><a href="/animancer/docs/manual/getting/importing">Importing</a></li>
                <li><a href="/animancer/docs/manual/getting/animation-window">Animation Window</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/manual/playing">Playing Animations</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/manual/playing/states">States</a></li>
                <li><a href="/animancer/docs/manual/playing/keys">Keys</a></li>
                <li><a href="/animancer/docs/manual/playing/inspector">Inspector</a></li>
                <li><a href="/animancer/docs/manual/playing/component-types">Component Types</a></li>
                <li><a href="/animancer/docs/manual/playing/edit-mode">Playing in Edit Mode</a></li>
                <li><a href="/animancer/docs/manual/playing/directional-sets">Directional Animation Sets</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/manual/transitions">Transitions</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/manual/transitions/types">Transition Types</a></li>
                <li><a href="/animancer/docs/manual/transitions/assets">Transition Assets</a></li>
                <li><a href="/animancer/docs/manual/transitions/previews">Transition Previews</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/manual/blending">Blending</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li class="treeview">
                    <a href="/animancer/docs/manual/blending/fading">Fading</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/manual/blending/fading/modes">Fade Modes</a></li>
                <li><a href="/animancer/docs/manual/blending/fading/custom">Custom Fading</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/docs/manual/blending/layers">Layers</a></li>
                <li class="treeview">
                    <a href="/animancer/docs/manual/blending/mixers">Mixers</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/manual/blending/mixers/creation">Mixer Creation</a></li>
                <li><a href="/animancer/docs/manual/blending/mixers/smoothing">Mixer Smoothing</a></li>
                <li><a href="/animancer/docs/manual/blending/mixers/synchronization">Mixer Synchronization</a></li>

                    </ul>
                </li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/manual/events">Events</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/manual/events/animation">Animation Events</a></li>
                <li class="treeview">
                    <a href="/animancer/docs/manual/events/animancer">Animancer Events</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/manual/events/animancer/usage">Usage</a></li>
                <li><a href="/animancer/docs/manual/events/animancer/behaviour">Behaviour</a></li>
                <li><a href="/animancer/docs/manual/events/animancer/shared">Shared Events</a></li>
                <li><a href="/animancer/docs/manual/events/animancer/garbage">Garbage Collection</a></li>
                <li><a href="/animancer/docs/manual/events/animancer/ultevents">UltEvents</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/docs/manual/events/end">End Events</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/manual/fsm">Finite State Machines</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/manual/fsm/overview">Overview</a></li>
                <li><a href="/animancer/docs/manual/fsm/state-types">1. State Types</a></li>
                <li><a href="/animancer/docs/manual/fsm/initialization">2. Initialization</a></li>
                <li><a href="/animancer/docs/manual/fsm/changing-states">3. Changing States</a></li>
                <li><a href="/animancer/docs/manual/fsm/keys">Keys</a></li>
                <li class="treeview">
                    <a href="/animancer/docs/manual/fsm/utilities">Utilities</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/manual/fsm/utilities/input-buffer">Input Buffers</a></li>
                <li><a href="/animancer/docs/manual/fsm/utilities/state-selector">State Selectors</a></li>
                <li><a href="/animancer/docs/manual/fsm/utilities/owned-states">Owned States</a></li>

                    </ul>
                </li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/manual/animator-controllers">Animator Controllers</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/manual/animator-controllers/conversion">Conversion</a></li>
                <li><a href="/animancer/docs/manual/animator-controllers/controller-states">Controller States</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/docs/manual/timeline">Timeline</a></li>
                <li><a href="/animancer/docs/manual/ik">Inverse Kinematics</a></li>
                <li class="treeview">
                    <a href="/animancer/docs/manual/tools">Animancer Tools</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/manual/tools/pack-textures">Pack Textures</a></li>
                <li><a href="/animancer/docs/manual/tools/modify-sprites">Modify Sprites</a></li>
                <li><a href="/animancer/docs/manual/tools/rename-sprites">Rename Sprites</a></li>
                <li><a href="/animancer/docs/manual/tools/generate-sprite-animations">Generate Sprite Animations</a></li>
                <li><a href="/animancer/docs/manual/tools/remap-sprite-animation">Remap Sprite Animation</a></li>
                <li><a href="/animancer/docs/manual/tools/remap-animation-bindings">Remap Animation Bindings</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/manual/other">Other Features</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/manual/other/animation-clip-inspector">Animation Clip Inspector</a></li>
                <li><a href="/animancer/docs/manual/other/polymorphic">Polymorphic Drawer</a></li>
                <li><a href="/animancer/docs/manual/other/redirect-root-motion">Redirect Root Motion</a></li>
                <li><a href="/animancer/docs/manual/other/sprite-renderer-texture-swap">Sprite Renderer Texture Swap</a></li>
                <li><a href="/animancer/docs/manual/other/units">Units Attributes</a></li>

                    </ul>
                </li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/bugs">Unity Bugs</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/bugs/events">Animation Events</a></li>
                <li><a href="/animancer/docs/bugs/animator-controller-speed">Animator Controller Speed</a></li>
                <li><a href="/animancer/docs/bugs/paused-skinned-mesh-update">Paused Skinned Mesh Update</a></li>
                <li><a href="/animancer/docs/bugs/reorderable-array-height">Reorderable Array Height</a></li>
                <li><a href="/animancer/docs/bugs/serialized-array-initialization">Serialized Array Initialization</a></li>
                <li><a href="/animancer/docs/bugs/stabilize-feet">Stabilize Feet</a></li>
                <li><a href="/animancer/docs/bugs/timeline">Timeline</a></li>
                <li><a href="/animancer/docs/bugs/timing">Timing</a></li>
                <li><a href="/animancer/docs/bugs/update-modes">Update Modes</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/source">Source Code</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/source/dlls">DLLs</a></li>
                <li><a href="/animancer/docs/source/creating-custom-states">Creating Custom States</a></li>
                <li><a href="/animancer/docs/source/graph-structure">Graph Structure</a></li>
                <li><a href="/animancer/docs/source/asset-sources">Asset Sources</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/changes">Change Log</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/changes/animancer-v7-4">Animancer v7.4</a></li>
                <li><a href="/animancer/docs/changes/animancer-v7-3">Animancer v7.3</a></li>
                <li><a href="/animancer/docs/changes/animancer-v7-2">Animancer v7.2</a></li>
                <li><a href="/animancer/docs/changes/animancer-v7-1">Animancer v7.1</a></li>
                <li><a href="/animancer/docs/changes/animancer-v7-0">Animancer v7.0</a></li>
                <li><a href="/animancer/docs/changes/animancer-v6-1">Animancer v6.1</a></li>
                <li class="treeview">
                    <a href="/animancer/docs/changes/animancer-v6-0">Animancer v6.0</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/changes/animancer-v6-0/test">Test Releases</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/docs/changes/animancer-v5-3">Animancer v5.3</a></li>
                <li><a href="/animancer/docs/changes/animancer-v5-2">Animancer v5.2</a></li>
                <li><a href="/animancer/docs/changes/animancer-v5-1">Animancer v5.1</a></li>
                <li class="treeview">
                    <a href="/animancer/docs/changes/animancer-v5-0">Animancer v5.0</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/changes/animancer-v5-0/test">Test Releases</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/docs/changes/animancer-v4-4">Animancer v4.4</a></li>
                <li><a href="/animancer/docs/changes/animancer-v4-3">Animancer v4.3</a></li>
                <li><a href="/animancer/docs/changes/animancer-v4-2">Animancer v4.2</a></li>
                <li><a href="/animancer/docs/changes/animancer-v4-1">Animancer v4.1</a></li>
                <li class="treeview">
                    <a href="/animancer/docs/changes/animancer-v4-0">Animancer v4.0</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/changes/animancer-v4-0/test">Test Releases</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/docs/changes/animancer-v3-1">Animancer v3.1</a></li>
                <li><a href="/animancer/docs/changes/animancer-v3-0">Animancer v3.0</a></li>
                <li><a href="/animancer/docs/changes/animancer-v2-0">Animancer v2.0</a></li>
                <li><a href="/animancer/docs/changes/animancer-v1-3">Animancer v1.3</a></li>
                <li><a href="/animancer/docs/changes/animancer-v1-2">Animancer v1.2</a></li>
                <li><a href="/animancer/docs/changes/animancer-v1-1">Animancer v1.1</a></li>
                <li><a href="/animancer/docs/changes/animancer-v1-0">Animancer v1.0</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/help">Help and FAQ</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/help/debugging">Debugging</a></li>

                    </ul>
                </li>

                    </ul>
                            
                </section>                
            </aside>
            
            <!-- Content Wrapper. Contains page content -->
            <div class="content-wrapper">
                



		<section class="content-header">
			<h1>06-01 Characters</h1>
		</section>
	<section class="content">
		<blockquote class="blockquote">
<p><i class="emw fa fa-folder"></i> <strong>Location</strong>: <em><span class="mini">Assets/Plugins/Animancer/</span>Examples/06 State Machines/01 Character</em></p>
<p><i class="emw fa fa-code-fork"></i> <strong>Recommended After</strong>: <a href="../../basics/character">Basic Character</a></p>
<p><i class="emw fa fa-puzzle-piece"></i> <strong>Learning Outcomes</strong>: <span class="mini">in this example you will learn:</span></p>
<p><i class="emw fa fa-lightbulb-o"></i> How to use Animancer's <a href="../../../manual/fsm">Finite State Machine</a> system.</p>
<p><i class="emw fa fa-lightbulb-o"></i> A useful pattern for dividing character logic into multiple scripts.</p>
<p><i class="emw fa fa-lightbulb-o"></i> Why dividing complex logic into multiple scripts is a good idea.</p>
</blockquote>
<p>This example demonstrates how the logic from the <a href="../../basics/character">Basic Character</a> example can be divided into multiple scripts using Animancer's <a href="../../../manual/fsm">Finite State Machine</a> system.</p>
<p><img src="characters.png" class="pngif img-responsive"></p>
<h1 id="summary">Summary</h1>
<ul>
<li>This example doesn't teach any new animation concepts.</li>
<li>It explains why you should split complex logic into multiple scripts and demonstrates how you can do so.</li>
<li>It uses Animancer's <a href="../../../manual/fsm">Finite State Machine</a> system, but the general concepts can be utilised in practically any system.</li>
</ul>
<h1 id="controls">Controls</h1>
<ul>
<li>W = Move.</li>
<li>Left Click = Shoot.</li>
</ul>
<h1 id="introduction">Introduction</h1>
<p></p><details><summary>This example uses six scripts to achieve the same thing that <code><a href="/animancer/api/Animancer.Examples.Basics/BasicCharacterAnimations">BasicCharacterAnimations</a></code> did in one script. Click here if you're wondering why that might be a good idea.</summary>
<p>The <code><a href="/animancer/api/Animancer.Examples.Basics/BasicCharacterAnimations">BasicCharacterAnimations</a></code> script has a lot of responsibilities squeezed into it:</p>
<ul>
<li>Reference all the character's animations.</li>
<li>Set the <em>Action</em> animation to go to the <em>Idle</em> animation when it ends.</li>
<li>Keep track of the character's current animation.</li>
<li>Start with the <em>Idle</em> animation.</li>
<li>When the character is not performing an action, allow them to <em>Idle</em>, <em>Move</em>, or perform an <em>Action</em>.</li>
<li>When the character is performing an action, only allow them to restart the <em>Action</em>.</li>
<li>Detect when the user Left Clicks and perform an <em>Action</em> if allowed.</li>
<li>Detect when the user is holding the <code>W</code> key and play the <em>Move</em> animation if allowed.</li>
</ul>
<p>Doing so many things in one script violates the <a href="https://en.wikipedia.org/wiki/Single-responsibility_principle">Single Responsibility Principle</a>. It's not too bad for a very simple situation like these examples, but game characters are often far more complex than that and can benefit greatly from having a properly designed code structure:</p>
<ul>
<li>It makes it easier to accomodate changes throughout the development of a project as you add new features and try different things without breaking old code and needing to waste time fixing it.</li>
<li>It can potentially allow you to reuse scripts in multiple different situations throughout a project and in future projects.</li>
<li>It allows bugs to be found and fixed more easily, without breaking other code.</li>
</ul>
<h2 id="sharing-logic">Sharing Logic</h2>
<p>A mistake commonly made by inexperienced developers is to write classes with names like <code>Player</code> and <code>Enemy</code> which end up having a significant amount of identical code. This is not always the case, but in a lot of games the enemies follow the same general structure and rules as the player:</p>
<table class="table">
  <thead>
    <tr><th style="width:50%">Player</th>
    <th style="width:50%">Enemy</th>
  </tr></thead>
  <tbody>
    <tr>
      <td>Has a model or sprite that can be animated.</td>
      <td>Has a model or sprite that can be animated.</td>
    </tr>
    <tr>
      <td>Has a model or sprite that can be animated.</td>
      <td>Has a model or sprite that can be animated.</td>
    </tr>
    <tr>
      <td>Has a health pool and can take damage.</td>
      <td>Has a health pool and can take damage.</td>
    </tr>
    <tr>
      <td>Has a <code>Rigidbody</code> or <code>CharacterController</code> for movement.</td>
      <td>Has a <code>Rigidbody</code> or <code>CharacterController</code> for movement.</td>
    </tr>
    <tr>
      <td>Has a system for managing the actions it can perform.</td>
      <td>Has a system for managing the actions it can perform.</td>
    </tr>
    <tr>
      <td>Is controlled by user input from a controller/keyboard/mouse/etc.</td>
      <td>Is controlled by some form of AI.</td>
    </tr>
  </tbody>
</table>
<p>Since there are so many similarities between them, it makes sense to structure their scripts in a way that allows them to share much of the same logic. Sharing logic is generally done by splitting it into multiple scripts and using <a href="/cs-unity/docs/introduction/inheritance">Inheritance</a> and/or <a href="/cs-unity/docs/introduction/inheritance#composition">Composition</a> to connect them. This also helps adhere to the <a href="https://en.wikipedia.org/wiki/Single-responsibility_principle">Single Responsibility Principle</a> which aims to make code easier to reuse in different situations, easier to change throughout the development of a project, and easier to fix when bugs are found.</p>
</details><p></p>
<h1 id="overview">Overview</h1>
<p>The general code structure in this example has been used effectively in a wide range of different situations (both with and without Animancer) but like all design patterns it can't be perfect for everything so you should always feel free to add your own variations or use a different approach entirely depending on the needs of your situation.</p>
<p>Here's an overview of the main parts which make up a character in this system:</p>
<table class="table">
<thead>
<tr>
<th>Script</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="#character">Character</a></td>
<td>A centralised group of <strong>references</strong> to the common parts of a character and their state machine.</td>
</tr>
<tr>
<td><a href="#state-machine">State Machine</a></td>
<td>Determines <strong>what the character is currently doing</strong> and enforces the entry/exit rules defined by individual <a href="#states">States</a>.</td>
</tr>
<tr>
<td><a href="#states">States</a></td>
<td>Determine <strong>what the character could do</strong> and what actually happens when they do it.</td>
</tr>
<tr>
<td><a href="#brain">Brain</a></td>
<td>Decides <strong>what the character wants to do</strong> (as a result of player input, AI, etc.).</td>
</tr>
</tbody>
</table>
<p>The code structure is much more complicated than the <a href="../../basics/character">Basic Character</a> example, but by the end of this example you should understand how it all fits together:</p>
<p><img src="architecture.png" class="img-responsive" id="architecture"></p>
<img src="character-inspector.png" class="img-responsive img-right" style="max-width:40%">
<h1 id="character">Character</h1>
<p></p><details><summary>The <code>Character</code> class is responsible for holding references to other systems so they can all be easily referenced in one place.</summary>
<p>The <code>Character</code> is the core of any character, whether it be a player, enemy, NPC, person, animal, monster, or robot. A different term may be more suitable depending on the type of game you are making - for example, a strategy game might call it a <code>Unit</code> while a space game might call it a <code>Ship</code> - but the idea is always the same: all of the game's characters share the same standard script which holds references to each of its other components (and typically very little logic of its own). It references things like:</p>
<ul>
<li>The animation system (an <code><a href="/animancer/api/Animancer/AnimancerComponent">AnimancerComponent</a></code> if you use Animancer, but otherwise it might just be an <code>Animator</code>).</li>
<li>A state machine (this example uses Animancer's <a href="../../../manual/fsm">Finite State Machine</a> system, but you can use any system you like).</li>
<li>Any other common features that most characters have such as a <code>Rigidbody</code>, character attributes, inventory, health pool, and so on.</li>
</ul>
<p>Having this central script means that other scripts can simply have one reference to the <code>Character</code> and access all their other components through it. For example, the <a href="#action-state">Action State</a> wants to play an animation and then return the character to their <a href="#idle-state">Idle State</a>. So instead of needing to reference the <code><a href="/animancer/api/Animancer/AnimancerComponent">AnimancerComponent</a></code>, <code>StateMachine</code>, and idle <code>CharacterState</code>, it just references the <code>Character</code> so it can access the <code>Character.Animancer</code>, <code>Character.StateMachine</code>, and <code>Character.Idle</code>.</p>
</details><p></p>
<p>It references the <code><a href="/animancer/api/Animancer/AnimancerComponent">AnimancerComponent</a></code>:</p>
<pre><code class="language-cs">public sealed class Character : MonoBehaviour
{
    [SerializeField]
    private <a href="/animancer/api/Animancer/AnimancerComponent">AnimancerComponent</a> _Animancer;
</code></pre>
<p>And has an accessor <a href="/cs-unity/docs/introduction/methods#properties">Property</a> so other scripts can use that reference but not re-assign it:</p>
<pre><code class="language-cs">    public <a href="/animancer/api/Animancer/AnimancerComponent">AnimancerComponent</a> Animancer =&gt; _Animancer;
</code></pre>
<p>The other fields aren't used in this example but are properly explained in later examples which reuse the scripts from this one:</p>
<table class="table">
  <thead>
    <tr><th>Code</th>
    <th>Example</th>
  </tr></thead>
  <tbody>
    <tr>
      <td>
<pre><code class="language-cs">[SerializeField]
private <a href="/animancer/api/Animancer.Examples.StateMachines/HealthPool">HealthPool</a> _Health;
public <a href="/animancer/api/Animancer.Examples.StateMachines/HealthPool">HealthPool</a> Health =&gt; _Health;
</code></pre>
</td>
      <td><a href="../interruptions">Interruptions</a></td>
    </tr>
    <tr>
      <td>
<pre><code class="language-cs">[SerializeField]
private CharacterParameters _Parameters;
public CharacterParameters Parameters =&gt; _Parameters;
</code></pre>
</td>
      <td><a href="../brains">Brains</a></td>
    </tr>
    <tr>
      <td>
<pre><code class="language-cs">[SerializeField]
private <a href="/animancer/api/Animancer.Examples.StateMachines/Equipment">Equipment</a> _Equipment;
public <a href="/animancer/api/Animancer.Examples.StateMachines/Equipment">Equipment</a> <a href="/animancer/api/Animancer.Examples.StateMachines/Equipment">Equipment</a> =&gt; _Equipment;
</code></pre>
</td>
      <td><a href="../weapons">Weapons</a></td>
    </tr>
  </tbody>
</table>
<p>In a real project, this is where you would also put references to things like a <code>Rigidbody</code> or <code>CharacterController</code>, a script that detects whether the character is currently on the ground, and character stats.</p>
<h1 id="state-machine">State Machine</h1>
<p>The <code>Character</code> class also holds the <code>StateMachine</code> that will manage their actions. It uses the <a href="../../../manual/fsm/initialization#serialized-field">Serialized Field pattern explained on the Initialization page</a>:</p>
<pre><code class="language-cs">[DefaultExecutionOrder(-10000)]
public sealed class Character : MonoBehaviour
{
    ...
    
    [SerializeField]
    private CharacterState.StateMachine _StateMachine;
    public CharacterState.StateMachine StateMachine =&gt; _StateMachine;

    private void Awake()
    {
        StateMachine.InitializeAfterDeserialize();
    }
}
</code></pre>
<p>The <code>CharacterState</code> class is explained properly below, but for now we're just interested in its nested <code>StateMachine</code> class which is using a <a href="../../../manual/fsm/initialization#default-states">State Machine with a Default State</a>:</p>
<pre><code class="language-cs">class CharacterState
{
    [System.Serializable]
    public class StateMachine : StateMachine&lt;CharacterState&gt;.WithDefault { }

    ...
}
</code></pre>
<p></p><details><summary>Why is that <code>StateMachine</code> class inside <code>CharacterState</code> instead of <code>Character</code>?</summary>
<p>Two reasons:</p>
<ul>
<li>The generic parameter is <code>CharacterState</code> so it makes sense for it to be explicitly associated with that class every time you access it.</li>
<li><code>Character</code> already has a property called <code>StateMachine</code> so the class would need a different name like <code>CharacterStateMachine</code>.</li>
</ul>
<p>If those reasons seem very minor to you, that's because they are indeed very minor. Nothing would really change if you wanted to put it in the <code>Character</code> class or not have it nested at all. It simply comes down to your personal preferences.</p>
</details><p></p>
<h1 id="states">States</h1>
<p>The base <a href="../../../manual/fsm/state-types">State Type</a> in this example is <code>CharacterState</code>.</p>
<p>It could <a href="/cs-unity/docs/introduction/inheritance">Inherit</a> from <code>MonoBehaviour</code> and implement <code><a href="/animancer/api/Animancer.FSM/IState">IState</a></code>, but it's easier to just <a href="/cs-unity/docs/introduction/inheritance">Inherit</a> from <code><a href="/animancer/api/Animancer.FSM/StateBehaviour">StateBehaviour</a></code>:</p>
<pre><code class="language-cs">public abstract class CharacterState : <a href="/animancer/api/Animancer.FSM/StateBehaviour">StateBehaviour</a>
{
</code></pre>
<p>The nested <code>StateMachine</code> class was already mentioned above:</p>
<pre><code class="language-cs">    [System.Serializable]
    public class StateMachine : StateMachine&lt;CharacterState&gt;.WithDefault { }
</code></pre>
<p>Every state has a reference to the <code>Character</code> it controls:</p>
<pre><code class="language-cs">    [SerializeField]
    private Character _Character;
    public Character Character =&gt; _Character;
</code></pre>
<p>And in order to avoid needing the user to manually assign the <code>Character</code> for every state, it has an <code>OnValidate</code> method which uses the <a href="/cs-unity/docs/component-referencing/extension-methods">Extension Method Approach</a> to automatically find an appropriate reference nearby:</p>
<pre><code class="language-cs">#if UNITY_EDITOR
    protected override void OnValidate()
    {
        base.OnValidate();

        gameObject.GetComponentInParentOrChildren(ref _Character);
    }
#endif
</code></pre>
<p>That method needs to be in a <code>#if UNITY_EDITOR</code> block because the base method it overrides in <code><a href="/animancer/api/Animancer.FSM/StateBehaviour">StateBehaviour</a></code> is also in a <code>#if UNITY_EDITOR</code> block.</p>
<p>There are also several more properties to determine which states can interrupt each other. They are explained properly in the <a href="../interruptions">Interruptions</a> example:</p>
<pre><code class="language-cs">    public virtual <a href="/animancer/api/Animancer.Examples.StateMachines/CharacterStatePriority">CharacterStatePriority</a> Priority =&gt; CharacterStatePriority.Low;

    public virtual bool CanInterruptSelf =&gt; false;

    public override bool CanExitState
    {
        get
        {
            // There are several different ways of accessing the state change details:
            // var nextState = StateChange&lt;CharacterState&gt;.NextState;
            // var nextState = this.GetNextState();
            var nextState = _Character.StateMachine.NextState;
            if (nextState == this)
                return CanInterruptSelf;
            else if (Priority == CharacterStatePriority.Low)
                return true;
            else
                return nextState.Priority &gt; Priority;
        }
    }
}
</code></pre>
<p>This example has 3 state types which inherit from that base:</p>
<ul>
<li><a href="#idle-state">Idle</a></li>
<li><a href="#move-state">Move</a></li>
<li><a href="#action-state">Action</a></li>
</ul>
<img src="idle-inspector.png" class="img-responsive img-right" style="max-width:40%">
<h1 id="idle-state">Idle State</h1>
<p>The <em>Idle</em> state is very simple, just a <a href="../../../manual/transitions">Transition</a> which it plays when the state is entered:</p>
<pre><code class="language-cs">public sealed class IdleState : CharacterState
{
    [SerializeField] private <a href="/animancer/api/Animancer/ClipTransition">ClipTransition</a> _Animation;

    private void OnEnable()
    {
        Character.Animancer.Play(_Animation);
    }
}
</code></pre>
<p><code>CharacterState</code> inherits from <code><a href="/animancer/api/Animancer.FSM/StateBehaviour">StateBehaviour</a></code> which means it will automatically disable itself by default and then enable itself when the state machine enters the state. So the <code>OnEnable</code> method will effectively do the same as if we had used <code>public override void OnEnterState()</code>.</p>
<img src="move-inspector.png" class="img-responsive img-right" style="max-width:40%">
<h1 id="move-state">Move State</h1>
<p>There is no <em>Move</em> state script in this example because <code>IdleState</code> already does exactly what it needs, so the character simply has a second <code>IdleState</code> component with a different animation assigned.</p>
<p>The <a href="../brains">Brains</a> example implements a proper <code><a href="/animancer/api/Animancer.Examples.StateMachines/MoveState">MoveState</a></code> to allow the character to actually move around the scene, including walking and running, as well as turning.</p>
<img src="action-inspector.png" class="img-responsive img-right" style="max-width:40%">
<h1 id="action-state">Action State</h1>
<p>The <em>Action</em> state starts the same as the others but has a bit more complexity below:</p>
<pre><code class="language-cs">public sealed class <a href="/animancer/api/Animancer.Examples.StateMachines/ActionState">ActionState</a> : CharacterState
{
    [SerializeField] private <a href="/animancer/api/Animancer/ClipTransition">ClipTransition</a> _Animation;

    private void OnEnable()
    {
        Character.Animancer.Play(_Animation);
    }
</code></pre>
<p>Again, in a real project it would be better to remove that duplicated code and have <code><a href="/animancer/api/Animancer.Examples.StateMachines/ActionState">ActionState</a></code> <a href="/cs-unity/docs/introduction/inheritance">Inherit</a> from <code>AnimatedState</code>, but for the sake of simplicity this example keeps each state a bit more self-contained.</p>
<p>Unlike <a href="#idle-state">Idle</a> and <a href="#move-state">Move</a>, this animation isn't looping so we want to return to <a href="#idle-state">Idle</a> when it ends. Since the <a href="#state-machine">State Machine declared above</a> has a <a href="../../../manual/fsm/initialization#default-states">Default State</a>, we can easily set the animation's <a href="../../../manual/events/end">End Event</a> to return to it:</p>
<pre><code class="language-cs">    private void Awake()
    {
        _Animation.Events.OnEnd = Character.StateMachine.ForceSetDefaultState;
    }
</code></pre>
<p>It overrides the properties that control how it can be interrupted (which will be explained properly in the <a href="../interruptions">Interruptions</a> example):</p>
<ul>
<li><code>Priority</code> returns <code>Medium</code> so that it can interrupt the <code>IdleState</code> but not be interrupted by it (because <code>IdleState</code> uses the default <code>Low</code> priority from the base <code>CharacterState</code>).</li>
<li><code>CanInterruptSelf</code> returns <code>true</code> so that the character can still rapid fire like they could in the <a href="../../basics/character">Basic Character</a> example.</li>
</ul>
<pre><code class="language-cs">    public override <a href="/animancer/api/Animancer.Examples.StateMachines/CharacterStatePriority">CharacterStatePriority</a> Priority =&gt; CharacterStatePriority.Medium;

    public override bool CanInterruptSelf =&gt; true;
}
</code></pre>
<img src="brain-inspector.png" class="img-responsive img-right" style="max-width:40%">
<h1 id="brain">Brain</h1>
<p>A character's brain is responsible for deciding what they <em>want to do</em>. The <a href="../brains">Brains</a> example explains why the system in general is designed the way it is, so this section only focusses on what this specific script does.</p>
<p>There are two things this character can choose to do: <em>Move</em> and perform an <em>Action</em>. So the brain has a <code>Character</code> to control and fields for each of those actions:</p>
<pre><code class="language-cs">public sealed class <a href="/animancer/api/Animancer.Examples.StateMachines/BasicCharacterBrain">BasicCharacterBrain</a> : MonoBehaviour
{
    [SerializeField] private Character _Character;
    [SerializeField] private CharacterState _Move;
    [SerializeField] private CharacterState _Action;
</code></pre>
<p>Then it has an <code>Update</code> method which is similar to the <a href="../../basics/character#update"><code>Update</code> method in the Basic Character example</a>, but this one is simpler because the responsibility of determining what the character <em>can do</em> at any given time is already handled by the <a href="#state-machine">State Machine</a>:</p>
<pre><code class="language-cs">    private void Update()
    {
        UpdateMovement();
        UpdateAction();
    }
</code></pre>
<p>The <code>UpdateMovement</code> and <code>UpdateAction</code> methods are also very similar to the <a href="../../basics/character#methods">Methods in the Basic Character example</a> and it avoids the extra complexity added in the <a href="../../basics/character#method-changes">Method Changes</a> section because instead of directly telling Animancer to play animations it tells the character to try to enter states and leaves it up to those states to determine what actually happens:</p>
<pre><code class="language-cs">    private void UpdateMovement()
    {
        float forward = ExampleInput.WASD.y;
        if (forward &gt; 0)
        {
            _Character.StateMachine.TrySetState(_Move);
        }
        else
        {
            _Character.StateMachine.TrySetDefaultState();
        }
    }

    private void UpdateAction()
    {
        if (ExampleInput.LeftMouseUp)
            _Character.StateMachine.TryResetState(_Action);
    }
}
</code></pre>
<p>There are several different methods of <a href="../../../manual/fsm/changing-states">Changing States</a> used there:</p>
<table class="table">
<thead>
<tr>
<th>Method</th>
<th>Effect</th>
<th>Why use it here?</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>TrySetState</code></td>
<td>Will do nothing if the character was already in the target state.</td>
<td>Because we call it every frame while the movement button is held and there's no point in repeatedly entering the <em>Move</em> state.</td>
</tr>
<tr>
<td><code>TryResetState</code></td>
<td>Will re-enter the target state if the character was already in it.</td>
<td>Because we want to allow <a href="../../basics/transitions#rapid-fire">Rapid Fire</a> if the user clicks again while they were already performing the action.</td>
</tr>
<tr>
<td><code>TrySetDefaultState</code></td>
<td>Calls <code>TrySetState</code> with the <a href="../../../manual/fsm/initialization#default-states">Default State</a>.</td>
<td>Because the brain doesn't have a reference to the character's <a href="#idle-state">Idle</a> state (it could be given one, but this way it doesn't need one).</td>
</tr>
</tbody>
</table>
<h1 id="scene-setup">Scene Setup</h1>
<p>Since we put all that effort into logically separating the character's scripts, it's worthwhile to logically group their scene objects as well to avoid ending up with a long list of components on a single object in the Inspector:</p>
<p></p><details><summary>The <strong>Root Object</strong> has the <code>Character</code> and <code>IdleState</code>. In a real project, other components referenced by the <code>Character</code> such as a <code>Rigidbody</code> would also go here.</summary>
<p><img src="setup-character.png" class="img-responsive"></p>
</details><p></p>
<p></p><details><summary>The <strong>Model</strong> has the <code>Animator</code> and <code><a href="/animancer/api/Animancer/AnimancerComponent">AnimancerComponent</a></code>. This allows the character's visuals to be rotated independently from the root character's physics or swapped out for something else. While setting up character prefabs this can allow you to simply make a copy of an existing one and replace its model while keeping the rest intact.</summary>
<p><img src="setup-model.png" class="img-responsive"></p>
</details><p></p>
<p></p><details><summary>The <strong>Brain and Actions</strong> has the <code><a href="/animancer/api/Animancer.Examples.StateMachines/BasicCharacterBrain">BasicCharacterBrain</a></code>, <code><a href="/animancer/api/Animancer.Examples.StateMachines/MoveState">MoveState</a></code>, and <code><a href="/animancer/api/Animancer.Examples.StateMachines/ActionState">ActionState</a></code> on the same object because the brain is what controls those actions. Note that the <code><a href="/animancer/api/Animancer.Examples.StateMachines/ActionState">ActionState</a></code>'s <code>Animation</code> has its <code>Start Time</code> ticked so that every time it is told to play it will set the time to 0 instead of letting it continue from where it was.</summary>
<p><img src="setup-brain.png" class="img-responsive"></p>
</details><p></p>
<p></p><details><summary>There are plenty of other ways the character could be structured. Some approaches are better than others, but in the end it mostly comes down to personal preference.</summary>
<p>You could put each state onto its own <code>GameObject</code>, but that's a lot of performance overhead to have an additional <code>GameObject</code> and <code>Transform</code> for every state.</p>
<p>You might also be tempted to put the <strong>Brain</strong> on a separate object from the <strong>Actions</strong>, but that can be inconvenient because when you drag and drop the <strong>Actions</strong> object from the Hierarchy into a <code>CharacterState</code> field on the <strong>Brain</strong> Unity will simply assign the first <code>CharacterState</code> component instead of letting you pick which one you want to assign.</p>
<ul>
<li><a href="/inspector-gadgets/docs/script-inspector/object-reference-fields#drop-component">Inspector Gadgets Pro solves this by showing a menu to let you pick which component you want</a>.</li>
<li>Otherwise, it is possible to use the following workaround but it's not very convenient:</li>
</ul>
<ol>
<li>Right Click on the header tab of any Unity window (such as the Inspector) to open the context menu.</li>
<li>Use the <em>Add Tab</em> menu to open another Inspector window.</li>
<li>Select the <strong>Brain</strong> object.</li>
<li>Click the <em>Lock</em> icon in the top right of one of the Inspector windows.</li>
<li>Select the <strong>Actions</strong> object.</li>
<li>Now the locked Inspector will be showing the <strong>Brain</strong> and the un-locked one will be showing the <strong>Actions</strong> so you can drag a specific state component into the field you want on the brain component.</li>
</ol>
</details><p></p>
<p>With all that set up, now you can enter Play Mode to see the character in action:</p>
<p><img src="characters.png" class="pngif img-responsive"></p>
<h1 id="what-next">What Next?</h1>
<table class="table">
<thead>
<tr>
<th>Example</th>
<th>Topic</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><a href="../interruptions">Interruptions</a></strong></td>
<td>Ways of controlling which state changes are allowed and which aren't.</td>
</tr>
<tr>
<td><a href="../brains">Brains</a></td>
<td>A deeper look into the concept of character brains.</td>
</tr>
<tr>
<td><a href="../weapons">Weapons</a></td>
<td>Equipping and attacking with various weapons that each have different animations.</td>
</tr>
<tr>
<td><a href="/platformer">Platformer Game Kit</a></td>
<td>A separate (free) package which demonstrates a much more complete character implementation for a 2D platformer game.</td>
</tr>
<tr>
<td><a href="../../animator-controllers/3d-game-kit">3D Game Kit</a></td>
<td>A more complex character framework based on Unity's <a href="https://assetstore.unity.com/packages/templates/tutorials/3d-game-kit-lite-135162">3D Game Kit Lite</a>.</td>
</tr>
</tbody>
</table>

	</section>
                
            </div>           
            
            <!-- Footer -->
            <footer class="main-footer">
            </footer>
            
        </div>
        <div class="wrapper bottom-wrapper">
            <footer class="bottom-footer">
                <strong><div style="text-align:left; display:flex">

<div>
<p>Documentation</p>
<p><a href="/animancer/docs/examples">Examples</a></p>
<p><a href="/animancer/docs/manual">User Manual</a></p>
<p><a href="/animancer/docs/changes">Change Log</a></p>
</div>

<div style="width:10%"></div>

<div>
<p>Download</p>
<p><a href="https://kybernetik.itch.io/animancer-pro">Itch.io (Recommended)</a></p>
<p><a href="https://assetstore.unity.com/packages/tools/animation/animancer-pro-116514?aid=1100l8ah5">Asset Store (Animancer Pro)</a></p>
<p><a href="https://assetstore.unity.com/packages/tools/animation/animancer-lite-116516?aid=1100l8ah5">Asset Store (Animancer Lite)</a></p>
</div>

<div style="width:10%"></div>

<div>
<p>Contact</p>
<p><a href="https://github.com/KybernetikGames/animancer/issues">Github Issues</a></p>
<p><a href="/animancer/redirect/forum">Unity Forum</a></p>
<p><a href="mailto:animancer@kybernetik.com.au?subject=Animancer">Email</a></p>
</div>

<div style="width:10%"></div>

<div>
<p>Other Assets</p>
<p><a href="/flexi-motion">FlexiMotion</a></p>
<p><a href="/inspector-gadgets">Inspector Gadgets</a></p>
<p><a href="/weaver">Weaver</a></p>
</div>

<div style="width:10%"></div>

<div>
<p>&nbsp;</p>
<p><a href="https://assetstore.unity.com/packages/vfx/shaders/simple-sun-shader-72042?aid=1100l8ah5">Simple Sun Shader</a></p>
<p><a href="https://assetstore.unity.com/packages/tools/version-control/link-sync-229569?aid=1100l8ah5">Link &amp; Sync</a></p>
<p><a href="/ultevents">UltEvents</a></p>
</div>

</div></strong>
<script src="/animancer/assets/js/pngif.js"></script>
            </footer>
        </div>
        <a href="javascript:" id="return-to-top"><i class="fa fa-chevron-up"></i></a>
        
        <script>           
            // Close the sidebar if we select an anchor link
            $(".main-sidebar a[href^='#']:not('.expand')").click(function(){
                $(document.body).removeClass('sidebar-open');
            });
            
            $(document).ready(function() {
                mermaid.initialize(
                {
                    flowchart:
                    {
                        useMaxWidth: false
                    },
					startOnLoad: false,
					cloneCssStyles: false
                });     
                mermaid.init(undefined, ".mermaid");

                // Remove the max-width setting that Mermaid sets
                var mermaidSvg = $('.mermaid svg');
                mermaidSvg.addClass('img-responsive');
                mermaidSvg.css('max-width', '');

                // Make it scrollable
				var target = document.querySelector(".mermaid svg");
				if(target !== null)
				{
					var panZoom = window.panZoom = svgPanZoom(target, {
						zoomEnabled: true,
						controlIconsEnabled: true,
						fit: true,
						center: true,
                        maxZoom: 20,
                        zoomScaleSensitivity: 0.6
					});			                          

                    // Do the reset once right away to fit the diagram
                    panZoom.resize();
                    panZoom.fit();
                    panZoom.center();
                    
                    $(window).resize(function(){
                        panZoom.resize();
                        panZoom.fit();
                        panZoom.center();
                    });
				}
                
                $('pre code').each(function(i, block) {
                    hljs.highlightBlock(block);
                });  
            });

            hljs.initHighlightingOnLoad();

            // Back to top
            $(window).scroll(function() {
                if ($(this).scrollTop() >= 200) {        // If page is scrolled more than 50px
                    $('#return-to-top').fadeIn(1000);    // Fade in the arrow
                } else {
                    $('#return-to-top').fadeOut(1000);   // Else fade out the arrow
                }
            });
            $('#return-to-top').click(function() {      // When arrow is clicked
                $('body,html').animate({
                    scrollTop : 0                       // Scroll to top of body
                }, 500);
            });
        </script>
    
</body></html>