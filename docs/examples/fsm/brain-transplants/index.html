<!DOCTYPE html><html><head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=Edge">
        <meta name="description">
        <meta name="keywords" content="static content generator,static site generator,static site,HTML,web development,.NET,C#,Razor,Markdown,YAML">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="shortcut icon" href="/animancer/assets/img/favicon.ico" type="image/x-icon">
        <link rel="icon" href="/animancer/assets/img/favicon.ico" type="image/x-icon">
        <title>Animancer - 05 Brain Transplants</title>
        <link href="/animancer/assets/css/highlight.css" rel="stylesheet">
        <link href="/animancer/assets/css/bootstrap/bootstrap.css" rel="stylesheet">
        <link href="/animancer/assets/css/adminlte/AdminLTE.css" rel="stylesheet">
        <link href="/animancer/assets/css/theme/theme.css" rel="stylesheet">
        <link href="//fonts.googleapis.com/css?family=Roboto+Mono:400,700|Roboto:400,400i,700,700i" rel="stylesheet">
        <link href="/animancer/assets/css/font-awesome.min.css" rel="stylesheet" type="text/css">
        <link href="/animancer/assets/css/override.css" rel="stylesheet">
        <script src="/animancer/assets/js/jquery-2.2.3.min.js"></script>
        <script src="/animancer/assets/js/bootstrap.min.js"></script>        
        <script src="/animancer/assets/js/app.min.js"></script>         
        <script src="/animancer/assets/js/highlight.pack.js"></script>   
        <script src="/animancer/assets/js/jquery.slimscroll.min.js"></script>
        <script src="/animancer/assets/js/jquery.sticky-kit.min.js"></script>
        <script src="/animancer/assets/js/mermaid.min.js"></script>
        <script src="/animancer/assets/js/svg-pan-zoom.min.js"></script>
        <!--[if lt IE 9]>
        <script src="/animancer/assets/js/html5shiv.min.js"></script>
        <script src="/animancer/assets/js/respond.min.js"></script>
        <![endif]-->  

        
    </head>
    <body class="hold-transition wyam layout-boxed  ">    
        <div class="top-banner"></div>
        <div class="wrapper with-container">
            <!-- Header -->
            <header class="main-header">   
                     
                <a href="/animancer/" class="logo">
                            <span>Animancer</span>
                </a>   
                         
                <nav class="navbar navbar-static-top" role="navigation">
                    <!-- Sidebar toggle button-->
                        <a href="#" class="sidebar-toggle visible-xs-block" data-toggle="offcanvas" role="button">
                            <span class="sr-only">Toggle side menu</span>
                            <i class="fa fa-chevron-circle-right"></i>
                        </a>
                                        
                    <div class="navbar-header">
                        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse">
                            <span class="sr-only">Toggle side menu</span>
                            <i class="fa fa-chevron-circle-down"></i>
                        </button>
                    </div>
            
                    <!-- Collect the nav links, forms, and other content for toggling -->
                    <div class="collapse navbar-collapse pull-left" id="navbar-collapse">
                        <ul class="nav navbar-nav">                            
                                    <li><a href="/animancer/docs/introduction/features"><img src="/animancer/images/features.png" height="20px" width="20px" style="left:-7px"> Features</a></li>
        <li><a href="/animancer/docs/download"><img src="/animancer/images/download.png" height="20px" width="20px" style="left:-7px"> Download</a></li>
        <li class="active"><a href="/animancer/docs"><img src="/animancer/images/docs.png" height="20px" width="7.5px" style="left:-5px"> Documentation</a></li>
        <li><a href="/animancer/docs/help"><img src="/animancer/images/help.png" height="20px" width="10.625px" style="left:-4px"> Help</a></li>
        <li><a href="/animancer/api/Animancer/AnimancerComponent"><img src="/animancer/images/api.png" height="20px" width="18.125px" style="left:-3px"> API v7.0</a></li>
        <li><a href="/kailas-dierk/unity-assets"><img src="/animancer/images/kybernetik.png" height="20px" width="20px" style="left:-2px"> Other Assets</a></li>

<li style="width:100%">
<form class="search-form" name="search" action="/animancer/search">
<span><input class="search-input" id="search" name="q" type="text" placeholder="Search..."></span>
<div class="search-button"><button type="submit"><i class="fa fa-search"></i></button></div>
</form>
</li> 
                        </ul>       
                    </div>
                    <!-- /.navbar-collapse -->
                
                    <!-- Navbar Right Menu -->
                </nav>
            </header>
            
            <!-- Left side column. contains the logo and sidebar -->
            <aside class="main-sidebar ">
                <section class="infobar" data-spy="affix" data-offset-top="60" data-offset-bottom="200"> 
                    	
    <div id="infobar-headings"><h6>On This Page</h6><p><a href="#mouse-brain">Mouse Brain</a></p>
<p><a href="#picking-a-target">Picking a Target</a></p>
<p><a href="#moving-towards-the-target">Moving Towards the Target</a></p>
<p><a href="#cancelling-the-target">Cancelling the Target</a></p>
<p><a href="#running">Running</a></p>
<p><a href="#live-brain-transplants">Live Brain Transplants</a></p>
<hr class="infobar-hidden">
</div>

                </section>
                <section class="sidebar">    
                                     
                    

                    <ul class="sidebar-menu">
                        

                <li><a href="/animancer/docs/download">Download</a></li>
                <li class="treeview">
                    <a href="/animancer/docs/introduction">Introduction</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/introduction/features">Features</a></li>
                <li class="treeview">
                    <a href="/animancer/docs/introduction/mecanim-vs-animancer">Mecanim vs. Animancer</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li class="treeview">
                    <a href="/animancer/docs/introduction/mecanim-vs-animancer/why">Why Replace Mecanim?</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/introduction/mecanim-vs-animancer/why/simplicity">Simplicity</a></li>
                <li><a href="/animancer/docs/introduction/mecanim-vs-animancer/why/transparency">Transparency</a></li>
                <li><a href="/animancer/docs/introduction/mecanim-vs-animancer/why/adaptability">Adaptability</a></li>
                <li><a href="/animancer/docs/introduction/mecanim-vs-animancer/why/clarity">Clarity</a></li>
                <li><a href="/animancer/docs/introduction/mecanim-vs-animancer/why/safety">Safety</a></li>
                <li><a href="/animancer/docs/introduction/mecanim-vs-animancer/why/reliability">Reliability</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/introduction/mecanim-vs-animancer/comparison">Comparison</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/introduction/mecanim-vs-animancer/comparison/playing">Playing</a></li>
                <li><a href="/animancer/docs/introduction/mecanim-vs-animancer/comparison/waiting">Waiting</a></li>
                <li><a href="/animancer/docs/introduction/mecanim-vs-animancer/comparison/speed-and-time">Speed and Time</a></li>
                <li><a href="/animancer/docs/introduction/mecanim-vs-animancer/comparison/weapon-animations">Weapon Animations</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/docs/introduction/mecanim-vs-animancer/conversion">Conversion</a></li>
                <li><a href="/animancer/docs/introduction/mecanim-vs-animancer/performance">Performance</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/docs/introduction/glossary">Glossary</a></li>
                <li class="treeview">
                    <a href="/animancer/docs/introduction/cs">C# in Unity</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/introduction/cs/overview">Scripting Overview</a></li>
                <li><a href="/animancer/docs/introduction/cs/organization">Organization</a></li>
                <li><a href="/animancer/docs/introduction/cs/variables">Variables</a></li>
                <li class="treeview">
                    <a href="/animancer/docs/introduction/cs/methods">Methods</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/introduction/cs/methods/parameters">Parameters</a></li>
                <li><a href="/animancer/docs/introduction/cs/methods/flow-control">Flow Control</a></li>
                <li><a href="/animancer/docs/introduction/cs/methods/return">Return Values</a></li>
                <li><a href="/animancer/docs/introduction/cs/methods/constructors">Constructors</a></li>
                <li><a href="/animancer/docs/introduction/cs/methods/properties">Properties</a></li>
                <li><a href="/animancer/docs/introduction/cs/methods/overloads">Overloads</a></li>
                <li><a href="/animancer/docs/introduction/cs/methods/messages">Messages</a></li>
                <li><a href="/animancer/docs/introduction/cs/methods/delegates">Delegates</a></li>
                <li><a href="/animancer/docs/introduction/cs/methods/extension">Extension Methods</a></li>
                <li><a href="/animancer/docs/introduction/cs/methods/conditional">Conditional Compilation</a></li>
                <li><a href="/animancer/docs/introduction/cs/methods/expression-bodied">Expression Bodied Members</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/docs/introduction/cs/inheritance">Inheritance</a></li>
                <li><a href="/animancer/docs/introduction/cs/vectors">Vectors</a></li>
                <li><a href="/animancer/docs/introduction/cs/other">Other Topics</a></li>

                    </ul>
                </li>

                    </ul>
                </li>
                <li class="treeview active">
                    <a href="/animancer/docs/examples">Examples</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li class="treeview">
                    <a href="/animancer/docs/examples/basics">01 Basics</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/basics/scene-setup">Basic Scene Setup</a></li>
                <li><a href="/animancer/docs/examples/basics/quick-play">01 Quick Play</a></li>
                <li><a href="/animancer/docs/examples/basics/playing-and-fading">02 Playing and Fading</a></li>
                <li><a href="/animancer/docs/examples/basics/transitions">03 Transitions</a></li>
                <li><a href="/animancer/docs/examples/basics/named-animations">04 Named Animations</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/examples/fine-control">02 Fine Control</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/fine-control/spider-bot">01 Spider Bot</a></li>
                <li><a href="/animancer/docs/examples/fine-control/doors">02 Doors</a></li>
                <li><a href="/animancer/docs/examples/fine-control/solo-animation">03 Solo Animation</a></li>
                <li><a href="/animancer/docs/examples/fine-control/update-rate">04 Update Rate</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/examples/locomotion">03 Locomotion</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/locomotion/root-motion">01 Root Motion</a></li>
                <li><a href="/animancer/docs/examples/locomotion/linear-blending">02 Linear Blending</a></li>
                <li><a href="/animancer/docs/examples/locomotion/directional-blending">03 Directional Blending</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/examples/directional-sprites">04 Directional Sprites</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/directional-sprites/basic-movement">01 Basic Movement</a></li>
                <li><a href="/animancer/docs/examples/directional-sprites/character-controller">02 Character Controller</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/examples/events">05 Events</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/events/footsteps">01 Footstep Events</a></li>
                <li><a href="/animancer/docs/examples/events/golf">02 Golf Events</a></li>
                <li><a href="/animancer/docs/examples/events/utilities">03 Event Utilities</a></li>

                    </ul>
                </li>
                <li class="treeview active">
                    <a href="/animancer/docs/examples/fsm">06 State Machines</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li class="treeview">
                    <a href="/animancer/docs/examples/fsm/game-manager">01 Game Manager</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/fsm/game-manager/enum">Enum</a></li>
                <li><a href="/animancer/docs/examples/fsm/game-manager/fsm">FSM</a></li>
                <li><a href="/animancer/docs/examples/fsm/game-manager/comparison">Comparison</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/docs/examples/fsm/characters">02 Characters</a></li>
                <li><a href="/animancer/docs/examples/fsm/interrupts">03 Interrupt Management</a></li>
                <li><a href="/animancer/docs/examples/fsm/brains">04 Brains</a></li>
                <li class="selected"><a href="/animancer/docs/examples/fsm/brain-transplants">05 Brain Transplants</a></li>
                <li><a href="/animancer/docs/examples/fsm/weapons">06 Weapons</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/docs/examples/layers">07 Layers</a></li>
                <li class="treeview">
                    <a href="/animancer/docs/examples/ik">08 Inverse Kinematics</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/ik/puppet">01 Puppet</a></li>
                <li><a href="/animancer/docs/examples/ik/uneven-ground">02 Uneven Ground</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/examples/animator-controllers">09 Animator Controllers</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/animator-controllers/basics">01 Hybrid Basics</a></li>
                <li><a href="/animancer/docs/examples/animator-controllers/mini-game">02 Hybrid Mini Game</a></li>
                <li class="treeview">
                    <a href="/animancer/docs/examples/animator-controllers/3d-game-kit">03 3D Game Kit</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/animator-controllers/3d-game-kit/problems">Problems with the Mecanim Character</a></li>
                <li><a href="/animancer/docs/examples/animator-controllers/3d-game-kit/respawn">Respawn</a></li>
                <li><a href="/animancer/docs/examples/animator-controllers/3d-game-kit/idle">Idle</a></li>
                <li class="treeview">
                    <a href="/animancer/docs/examples/animator-controllers/3d-game-kit/locomotion">Locomotion</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/animator-controllers/3d-game-kit/locomotion/movement">Movement</a></li>
                <li><a href="/animancer/docs/examples/animator-controllers/3d-game-kit/locomotion/turning">Turning</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/docs/examples/animator-controllers/3d-game-kit/airborne">Airborne</a></li>
                <li><a href="/animancer/docs/examples/animator-controllers/3d-game-kit/landing">Landing</a></li>
                <li><a href="/animancer/docs/examples/animator-controllers/3d-game-kit/attack">Attack</a></li>
                <li><a href="/animancer/docs/examples/animator-controllers/3d-game-kit/flinch">Flinch</a></li>
                <li><a href="/animancer/docs/examples/animator-controllers/3d-game-kit/die">Die</a></li>

                    </ul>
                </li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/examples/jobs">10 Animation Jobs</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/jobs/two-bone-ik">01 Two Bone IK</a></li>
                <li><a href="/animancer/docs/examples/jobs/damping">02 Damping</a></li>
                <li><a href="/animancer/docs/examples/jobs/lean">03 Lean</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/examples/integration">Integration</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/integration/animation-rigging">Animation Rigging</a></li>
                <li><a href="/animancer/docs/examples/integration/dynamic-bone">Dynamic Bone</a></li>
                <li><a href="/animancer/docs/examples/integration/final-ik">Final IK</a></li>
                <li><a href="/animancer/docs/examples/integration/hairibar-ragdoll">Hairibar Ragdoll</a></li>
                <li><a href="/animancer/docs/examples/integration/lod">Level of Detail (LOD)</a></li>
                <li><a href="/animancer/docs/examples/integration/puppet-master">Puppet Master</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/docs/examples/no-video-tutorials">No Video Tutorials</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/manual">User Manual</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li class="treeview">
                    <a href="/animancer/docs/manual/getting">Getting Animations</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/manual/getting/mixamo">Mixamo</a></li>
                <li><a href="/animancer/docs/manual/getting/importing">Importing</a></li>
                <li><a href="/animancer/docs/manual/getting/animation-window">Animation Window</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/manual/playing">Playing Animations</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/manual/playing/states">States</a></li>
                <li><a href="/animancer/docs/manual/playing/inspector">Inspector</a></li>
                <li><a href="/animancer/docs/manual/playing/component-types">Component Types</a></li>
                <li><a href="/animancer/docs/manual/playing/edit-mode">Playing in Edit Mode</a></li>
                <li><a href="/animancer/docs/manual/playing/directional-sets">Directional Animation Sets</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/manual/transitions">Transitions</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/manual/transitions/types">Transition Types</a></li>
                <li><a href="/animancer/docs/manual/transitions/assets">Transition Assets</a></li>
                <li><a href="/animancer/docs/manual/transitions/previews">Transition Previews</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/manual/blending">Blending</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/manual/blending/fading">Fading</a></li>
                <li><a href="/animancer/docs/manual/blending/layers">Layers</a></li>
                <li><a href="/animancer/docs/manual/blending/mixers">Mixers</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/manual/events">Events</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/manual/events/animation">Animation Events</a></li>
                <li><a href="/animancer/docs/manual/events/animancer">Animancer Events</a></li>
                <li><a href="/animancer/docs/manual/events/end">End Events</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/manual/fsm">Finite State Machines</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/manual/fsm/overview">Overview</a></li>
                <li><a href="/animancer/docs/manual/fsm/changing-states">Changing States</a></li>
                <li><a href="/animancer/docs/manual/fsm/state-types">State Types</a></li>
                <li><a href="/animancer/docs/manual/fsm/keys">Keys</a></li>
                <li><a href="/animancer/docs/manual/fsm/utilities">Utilities</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/docs/manual/animator-controllers">Animator Controllers</a></li>
                <li><a href="/animancer/docs/manual/timeline">Timeline</a></li>
                <li><a href="/animancer/docs/manual/ik">Inverse Kinematics</a></li>
                <li class="treeview">
                    <a href="/animancer/docs/manual/tools">Animancer Tools</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/manual/tools/pack-textures">Pack Textures</a></li>
                <li><a href="/animancer/docs/manual/tools/modify-sprites">Modify Sprites</a></li>
                <li><a href="/animancer/docs/manual/tools/rename-sprites">Rename Sprites</a></li>
                <li><a href="/animancer/docs/manual/tools/generate-sprite-animations">Generate Sprite Animations</a></li>
                <li><a href="/animancer/docs/manual/tools/remap-sprite-animation">Remap Sprite Animation</a></li>
                <li><a href="/animancer/docs/manual/tools/remap-animation-bindings">Remap Animation Bindings</a></li>
                <li><a href="/animancer/docs/manual/tools/sprite-renderer-texture-swap">Sprite Renderer Texture Swap</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/manual/other">Other Features</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/manual/other/polymorphic">Polymorphic Drawer</a></li>
                <li><a href="/animancer/docs/manual/other/units">Units Attributes</a></li>

                    </ul>
                </li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/bugs">Unity Bugs</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/bugs/events">Animation Events</a></li>
                <li><a href="/animancer/docs/bugs/animator-controller-speed">Animator Controller Speed</a></li>
                <li><a href="/animancer/docs/bugs/paused-skinned-mesh-update">Paused Skinned Mesh Update</a></li>
                <li><a href="/animancer/docs/bugs/serialized-array-initialization">Serialized Array Initialization</a></li>
                <li><a href="/animancer/docs/bugs/stabilize-feet">Stabilize Feet</a></li>
                <li><a href="/animancer/docs/bugs/timeline">Timeline</a></li>
                <li><a href="/animancer/docs/bugs/timing">Timing</a></li>
                <li><a href="/animancer/docs/bugs/update-modes">Update Modes</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/source">Source Code</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/source/dlls">DLLs</a></li>
                <li><a href="/animancer/docs/source/creating-custom-states">Creating Custom States</a></li>
                <li><a href="/animancer/docs/source/graph-structure">Graph Structure</a></li>
                <li><a href="/animancer/docs/source/asset-sources">Asset Sources</a></li>
                <li><a href="/animancer/docs/source/coding-standard">Coding Standard</a></li>
                <li><a href="/animancer/docs/source/default-script-template">Default Script Template</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/changes">Change Log</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/changes/animancer-v7-0">Animancer v7.0</a></li>
                <li><a href="/animancer/docs/changes/animancer-v6-1">Animancer v6.1</a></li>
                <li class="treeview">
                    <a href="/animancer/docs/changes/animancer-v6-0">Animancer v6.0</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/changes/animancer-v6-0/test">Test Releases</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/docs/changes/animancer-v5-3">Animancer v5.3</a></li>
                <li><a href="/animancer/docs/changes/animancer-v5-2">Animancer v5.2</a></li>
                <li><a href="/animancer/docs/changes/animancer-v5-1">Animancer v5.1</a></li>
                <li class="treeview">
                    <a href="/animancer/docs/changes/animancer-v5-0">Animancer v5.0</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/changes/animancer-v5-0/test">Test Releases</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/docs/changes/animancer-v4-4">Animancer v4.4</a></li>
                <li><a href="/animancer/docs/changes/animancer-v4-3">Animancer v4.3</a></li>
                <li><a href="/animancer/docs/changes/animancer-v4-2">Animancer v4.2</a></li>
                <li><a href="/animancer/docs/changes/animancer-v4-1">Animancer v4.1</a></li>
                <li class="treeview">
                    <a href="/animancer/docs/changes/animancer-v4-0">Animancer v4.0</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/changes/animancer-v4-0/test">Test Releases</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/docs/changes/animancer-v3-1">Animancer v3.1</a></li>
                <li><a href="/animancer/docs/changes/animancer-v3-0">Animancer v3.0</a></li>
                <li><a href="/animancer/docs/changes/animancer-v2-0">Animancer v2.0</a></li>
                <li><a href="/animancer/docs/changes/animancer-v1-3">Animancer v1.3</a></li>
                <li><a href="/animancer/docs/changes/animancer-v1-2">Animancer v1.2</a></li>
                <li><a href="/animancer/docs/changes/animancer-v1-1">Animancer v1.1</a></li>
                <li><a href="/animancer/docs/changes/animancer-v1-0">Animancer v1.0</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/help">Help and FAQ</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/help/debugging">Debugging</a></li>

                    </ul>
                </li>

                    </ul>
                            
                </section>                
            </aside>
            
            <!-- Content Wrapper. Contains page content -->
            <div class="content-wrapper">
                



		<section class="content-header">
			<h1>05 Brain Transplants</h1>
		</section>
	<section class="content">
		<blockquote class="blockquote">
<p><strong>Difficulty</strong>: <a href="../../../introduction/glossary#example-difficulty">Intermediate</a> - Recommended after <a href="../brains">Brains</a></p>
<p><strong>Location</strong>: <em>Assets/Plugins/Animancer/Examples/06 State Machines/05 Brain Transplants</em></p>
<p><strong>Namespace</strong>: <a href="../../../../api/Animancer.Examples.StateMachines.Brains"><code>Animancer.Examples.StateMachines.Brains</code></a></p>
</blockquote>
<p>This example expands upon the <a href="../brains">Brains</a> example to demonstrate how you can control each character differently by using different brains even though they share the same scripts for actually performing actions. Specifically, it adds a new brain class that uses mouse input instead of keyboard input.</p>
<p>This concept can be applied to anything that might need to control a character such as artificial intelligence for non-player characters, network messages in a multiplayer game, or pre-set events in a cutscene system.</p>
<p><img src="brain-transplant.gif" class="img-responsive"></p>
<h1 id="mouse-brain">Mouse Brain</h1>
<p>We are going to create a single new script to control the character with the mouse like you might in a top down game. Instead of moving in response to constant input like the <code><a href="/animancer/api/Animancer.Examples.StateMachines.Brains/KeyboardBrain">KeyboardBrain</a></code>, this time we are going to implement a system where you click somewhere to have your character walk there on their own. In a real game you might use a pathfinding algorithm to have the character avoid obstacles in their way, but for this example we will just walk straight towards the target.</p>
<p>This script starts off the same as the <code><a href="/animancer/api/Animancer.Examples.StateMachines.Brains/KeyboardBrain">KeyboardBrain</a></code> with a reference to the locomotion state:</p>
<pre><code class="language-cs">public sealed class <a href="/animancer/api/Animancer.Examples.StateMachines.Brains/MouseBrain">MouseBrain</a> : CharacterBrain
{
    [SerializeField] private CharacterState _Locomotion;
}
</code></pre>
<h1 id="picking-a-target">Picking a Target</h1>
<p>The first thing we need is a field to store the target point:</p>
<pre><code class="language-cs">private Vector3 _Destination;
</code></pre>
<p>Then in <code>Update</code> we can check for mouse clicks:</p>
<pre><code class="language-cs">private void Update()
{
    if (Input.GetMouseButton(0))
    {
        _Destination = ???
    }
}
</code></pre>
<p>Note that we used <code>GetMouseButton</code> rather than <code>GetMouseButtonDown</code> so that it will continue recalculating the target point every frame while the button is held.</p>
<p>In order to find the world position the mouse cursor is actually pointing at we need to use a <a href="../../../introduction/cs/vectors#raycasting">Raycast</a>:</p>
<pre><code class="language-cs">var ray = Camera.main.ScreenPointToRay(Input.mousePosition);

RaycastHit raycastHit;
if (Physics.Raycast(ray, out raycastHit))
{
    _Destination = raycastHit.point;
}
</code></pre>
<p>We want that ray to hit terrain but not the player (or any other characters). Normally you might have characters on their own layer and make a <code>LayerMask</code> as a <a href="../../../introduction/cs/variables#serialized-fields">Serialized Field</a> to pass into the <code>Raycast</code> so you can use the Inspector to choose which layers it can hit. But since we do not want to mess with your project's layer settings just for this example, we can just go to the scene and set the <em>Character</em> to the <code>Ignore Raycast</code> layer using the dropdown menu in the top right of the Inspector.</p>
<p><img src="ignore-raycast.png" class="img-responsive"></p>
<p>That raycast will tell us where the mouse cursor is pointing on the terrain (specifically, on any objects with <code>Collider</code> components on layers that are included in whatever <code>LayerMask</code> we use) but it cannot help us if the mouse is pointing out the edge of the scene so the ray doesn't hit any collider, which we can visualise using some <a href="../../../introduction/cs/vectors#debug-lines">Debug Lines</a>:</p>
<pre><code class="language-cs">if (Physics.Raycast(ray, out raycastHit))
{
    _Destination = raycastHit.point;
    Debug.DrawLine(ray.origin, raycastHit.point, Color.green);
}
else
{
    Debug.DrawRay(ray.origin, ray.direction * 10000, Color.red);
}
</code></pre>
<p><img src="raycast-debug.gif" class="img-responsive"></p>
<p>To fix that, we can use a bit of simple maths to just find out where the ray intersects the horizontal <code>XZ</code> plane at a specific <code>Y</code> height:</p>
<pre><code class="language-cs">public static Vector3 CalculateRayTargetXZ(Ray ray, float y = 0)
{
    return ray.origin - ray.direction * ((ray.origin.y - y) / ray.direction.y);
}
</code></pre>
<p>Then we can use that method for when the raycast misses, using the character's current <code>Y</code> position as the intersect height:</p>
<pre><code class="language-cs">else
{
    _Destination = CalculateRayTargetXZ(ray, Character.Rigidbody.position.y);
}
</code></pre>
<p></p><details><summary>The full <code>Update</code> method now looks like this:</summary><p>
</p><pre><code class="language-cs">private void Update()
{
    if (Input.GetMouseButton(0))
    {
        var ray = Camera.main.ScreenPointToRay(Input.mousePosition);

        RaycastHit raycastHit;
        if (Physics.Raycast(ray, out raycastHit))
        {
            _Destination = raycastHit.point;
            Debug.DrawLine(ray.origin, raycastHit.point, Color.green);
        }
        else
        {
            _Destination = CalculateRayTargetXZ(ray, Character.Rigidbody.position.y);
            Debug.DrawLine(ray.origin, _Destination.Value, Color.red);
        }
    }
}
</code></pre>
<p></p></details><p></p>
<h1 id="moving-towards-the-target">Moving Towards the Target</h1>
<p>Now that we know where the player wants to go, we just need to tell the character which way that is. We also want to do this in <code>Update</code>, so first we should split the method we just wrote out to keep the script organised:</p>
<pre><code class="language-cs">private void Update()
{
    UpdateInput();
    UpdateMovement();
}

private void UpdateInput()
{
    // The method we just wrote above.
}

private void UpdateMovement()
{
    // TODO.
}
</code></pre>
<p>So far we have a destination point, but the <code>MovementDirection</code> needs to actually be the direction from the character to the destination. At a basic level, that only requires a simple <a href="../../../introduction/cs/vectors#difference">Vector Subtraction</a>:</p>
<pre><code class="language-cs">MovementDirection = _Destination - Character.Rigidbody.position;
</code></pre>
<p>The last thing we need to do is tell the character to enter the locomotion state:</p>
<pre><code class="language-cs">_Locomotion.TryEnterState();
</code></pre>
<p>This would give us a functional script which we could test in the scene, but it has an obvious problem: we are always telling it to move so it will immediately move towards the default <code>(0, 0, 0)</code> on startup and even after we pick a destination it will constantly try to move towards that point without returning to <em>Idle</em> once it arrives.</p>
<h1 id="cancelling-the-target">Cancelling the Target</h1>
<p>We could use a <code>bool _HasDestination</code> field, but this is a good use case for a C# feature called <a href="https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/nullable-types/">Nullable Types</a>.</p>
<p>By putting a <code>?</code> after the field type, we can change it from <em>"always a Vector3"</em> to <em>"either a Vector3 or null"</em> (which will default to null):</p>
<pre><code class="language-cs">private Vector3? _Destination;
</code></pre>
<p>The <code>UpdateInput</code> method can stay exactly the same, we still always want a destination when we click but when we implement <code>UpdateMovement</code> we will be able to clear it by setting <code>_Destination = null;</code> once the character arrives at that point.</p>
<p>But first we need a field to specify how close we want to try to get to the target because the character will practically never end up at exactly that point. We could try to adjust the movement speed to be more precise as we did in the <a href="../../locomotion/directional-movement">Directional Movement</a> example, but in order to keep this example simple we will just stop when the character gets pretty close using a simple threshold field (with a <a href="../../../manual/other/units"><code>[Meters]</code></a> attribute):</p>
<pre><code class="language-cs">[SerializeField, Meters] private float _StopDistance = 0.2f;
</code></pre>
<p>Start the method by making sure we actually have a destination and calculating the vector from the current position to the destination just like before (except that now we need to use <code>_Destination.Value</code> to access the actual <code>Vector3</code> value of the nullable):</p>
<pre><code class="language-cs">private void UpdateMovement()
{
    if (_Destination != null)
    {
        var fromCurrentToDestination = _Destination.Value - Character.Rigidbody.position;
</code></pre>
<p>Then we compare the magnitude of that vector (its length) to the <code>_StopDistance</code>. As noted in the <a href="../../../introduction/cs/vectors#magnitude">Vector Magnitude</a> section, calculating the squared magnitude is faster than calculating the actual magnitude so we can use that because we only need to see which is greater:</p>
<pre><code class="language-cs">        if (fromCurrentToDestination.sqrMagnitude &gt; _StopDistance * _StopDistance)
        {
</code></pre>
<p>We could square the <code>_StopDistance</code> on startup to avoid that multiplication every frame, but that is a far smaller performance gain which would probably not be worth the potential confusion about what the value means at any given time (because confusion creates opportunities for bugs).</p>
<p>If the remaining distance is greater than the stop distance, we set the <code>MovementDirection</code> and try to enter the <em>Locomotion</em> state:</p>
<pre><code class="language-cs">            MovementDirection = fromCurrentToDestination;
            _Locomotion.TryEnterState();
</code></pre>
<p>We can also use another <a href="../../../introduction/cs/vectors#debug-lines">Debug Line</a> to draw a line from the character to its destination in case we ever need to see where a character is going:</p>
<pre><code class="language-cs">            Debug.DrawLine(Character.Rigidbody.position, _Destination.Value, Color.cyan);
</code></pre>
<p>Lastly we just need to <code>return</code> to end the method early if the destination is far enough away that we still want to be in the <em>Locomotion</em> state, but otherwise we want to make sure everything is cleared and try to return to <em>Idle</em>:</p>
<pre><code class="language-cs">            return;
        }
    }

    _Destination = null;
    MovementDirection = default;
    Character.Idle.TryEnterState();
</code></pre>
<h2 id="better-ray-targeting">Better Ray Targeting</h2>
<p>This is also a good time to fix a potential issue with the <code>CalculateRayTargetXZ</code> method. If the camera is above the target plane and the ray is pointing further up then it will obviously not intersect that plane by going forward, however the current implementation will calculate the intersection back in the other direction and return a point behind the camera which is very unlikely to be what the player actually intended to happen. The same thing happens if the camera is below the target plane and the ray is pointing downward:</p>
<p><img src="bad-ray-target.gif" class="img-responsive"></p>
<p>Fortunately, now that we have made the <code>_Destination</code> nullable, we can simply make the <code>CalculateRayTargetXZ</code> method return a nullable value as well so it can <code>return null</code> if the ray will not intersect the target plane by going forward:</p>
<pre><code class="language-cs">public static Vector3? CalculateRayTargetXZ(Ray ray, float y = 0)
{
    y = ray.origin.y - y;

    if (ray.direction.y == 0 || SameSign(y, ray.direction.y))
        return null;

    return ray.origin - ray.direction * (y / ray.direction.y);
}

public static bool SameSign(float x, float y)
{
    if (x &gt; 0) return y &gt; 0;
    else if (x &lt; 0) return y &lt; 0;
    else return y == 0;
}

// Now we also need to null check the destination before drawing its debug line:
private void UpdateInput()
{
...

    _Destination = CalculateRayTargetXZ(ray, characterPosition.y);
    if (_Destination != null)
        Debug.DrawLine(ray.origin, _Destination.Value, Color.red);
    
    ...
}
</code></pre>
<p><img src="good-ray-target.gif" class="img-responsive"></p>
<p></p><details><summary>The full <code><a href="/animancer/api/Animancer.Examples.StateMachines.Brains/MouseBrain">MouseBrain</a></code> script looks like this so far:</summary><p>
</p><pre><code class="language-cs">using Animancer;
using Animancer.FSM;
using Animancer.Units;
using UnityEngine;

public sealed class <a href="/animancer/api/Animancer.Examples.StateMachines.Brains/MouseBrain">MouseBrain</a> : CharacterBrain
{
    [SerializeField] private CharacterState _Locomotion;
    [SerializeField, Meters] private float _StopDistance = 0.2f;

    private Vector3? _Destination;

    private void Update()
    {
        UpdateInput();
        UpdateMovement();
    }

    private void UpdateInput()
    {
        if (Input.GetMouseButton(0))
        {
            var characterPosition = Character.Rigidbody.position;

            var ray = Camera.main.ScreenPointToRay(Input.mousePosition);

            RaycastHit raycastHit;
            if (Physics.Raycast(ray, out raycastHit))
            {
                _Destination = raycastHit.point;
                Debug.DrawLine(ray.origin, raycastHit.point, Color.green);
            }
            else
            {
                _Destination = CalculateRayTargetXZ(ray, Character.Rigidbody.position.y);
                if (_Destination != null)
                    Debug.DrawLine(ray.origin, _Destination.Value, Color.red);
            }
        }
    }

    public static Vector3? CalculateRayTargetXZ(Ray ray, float y = 0)
    {
        y = ray.origin.y - y;

        if (ray.direction.y == 0 || SameSign(y, ray.direction.y))
            return null;

        return ray.origin - ray.direction * (y / ray.direction.y);
    }

    public static bool SameSign(float x, float y)
    {
        if (x &gt; 0) return y &gt; 0;
        else if (x &lt; 0) return y &lt; 0;
        else return y == 0;
    }

    private void UpdateMovement()
    {
        if (_Destination != null)
        {
            var fromCurrentToDestination = _Destination.Value - Character.Rigidbody.position;

            if (fromCurrentToDestination.sqrMagnitude &gt; _StopDistance * _StopDistance)
            {
                MovementDirection = fromCurrentToDestination;
                _Locomotion.TryEnterState();
                Debug.DrawLine(Character.Rigidbody.position, _Destination.Value, Color.cyan);
                return;
            }
        }

        _Destination = null;
        MovementDirection = default;
        Character.Idle.TryEnterState();
    }
}
</code></pre>
<p></p></details><p></p>
<h2 id="seeing-it-in-action">Seeing it in Action</h2>
<p>We can now go back to the scene if we want to see it in action:</p>
<ol>
<li>Select the <em>Brain</em> object and disable the old <code><a href="/animancer/api/Animancer.Examples.StateMachines.Brains/KeyboardBrain">KeyboardBrain</a></code>.</li>
<li>Add the new <code><a href="/animancer/api/Animancer.Examples.StateMachines.Brains/MouseBrain">MouseBrain</a></code> and assign its <code>Locomotion</code> reference.</li>
<li>Select the root <em>Character</em> object and drag the <em>Brain</em> object into its <code>Brain</code> field to assign the new brain we just added.</li>
</ol>
<p>This gives us a character that we can steer around as long as we hold the mouse button and after we release they will continue moving to the past spot we were aiming. And we can still rotate the camera with Right Click thanks to the <code><a href="/animancer/api/Animancer.Examples/OrbitControls">OrbitControls</a></code> script.</p>
<p><img src="mouse-walk.gif" class="img-responsive"></p>
<h1 id="running">Running</h1>
<p>We could bind running to a key like the <code><a href="/animancer/api/Animancer.Examples.StateMachines.Brains/KeyboardBrain">KeyboardBrain</a></code>, but instead let's keep everything on the mouse by making the character run while we hold the button then walk once they get close to the destination or once the player releases the button.</p>
<p>First we need a field to determine how close they should get before walking:</p>
<pre><code class="language-cs">[SerializeField, Meters] private float _MinRunDistance = 1;
</code></pre>
<p>Then we just need to make some simple changes at the end of <code>UpdateInput</code>:</p>
<pre><code class="language-cs">private void UpdateInput()
{
    if (Input.GetMouseButton(0))
    {
        ...

        IsRunning = 
            _Destination != null &amp;&amp;
            Vector3.Distance(characterPosition, _Destination.Value) &gt;= _MinRunDistance;
    }
    else
    {
        IsRunning = false;
    }
}
</code></pre>
<p>Now the character runs while we hold the button:</p>
<p><img src="mouse-run.gif" class="img-responsive"></p>
<h1 id="live-brain-transplants">Live Brain Transplants</h1>
<p>Usually each character will have a single brain for their entire lifetime, however the fact that we have designed them as modular components means that you can easily swap between them if needed. This can be useful in a veriety of circumstances such as:</p>
<ul>
<li>When a player leaves a multiplayer game, their <code>ControllerInputBrain</code> could be replaced by an <code>AIBrain</code>.</li>
<li>When a cutscene starts, it might want to take control of certain enemies and/or the player.</li>
<li>When a character is hit by a <em>Fear</em> spell, it could swap their brain for a <code>FearBrain</code> which makes them run away for the duration of the spell before returning control to their regular brain.</li>
</ul>
<p>In this example we are going to swap between the two brain types we have made so far using simple <a href="../../basics/scene-setup#buttons">UI Buttons</a>.</p>
<h2 id="mouse-brain-1">Mouse Brain</h2>
<p>To get the <code><a href="/animancer/api/Animancer.Examples.StateMachines.Brains/MouseBrain">MouseBrain</a></code> ready for the swap, we need to do one last thing: make sure the destination is cleared when it gets re-enabled (you may or may not want to do this in a real game):</p>
<pre><code class="language-cs">private void OnEnable()
{
    _Destination = null;
}
</code></pre>
<p></p><details><summary>So the final <code><a href="/animancer/api/Animancer.Examples.StateMachines.Brains/MouseBrain">MouseBrain</a></code> script looks like this:</summary><p>
</p><pre><code class="language-cs">using Animancer;
using Animancer.FSM;
using Animancer.Units;
using UnityEngine;

public sealed class <a href="/animancer/api/Animancer.Examples.StateMachines.Brains/MouseBrain">MouseBrain</a> : CharacterBrain
{
    [SerializeField] private CharacterState _Locomotion;
    [SerializeField, Meters] private float _StopDistance = 0.2f;
    [SerializeField, Meters] private float _MinRunDistance = 1;

    private Vector3? _Destination;

    private void OnEnable()
    {
        _Destination = null;
    }

    private void Update()
    {
        UpdateInput();
        UpdateMovement();
    }

    private void UpdateInput()
    {
        if (Input.GetMouseButton(0))
        {
            var characterPosition = Character.Rigidbody.position;

            var ray = Camera.main.ScreenPointToRay(Input.mousePosition);

            RaycastHit raycastHit;
            if (Physics.Raycast(ray, out raycastHit))
            {
                _Destination = raycastHit.point;
                Debug.DrawLine(ray.origin, raycastHit.point, Color.green);
            }
            else
            {
                _Destination = CalculateRayTargetXZ(ray, Character.Rigidbody.position.y);
                if (_Destination != null)
                    Debug.DrawLine(ray.origin, _Destination.Value, Color.red);
            }

            IsRunning =
                _Destination != null &amp;&amp;
                Vector3.Distance(characterPosition, _Destination.Value) &gt;= _MinRunDistance;
        }
        else
        {
            IsRunning = false;
        }
    }

    public static Vector3? CalculateRayTargetXZ(Ray ray, float y = 0)
    {
        y = ray.origin.y - y;

        if (ray.direction.y == 0 || SameSign(y, ray.direction.y))
            return null;

        return ray.origin - ray.direction * (y / ray.direction.y);
    }

    public static bool SameSign(float x, float y)
    {
        if (x &gt; 0) return y &gt; 0;
        else if (x &lt; 0) return y &lt; 0;
        else return y == 0;
    }

    private void UpdateMovement()
    {
        if (_Destination != null)
        {
            var fromCurrentToDestination = _Destination.Value - Character.Rigidbody.position;

            if (fromCurrentToDestination.sqrMagnitude &gt; _StopDistance * _StopDistance)
            {
                MovementDirection = fromCurrentToDestination;
                _Locomotion.TryEnterState();
                Debug.DrawLine(Character.Rigidbody.position, _Destination.Value, Color.cyan);
                return;
            }
        }

        _Destination = null;
        MovementDirection = default;
        Character.Idle.TryEnterState();
    }
}
</code></pre>
<p></p></details><p></p>
<h2 id="character-brain-links">Character-Brain Links</h2>
<p>Currently the references between the character and brain (the <code>Character.Brain</code> and <code>CharacterBrain.Character</code> properties) are both read-only. We could just give them basic setters, but then anything changing them will need to handle disconnecting the previous references and connecting both of the new references (the new brain needs a reference to the character and the character needs a reference to that brain). It would be much better if we implemented the setters to take care of the cross-referencing for us:</p>
<p>So in <code>CharacterBrain</code> we change the <code>Character</code> property to:</p>
<pre><code class="language-cs">public Character Character
{
    get =&gt; _Character;
    set
    {
        if (_Character == value)
            return;

        var oldCharacter = _Character;
        _Character = value;

        // Make sure the old character doesn't still reference this brain.
        if (oldCharacter != null)
            oldCharacter.Brain = null;

        // Give the new character a reference to this brain.
        // We also only want brains to be enabled when they actually have a character to control.
        if (value != null)
        {
            value.Brain = this;
            enabled = true;
        }
        else
        {
            enabled = false;
        }
    }
}
</code></pre>
<p>And in <code>Character</code> we change the <code>Brain</code> property in the same way (except that there is no need to disable a <code>Character</code> if it has no <code>Brain</code>):</p>
<pre><code class="language-cs">public CharacterBrain Brain
{
    get =&gt; _Brain;
    set
    {
        if (_Brain == value)
            return;

        var oldBrain = _Brain;
        _Brain = value;

        // Make sure the old brain doesn't still reference this character.
        if (oldBrain != null)
            oldBrain.Character = null;

        // Give the new brain a reference to this character.
        if (value != null)
            value.Character = this;
    }
}
</code></pre>
<p>This allows either property to be set and it will disconnect the old character and brain from each other then connect the new pair while also disabling the old brain to prevent it from updating any more and enabling the new one so it starts updating.</p>
<p>Note that because those properties both access each other, the order in which we do things is very important to prevent an infinite loop. For example:</p>
<ol>
<li>We set <code>Character.Brain</code>.</li>
<li>If it already has that brain, return immediately.</li>
<li>Store that brain in the <code>_Brain</code> field.</li>
<li>If the <code>Character</code> already had a <code>Brain</code>, tell it to stop controlling that <code>Character</code>.</li>
<li>Set the <code>Brain.Character</code>.</li>
<li>If it is already controlling that character, return immediately.</li>
<li>Store that brain in the <code>_Character</code> field.</li>
<li>If the <code>Brain</code> already had a <code>Character</code>, tell it the <code>Brain</code> is no longer controlling it.</li>
<li>Set the <code>Character.Brain</code>. This would be an infinite loop since it is the same as step 1, but because step 3 already stored the given brain, step 2 will return immediately this time.</li>
</ol>
<h2 id="setting-up-the-buttons">Setting Up the Buttons</h2>
<p>You would not generally have multiple brains attached to the same object, but for the sake of this example the simplest way to set it up is to simply put both on the <em>Brain</em> object:</p>
<p><img src="dual-brain-inspector.png" class="img-responsive"></p>
<p>One should be enabled while the other is disabled. It doesn't really matter which is which, as long as the enabled one is also assigned to the <em>Character</em>'s <code>Brain</code> field.</p>
<p>Then we can set up the button clicks to simply assign the <code>Character.Brain</code> (as well as some UI Text to show which brain is active):</p>
<table class="table">
  <thead><tr>
    <th style="width:50%">Keyboard Button</th>
    <th style="width:50%">Mouse Button</th>
  </tr></thead>
  
  <tbody>
  <tr>
    <td><img src="keyboard-button.png" class="img-responsive"></td>
    <td><img src="mouse-button.png" class="img-responsive"></td>
  </tr>
  </tbody>
</table>
<p>Now we can swap brains whenever we want:</p>
<p><img src="brain-transplant.gif" class="img-responsive"></p>

	</section>
                
            </div>           
            
            <!-- Footer -->
            <footer class="main-footer">
            </footer>
            
        </div>
        <div class="wrapper bottom-wrapper">
            <footer class="bottom-footer">
                <strong><div style="text-align:left; display:flex">

<div>
<p>Documentation</p>
<p><a href="/animancer/docs/examples">Examples</a></p>
<p><a href="/animancer/docs/manual">User Manual</a></p>
<p><a href="/animancer/docs/changes">Change Log</a></p>
</div>

<div style="width:10%"></div>

<div>
<p>Download</p>
<p><a href="https://kybernetik.itch.io/animancer-pro">Itch.io (Recommended)</a></p>
<p><a href="https://assetstore.unity.com/packages/tools/animation/animancer-pro-116514?aid=1100l8ah5">Asset Store (Animancer Pro)</a></p>
<p><a href="https://assetstore.unity.com/packages/tools/animation/animancer-lite-116516?aid=1100l8ah5">Asset Store (Animancer Lite)</a></p>
</div>

<div style="width:10%"></div>

<div>
<p>Contact</p>
<p><a href="https://github.com/KybernetikGames/animancer/issues">Github Issues</a></p>
<p><a href="/animancer/forum">Unity Forum</a></p>
<p><a href="mailto:animancer@kybernetik.com.au?subject=Animancer">Email</a></p>
</div>

<div style="width:10%"></div>

<div>
<p>Other Assets</p>
<p><a href="/inspector-gadgets">Inspector Gadgets</a></p>
<p><a href="/weaver">Weaver</a></p>
<p><a href="/ultevents">UltEvents</a></p>
</div>

</div></strong>
            </footer>
        </div>
        <a href="javascript:" id="return-to-top"><i class="fa fa-chevron-up"></i></a>
        
        <script>           
            // Close the sidebar if we select an anchor link
            $(".main-sidebar a[href^='#']:not('.expand')").click(function(){
                $(document.body).removeClass('sidebar-open');
            });
            
            $(document).ready(function() {
                mermaid.initialize(
                {
                    flowchart:
                    {
                        useMaxWidth: false
                    },
					startOnLoad: false,
					cloneCssStyles: false
                });     
                mermaid.init(undefined, ".mermaid");

                // Remove the max-width setting that Mermaid sets
                var mermaidSvg = $('.mermaid svg');
                mermaidSvg.addClass('img-responsive');
                mermaidSvg.css('max-width', '');

                // Make it scrollable
				var target = document.querySelector(".mermaid svg");
				if(target !== null)
				{
					var panZoom = window.panZoom = svgPanZoom(target, {
						zoomEnabled: true,
						controlIconsEnabled: true,
						fit: true,
						center: true,
                        maxZoom: 20,
                        zoomScaleSensitivity: 0.6
					});			                          

                    // Do the reset once right away to fit the diagram
                    panZoom.resize();
                    panZoom.fit();
                    panZoom.center();
                    
                    $(window).resize(function(){
                        panZoom.resize();
                        panZoom.fit();
                        panZoom.center();
                    });
				}
                
                $('pre code').each(function(i, block) {
                    hljs.highlightBlock(block);
                });  
            });

            hljs.initHighlightingOnLoad();

            // Back to top
            $(window).scroll(function() {
                if ($(this).scrollTop() >= 200) {        // If page is scrolled more than 50px
                    $('#return-to-top').fadeIn(1000);    // Fade in the arrow
                } else {
                    $('#return-to-top').fadeOut(1000);   // Else fade out the arrow
                }
            });
            $('#return-to-top').click(function() {      // When arrow is clicked
                $('body,html').animate({
                    scrollTop : 0                       // Scroll to top of body
                }, 500);
            });
        </script>
    
</body></html>