<!DOCTYPE html><html><head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=Edge">
        <meta name="description">
        <meta name="keywords" content="static content generator,static site generator,static site,HTML,web development,.NET,C#,Razor,Markdown,YAML">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="shortcut icon" href="/animancer/assets/img/favicon.ico" type="image/x-icon">
        <link rel="icon" href="/animancer/assets/img/favicon.ico" type="image/x-icon">
        <title>Animancer - 05-01 Footstep Events</title>
        <link href="/animancer/assets/css/highlight.css" rel="stylesheet">
        <link href="/animancer/assets/css/bootstrap/bootstrap.css" rel="stylesheet">
        <link href="/animancer/assets/css/adminlte/AdminLTE.css" rel="stylesheet">
        <link href="/animancer/assets/css/theme/theme.css" rel="stylesheet">
        <link href="//fonts.googleapis.com/css?family=Roboto+Mono:400,700|Roboto:400,400i,700,700i" rel="stylesheet">
        <link href="/animancer/assets/css/font-awesome.min.css" rel="stylesheet" type="text/css">
        <link href="/animancer/assets/css/override.css" rel="stylesheet">
        <script src="/animancer/assets/js/jquery-2.2.3.min.js"></script>
        <script src="/animancer/assets/js/bootstrap.min.js"></script>        
        <script src="/animancer/assets/js/app.min.js"></script>         
        <script src="/animancer/assets/js/highlight.pack.js"></script>   
        <script src="/animancer/assets/js/jquery.slimscroll.min.js"></script>
        <script src="/animancer/assets/js/jquery.sticky-kit.min.js"></script>
        <script src="/animancer/assets/js/mermaid.min.js"></script>
        <script src="/animancer/assets/js/svg-pan-zoom.min.js"></script>
        <!--[if lt IE 9]>
        <script src="/animancer/assets/js/html5shiv.min.js"></script>
        <script src="/animancer/assets/js/respond.min.js"></script>
        <![endif]-->  

        
    </head>
    <body class="hold-transition wyam layout-boxed  ">    
        <div class="top-banner"></div>
        <div class="wrapper with-container">
            <!-- Header -->
            <header class="main-header">   
                     
                <a href="/animancer/" class="logo">
                            <span>Animancer</span>
                </a>   
                         
                <nav class="navbar navbar-static-top" role="navigation">
                    <!-- Sidebar toggle button-->
                        <a href="#" class="sidebar-toggle visible-xs-block" data-toggle="offcanvas" role="button">
                            <span class="sr-only">Toggle side menu</span>
                            <i class="fa fa-chevron-circle-right"></i>
                        </a>
                                        
                    <div class="navbar-header">
                        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse">
                            <span class="sr-only">Toggle side menu</span>
                            <i class="fa fa-chevron-circle-down"></i>
                        </button>
                    </div>
            
                    <!-- Collect the nav links, forms, and other content for toggling -->
                    <div class="collapse navbar-collapse pull-left" id="navbar-collapse">
                        <ul class="nav navbar-nav">                            
                                    <li><a href="/animancer/docs/introduction/features"><img src="/animancer/images/icons/features.png" height="20px" width="20px" style="left:-7px"> Features</a></li>
        <li><a href="/animancer/docs/download"><img src="/animancer/images/icons/download.png" height="20px" width="20px" style="left:-7px"> Download</a></li>
        <li class="active"><a href="/animancer/docs"><img src="/animancer/images/icons/docs.png" height="20px" width="7.5px" style="left:-5px"> Documentation</a></li>
        <li><a href="/animancer/docs/help"><img src="/animancer/images/icons/help.png" height="20px" width="10.625px" style="left:-4px"> Help</a></li>
        <li><a href="/animancer/api/Animancer/AnimancerComponent"><img src="/animancer/images/icons/api.png" height="20px" width="18.125px" style="left:-3px"> API v7.4</a></li>
        <li><a href="https://kybernetik.com.au"><img src="/animancer/images/icons/kybernetik.png" height="20px" width="20px" style="left:-2px"> Other Assets</a></li>

<li style="width:100%">
<form class="search-form" name="search" action="/animancer/search">
<span><input class="search-input" id="search" name="q" type="text" placeholder="Search..."></span>
<div class="search-button"><button type="submit"><i class="fa fa-search"></i></button></div>
</form>
</li> 
                        </ul>       
                    </div>
                    <!-- /.navbar-collapse -->
                
                    <!-- Navbar Right Menu -->
                </nav><div style="text-align:center"><a href="/animancer/docs/changes/animancer-v8-0" style="font-size:1.42em; color:white">Animancer v8.0 is coming</a></div>
            </header>
            
            <!-- Left side column. contains the logo and sidebar -->
            <aside class="main-sidebar ">
                <section class="infobar" data-spy="affix" data-offset-top="60" data-offset-bottom="200"> 
                    	
    <div id="infobar-headings"><h6>On This Page</h6><p><a href="#summary">Summary</a></p>
<p><a href="#overview">Overview</a></p>
<p><a href="#playing-the-animation">Playing the Animation</a></p>
<p><a href="#audio-sources">Audio Sources</a></p>
<p><a href="#playing-the-sounds">Playing the Sounds</a></p>
<p><a href="#animation-events">Animation Events</a></p>
<p><a href="#animancer-events">Animancer Events</a></p>
<p><a href="#conclusion">Conclusion</a></p>
<p><a href="#what-next">What Next?</a></p>
<hr class="infobar-hidden">
</div>

                </section>
                <section class="sidebar">    
                                     
                    

                    <ul class="sidebar-menu">
                        

                <li><a href="/animancer/docs/download">Download</a></li>
                <li class="treeview">
                    <a href="/animancer/docs/introduction">Introduction</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/introduction/features">Features</a></li>
                <li class="treeview">
                    <a href="/animancer/docs/introduction/mecanim-vs-animancer">Mecanim vs. Animancer</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li class="treeview">
                    <a href="/animancer/docs/introduction/mecanim-vs-animancer/why">Why Replace Mecanim?</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/introduction/mecanim-vs-animancer/why/simplicity">Simplicity</a></li>
                <li><a href="/animancer/docs/introduction/mecanim-vs-animancer/why/transparency">Transparency</a></li>
                <li><a href="/animancer/docs/introduction/mecanim-vs-animancer/why/adaptability">Adaptability</a></li>
                <li><a href="/animancer/docs/introduction/mecanim-vs-animancer/why/clarity">Clarity</a></li>
                <li><a href="/animancer/docs/introduction/mecanim-vs-animancer/why/safety">Safety</a></li>
                <li><a href="/animancer/docs/introduction/mecanim-vs-animancer/why/reliability">Reliability</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/introduction/mecanim-vs-animancer/comparison">Comparison</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/introduction/mecanim-vs-animancer/comparison/playing">Playing</a></li>
                <li><a href="/animancer/docs/introduction/mecanim-vs-animancer/comparison/waiting">Waiting</a></li>
                <li><a href="/animancer/docs/introduction/mecanim-vs-animancer/comparison/speed-and-time">Speed and Time</a></li>
                <li><a href="/animancer/docs/introduction/mecanim-vs-animancer/comparison/weapon-animations">Weapon Animations</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/docs/introduction/mecanim-vs-animancer/performance">Performance</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/docs/introduction/glossary">Glossary</a></li>
                <li><a href="/animancer/docs/introduction/cs">C# in Unity</a></li>

                    </ul>
                </li>
                <li class="treeview active">
                    <a href="/animancer/docs/examples">Examples</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li class="treeview">
                    <a href="/animancer/docs/examples/basics">01 Basics</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/basics/quick-play">01-01 Quick Play</a></li>
                <li><a href="/animancer/docs/examples/basics/movement">01-02 Basic Movement</a></li>
                <li class="treeview">
                    <a href="/animancer/docs/examples/basics/action">01-03 Basic Action</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/basics/action/holding">Holding a Pistol</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/docs/examples/basics/transitions">01-04 Transitions</a></li>
                <li><a href="/animancer/docs/examples/basics/character">01-05 Basic Character</a></li>
                <li><a href="/animancer/docs/examples/basics/scene-setup">Basic Scene Setup</a></li>
                <li><a href="/animancer/docs/examples/basics/input">Input</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/examples/fine-control">02 Fine Control</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/fine-control/named-animations">02-01 Named Animations</a></li>
                <li><a href="/animancer/docs/examples/fine-control/speed-and-time">02-02 Speed and Time</a></li>
                <li><a href="/animancer/docs/examples/fine-control/doors">02-03 Doors</a></li>
                <li><a href="/animancer/docs/examples/fine-control/update-rate">02-04 Update Rate</a></li>
                <li><a href="/animancer/docs/examples/fine-control/solo-animation">02-05 Solo Animation</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/examples/locomotion">03 Locomotion</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/locomotion/root-motion">03-01 Root Motion</a></li>
                <li><a href="/animancer/docs/examples/locomotion/linear-blending">03-02 Linear Blending</a></li>
                <li><a href="/animancer/docs/examples/locomotion/directional-blending">03-03 Directional Blending</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/examples/directional-sprites">04 Directional Sprites</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/directional-sprites/basics">04-01 Directional Basics</a></li>
                <li><a href="/animancer/docs/examples/directional-sprites/character">04-02 Directional Character</a></li>

                    </ul>
                </li>
                <li class="treeview active">
                    <a href="/animancer/docs/examples/events">05 Events</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li class="selected"><a href="/animancer/docs/examples/events/footsteps">05-01 Footstep Events</a></li>
                <li><a href="/animancer/docs/examples/events/golf">05-02 Golf Events</a></li>
                <li><a href="/animancer/docs/examples/events/utilities">05-03 Event Utilities</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/examples/fsm">06 State Machines</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/fsm/characters">06-01 Characters</a></li>
                <li><a href="/animancer/docs/examples/fsm/interruptions">06-02 Interruptions</a></li>
                <li><a href="/animancer/docs/examples/fsm/brains">06-03 Brains</a></li>
                <li><a href="/animancer/docs/examples/fsm/weapons">06-04 Weapons</a></li>
                <li><a href="/animancer/docs/examples/fsm/platformer">Platformer Game Kit</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/examples/layers">07 Layers</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/layers/basic">07-01 Basic Layers</a></li>
                <li><a href="/animancer/docs/examples/layers/dynamic">07-02 Dynamic Layers</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/examples/ik">08 Inverse Kinematics</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/ik/puppet">08-01 Puppet</a></li>
                <li><a href="/animancer/docs/examples/ik/uneven-ground">08-02 Uneven Ground</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/examples/animator-controllers">09 Animator Controllers</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/animator-controllers/basics">09-01 Hybrid Basics</a></li>
                <li><a href="/animancer/docs/examples/animator-controllers/character">09-02 Hybrid Character</a></li>
                <li class="treeview">
                    <a href="/animancer/docs/examples/animator-controllers/3d-game-kit">09-03 3D Game Kit</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/animator-controllers/3d-game-kit/problems">Problems with the Mecanim Character</a></li>
                <li><a href="/animancer/docs/examples/animator-controllers/3d-game-kit/respawn">Respawn</a></li>
                <li><a href="/animancer/docs/examples/animator-controllers/3d-game-kit/idle">Idle</a></li>
                <li class="treeview">
                    <a href="/animancer/docs/examples/animator-controllers/3d-game-kit/locomotion">Locomotion</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/animator-controllers/3d-game-kit/locomotion/movement">Movement</a></li>
                <li><a href="/animancer/docs/examples/animator-controllers/3d-game-kit/locomotion/turning">Turning</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/docs/examples/animator-controllers/3d-game-kit/airborne">Airborne</a></li>
                <li><a href="/animancer/docs/examples/animator-controllers/3d-game-kit/landing">Landing</a></li>
                <li><a href="/animancer/docs/examples/animator-controllers/3d-game-kit/attack">Attack</a></li>
                <li><a href="/animancer/docs/examples/animator-controllers/3d-game-kit/flinch">Flinch</a></li>
                <li><a href="/animancer/docs/examples/animator-controllers/3d-game-kit/die">Die</a></li>

                    </ul>
                </li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/examples/jobs">10 Animation Jobs</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/jobs/two-bone-ik">10-01 Two Bone IK</a></li>
                <li><a href="/animancer/docs/examples/jobs/damping">10-02 Damping</a></li>
                <li><a href="/animancer/docs/examples/jobs/lean">10-03 Lean</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/examples/integration">Integration</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/integration/animation-rigging">Animation Rigging</a></li>
                <li><a href="/animancer/docs/examples/integration/dynamic-bone">Dynamic Bone</a></li>
                <li><a href="/animancer/docs/examples/integration/final-ik">Final IK</a></li>
                <li><a href="/animancer/docs/examples/integration/hairibar-ragdoll">Hairibar Ragdoll</a></li>
                <li><a href="/animancer/docs/examples/integration/lod">Level of Detail (LOD)</a></li>
                <li><a href="/animancer/docs/examples/integration/odin-inspector">Odin Inspector</a></li>
                <li><a href="/animancer/docs/examples/integration/puppet-master">Puppet Master</a></li><li><a href="/animancer/docs/examples/integration/spine">Spine</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/docs/examples/no-video-tutorials">No Video Tutorials</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/manual">User Manual</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li class="treeview">
                    <a href="/animancer/docs/manual/getting">Getting Animations</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/manual/getting/mixamo">Mixamo</a></li>
                <li><a href="/animancer/docs/manual/getting/importing">Importing</a></li>
                <li><a href="/animancer/docs/manual/getting/animation-window">Animation Window</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/manual/playing">Playing Animations</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/manual/playing/states">States</a></li>
                <li><a href="/animancer/docs/manual/playing/keys">Keys</a></li>
                <li><a href="/animancer/docs/manual/playing/inspector">Inspector</a></li>
                <li><a href="/animancer/docs/manual/playing/component-types">Component Types</a></li>
                <li><a href="/animancer/docs/manual/playing/edit-mode">Playing in Edit Mode</a></li>
                <li><a href="/animancer/docs/manual/playing/directional-sets">Directional Animation Sets</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/manual/transitions">Transitions</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/manual/transitions/types">Transition Types</a></li>
                <li><a href="/animancer/docs/manual/transitions/assets">Transition Assets</a></li>
                <li><a href="/animancer/docs/manual/transitions/previews">Transition Previews</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/manual/blending">Blending</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li class="treeview">
                    <a href="/animancer/docs/manual/blending/fading">Fading</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/manual/blending/fading/modes">Fade Modes</a></li>
                <li><a href="/animancer/docs/manual/blending/fading/custom">Custom Fading</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/docs/manual/blending/layers">Layers</a></li>
                <li class="treeview">
                    <a href="/animancer/docs/manual/blending/mixers">Mixers</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/manual/blending/mixers/creation">Mixer Creation</a></li>
                <li><a href="/animancer/docs/manual/blending/mixers/smoothing">Mixer Smoothing</a></li>
                <li><a href="/animancer/docs/manual/blending/mixers/synchronization">Mixer Synchronization</a></li>

                    </ul>
                </li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/manual/events">Events</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/manual/events/animation">Animation Events</a></li>
                <li class="treeview">
                    <a href="/animancer/docs/manual/events/animancer">Animancer Events</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/manual/events/animancer/usage">Usage</a></li>
                <li><a href="/animancer/docs/manual/events/animancer/behaviour">Behaviour</a></li>
                <li><a href="/animancer/docs/manual/events/animancer/shared">Shared Events</a></li>
                <li><a href="/animancer/docs/manual/events/animancer/garbage">Garbage Collection</a></li>
                <li><a href="/animancer/docs/manual/events/animancer/ultevents">UltEvents</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/docs/manual/events/end">End Events</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/manual/fsm">Finite State Machines</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/manual/fsm/overview">Overview</a></li>
                <li><a href="/animancer/docs/manual/fsm/state-types">1. State Types</a></li>
                <li><a href="/animancer/docs/manual/fsm/initialization">2. Initialization</a></li>
                <li><a href="/animancer/docs/manual/fsm/changing-states">3. Changing States</a></li>
                <li><a href="/animancer/docs/manual/fsm/keys">Keys</a></li>
                <li class="treeview">
                    <a href="/animancer/docs/manual/fsm/utilities">Utilities</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/manual/fsm/utilities/input-buffer">Input Buffers</a></li>
                <li><a href="/animancer/docs/manual/fsm/utilities/state-selector">State Selectors</a></li>
                <li><a href="/animancer/docs/manual/fsm/utilities/owned-states">Owned States</a></li>

                    </ul>
                </li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/manual/animator-controllers">Animator Controllers</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/manual/animator-controllers/conversion">Conversion</a></li>
                <li><a href="/animancer/docs/manual/animator-controllers/controller-states">Controller States</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/docs/manual/timeline">Timeline</a></li>
                <li><a href="/animancer/docs/manual/ik">Inverse Kinematics</a></li>
                <li class="treeview">
                    <a href="/animancer/docs/manual/tools">Animancer Tools</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/manual/tools/pack-textures">Pack Textures</a></li>
                <li><a href="/animancer/docs/manual/tools/modify-sprites">Modify Sprites</a></li>
                <li><a href="/animancer/docs/manual/tools/rename-sprites">Rename Sprites</a></li>
                <li><a href="/animancer/docs/manual/tools/generate-sprite-animations">Generate Sprite Animations</a></li>
                <li><a href="/animancer/docs/manual/tools/remap-sprite-animation">Remap Sprite Animation</a></li>
                <li><a href="/animancer/docs/manual/tools/remap-animation-bindings">Remap Animation Bindings</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/manual/other">Other Features</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/manual/other/animation-clip-inspector">Animation Clip Inspector</a></li>
                <li><a href="/animancer/docs/manual/other/polymorphic">Polymorphic Drawer</a></li>
                <li><a href="/animancer/docs/manual/other/redirect-root-motion">Redirect Root Motion</a></li>
                <li><a href="/animancer/docs/manual/other/sprite-renderer-texture-swap">Sprite Renderer Texture Swap</a></li>
                <li><a href="/animancer/docs/manual/other/units">Units Attributes</a></li>

                    </ul>
                </li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/bugs">Unity Bugs</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/bugs/events">Animation Events</a></li>
                <li><a href="/animancer/docs/bugs/animator-controller-speed">Animator Controller Speed</a></li>
                <li><a href="/animancer/docs/bugs/paused-skinned-mesh-update">Paused Skinned Mesh Update</a></li>
                <li><a href="/animancer/docs/bugs/reorderable-array-height">Reorderable Array Height</a></li>
                <li><a href="/animancer/docs/bugs/serialized-array-initialization">Serialized Array Initialization</a></li>
                <li><a href="/animancer/docs/bugs/stabilize-feet">Stabilize Feet</a></li>
                <li><a href="/animancer/docs/bugs/timeline">Timeline</a></li>
                <li><a href="/animancer/docs/bugs/timing">Timing</a></li>
                <li><a href="/animancer/docs/bugs/update-modes">Update Modes</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/source">Source Code</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/source/dlls">DLLs</a></li>
                <li><a href="/animancer/docs/source/creating-custom-states">Creating Custom States</a></li>
                <li><a href="/animancer/docs/source/graph-structure">Graph Structure</a></li>
                <li><a href="/animancer/docs/source/asset-sources">Asset Sources</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/changes">Change Log</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/changes/animancer-v7-4">Animancer v7.4</a></li>
                <li><a href="/animancer/docs/changes/animancer-v7-3">Animancer v7.3</a></li>
                <li><a href="/animancer/docs/changes/animancer-v7-2">Animancer v7.2</a></li>
                <li><a href="/animancer/docs/changes/animancer-v7-1">Animancer v7.1</a></li>
                <li><a href="/animancer/docs/changes/animancer-v7-0">Animancer v7.0</a></li>
                <li><a href="/animancer/docs/changes/animancer-v6-1">Animancer v6.1</a></li>
                <li class="treeview">
                    <a href="/animancer/docs/changes/animancer-v6-0">Animancer v6.0</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/changes/animancer-v6-0/test">Test Releases</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/docs/changes/animancer-v5-3">Animancer v5.3</a></li>
                <li><a href="/animancer/docs/changes/animancer-v5-2">Animancer v5.2</a></li>
                <li><a href="/animancer/docs/changes/animancer-v5-1">Animancer v5.1</a></li>
                <li class="treeview">
                    <a href="/animancer/docs/changes/animancer-v5-0">Animancer v5.0</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/changes/animancer-v5-0/test">Test Releases</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/docs/changes/animancer-v4-4">Animancer v4.4</a></li>
                <li><a href="/animancer/docs/changes/animancer-v4-3">Animancer v4.3</a></li>
                <li><a href="/animancer/docs/changes/animancer-v4-2">Animancer v4.2</a></li>
                <li><a href="/animancer/docs/changes/animancer-v4-1">Animancer v4.1</a></li>
                <li class="treeview">
                    <a href="/animancer/docs/changes/animancer-v4-0">Animancer v4.0</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/changes/animancer-v4-0/test">Test Releases</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/docs/changes/animancer-v3-1">Animancer v3.1</a></li>
                <li><a href="/animancer/docs/changes/animancer-v3-0">Animancer v3.0</a></li>
                <li><a href="/animancer/docs/changes/animancer-v2-0">Animancer v2.0</a></li>
                <li><a href="/animancer/docs/changes/animancer-v1-3">Animancer v1.3</a></li>
                <li><a href="/animancer/docs/changes/animancer-v1-2">Animancer v1.2</a></li>
                <li><a href="/animancer/docs/changes/animancer-v1-1">Animancer v1.1</a></li>
                <li><a href="/animancer/docs/changes/animancer-v1-0">Animancer v1.0</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/help">Help and FAQ</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/help/debugging">Debugging</a></li>

                    </ul>
                </li>

                    </ul>
                            
                </section>                
            </aside>
            
            <!-- Content Wrapper. Contains page content -->
            <div class="content-wrapper">
                



		<section class="content-header">
			<h1>05-01 Footstep Events</h1>
		</section>
	<section class="content">
		<blockquote class="blockquote">
<p><i class="emw fa fa-folder"></i> <strong>Location</strong>: <em><span class="mini">Assets/Plugins/Animancer/</span>Examples/05 Events/01 Footstep Events</em></p>
<p><i class="emw fa fa-code-fork"></i> <strong>Recommended After</strong>: <a href="../../basics/quick-play">Quick Play</a> (it's also worth reading the <a href="../../../manual/events">Events</a> page)</p>
<p><i class="emw fa fa-puzzle-piece"></i> <strong>Learning Outcomes</strong>: <span class="mini">in this example you will learn:</span></p>
<p><i class="emw fa fa-lightbulb-o"></i> How to run some code at a specific time during an animation.</p>
<p><i class="emw fa fa-lightbulb-o"></i> How to use <a href="../../../manual/events/animancer">Animancer Events</a>.</p>
<p><i class="emw fa fa-lightbulb-o"></i> How to use <a href="../../../manual/events/animation">Animation Events</a>.</p>
</blockquote>
<img src="footstep-events.png" class="pngif img-responsive img-right">
<p>This example demonstrates how you can play a randomly chosen footstep sound whenever a character's foot touches the ground during a walk cycle.</p>
<p><em><a href="../../../manual/events/animancer">Animancer Events</a> are a <a href="../../../introduction/features"><strong>Pro-Only Feature</strong></a>. You can try them out in the Unity Editor with <a href="/animancer/redirect/lite">Animancer Lite</a>, but they're not available in runtime builds unless you purchase <a href="/animancer/redirect/pro">Animancer Pro</a>.</em></p>
<p>The actual example scene plays a sound every time a foot touches the ground. But since the video shown here doesn't have sound, it instead shows a sphere around the foot associated with each event for a short time after that event occurs.</p>
<h1 id="summary">Summary</h1>
<ul>
<li>The <a href="../../../manual/events">Events</a> page explains the differences between Unity's inbuilt <a href="../../../manual/events/animation">Animation Events</a> and <a href="../../../manual/events/animancer">Animancer Events</a> while this example demonstrates those differences in practice.</li>
<li><a href="../../../manual/events/animation">Animation Events</a> are defined in an <code>AnimationClip</code> and will call a method with a specific name in a component attached to the same object as the <code>Animator</code> component.</li>
<li><a href="../../../manual/events/animancer">Animancer Events</a> can be defined in <a href="../../../manual/transitions">Transitions</a> or in code and can be given a callback method with fewer restrictions.</li>
</ul>
<h1 id="overview">Overview</h1>
<p>There are two scripts in this example:</p>
<p></p><details><summary>The base <code><a href="/animancer/api/Animancer.Examples.Events/FootstepEvents">FootstepEvents</a></code> script contains most of this example's logic:</summary><p>
</p><pre><code class="language-cs">using Animancer;
using UnityEngine;

public sealed class <a href="/animancer/api/Animancer.Examples.Events/FootstepEvents">FootstepEvents</a> : MonoBehaviour
{
    [SerializeField] private <a href="/animancer/api/Animancer/AnimancerComponent">AnimancerComponent</a> _Animancer;
    [SerializeField] private <a href="/animancer/api/Animancer/ClipTransition">ClipTransition</a> _Walk;
    [SerializeField] private AudioClip[] _Sounds;

    private void OnEnable()
    {
        _Animancer.Play(_Walk);
    }

    public void PlaySound(AudioSource source)
    {
        source.clip = _Sounds[Random.Range(0, _Sounds.Length)];
        source.Play();
    }
}
</code></pre>
<p></p></details><p></p>
<p></p><details><summary>The <a href="../../../manual/events/animation">Animation Events</a> character also has the <code><a href="/animancer/api/Animancer.Examples.Events/FootstepEventsAnimation">FootstepEventsAnimation</a></code> script to receive its events:</summary><p>
</p><pre><code class="language-cs">using UnityEngine;

public sealed class <a href="/animancer/api/Animancer.Examples.Events/FootstepEventsAnimation">FootstepEventsAnimation</a> : MonoBehaviour
{
    [SerializeField] private <a href="/animancer/api/Animancer.Examples.Events/FootstepEvents">FootstepEvents</a> _FootstepEvents;
    [SerializeField] private AudioSource[] _FootSources;

    private void Footstep(int foot)
    {
        _FootstepEvents.PlaySound(_FootSources[foot]);
    }
}
</code></pre>
<p></p></details><p></p>
<p>The code structure used for each system is fairly similar, but their events work very differently:</p>
<table class="table" id="architecture">
  <thead>
    <tr><th style="width:50%">Animation Events</th>
    <th style="width:50%">Animancer Events</th>
  </tr></thead>
  <tbody>
    <tr>
      <td><img src="architecture-animation.png" class="img-responsive"></td>
      <td><img src="architecture-animancer.png" class="img-responsive"></td>
    </tr>
    <tr>
<td>
<ul>
<li><code><a href="/animancer/api/Animancer.Examples.Events/FootstepEvents">FootstepEvents</a></code> plays the animation.</li>
<li><code><a href="/animancer/api/Animancer.Examples.Events/FootstepEventsAnimation">FootstepEventsAnimation</a></code> tells it when to play a sound and which <code>AudioSource</code> to use each time.</li>
<li>That could have all been done in one script, but splitting them allows the other character to use the same <code><a href="/animancer/api/Animancer.Examples.Events/FootstepEvents">FootstepEvents</a></code> script without anything unnecessary in it.</li>
<li>The <em>Humanoid-Walk-Footsteps</em> animation it uses is a copy of the regular <em>Humanoid-Walk</em> with the necessary events added to it.</li>
</ul>
</td>
<td>
<ul>
<li><code><a href="/animancer/api/Animancer.Examples.Events/FootstepEvents">FootstepEvents</a></code> plays the animation.</li>
<li>The events are defined inside the <code>_Walk</code> <a href="../../../manual/transitions">Transition</a> in the <code><a href="/animancer/api/Animancer.Examples.Events/FootstepEvents">FootstepEvents</a></code> script.
<ul>
<li>They reference the <code><a href="/animancer/api/Animancer.Examples.Events/FootstepEvents">FootstepEvents</a></code> component so they can call its <code>PlaySound</code> method.</li>
<li>They also reference the <code>AudioSource</code>s to play the sounds on.</li>
</ul>
</li>
<li>It uses the regular <em>Humanoid-Walk</em> animation.</li>
</ul>
</td>
    </tr>
    <tr>
      <td><img src="animation-event-right.png" class="img-responsive"></td>
      <td><img src="animancer-event-right.png" class="img-responsive"></td>
    </tr>
    <tr>
      <td>Each <a href="../../../manual/events/animation">Animation Event</a> contains the name of the <code>Function</code> it wants to call and various parameters it can pass into it. When the event is triggered, Unity will find and call a method with that name in any component attached to the same object as the <code>Animator</code> playing the animation.</td>
      <td>Each <a href="../../../manual/events/animancer">Animancer Event</a> contains a <code>Callback</code> which is a <code>UnityEvent</code> that defines what the event will do. Internally, they are actually quite similar to <a href="../../../manual/events/animation">Animation Events</a> (they store the name of the target method as a <code>string</code> and contain one of each supported parameter type), but the user interface is cleaner because they directly reference the target object so it can list all the available methods and their parameters.</td>
    </tr>
    <tr>
      <td><a href="../../../manual/events/animation">Animation Events</a> must always be received by a function. Unity will log a warning if there is no function with the specified name.</td>
      <td>It's often more effective to leave the <code>Callback</code> blank and set it in code instead. That way the event's time can easily be <a href="../../../manual/transitions/previews">previewed and tweaked</a> by non-programmers while the actual logic is defined in code (where logic should be). The <a href="../golf">Golf Events</a> example demonstrates how to do so.</td>
    </tr>
  </tbody>
</table>
<h1 id="playing-the-animation">Playing the Animation</h1>
<table class="table">
  <thead>
    <tr><th style="width:50%">Code</th>
    <th style="width:50%">Inspector</th>
  </tr></thead>
  <tbody>
    <tr>
      <td>
<p>Playing the animation is basically the same as the <a href="../../basics/quick-play">Quick Play</a> example except that it uses a <a href="../../../manual/transitions">Transition</a> instead of a direct <code>AnimationClip</code> reference:</p>
<pre><code class="language-cs">public sealed class <a href="/animancer/api/Animancer.Examples.Events/FootstepEvents">FootstepEvents</a> : MonoBehaviour
{
    [SerializeField]
    private <a href="/animancer/api/Animancer/AnimancerComponent">AnimancerComponent</a> _Animancer;
    
    [SerializeField]
    private <a href="/animancer/api/Animancer/ClipTransition">ClipTransition</a> _Walk;
    
    private void OnEnable()
    {
        _Animancer.Play(_Walk);
    }
</code></pre>
</td>
      <td><img src="footstep-events-inspector.png" class="img-responsive"></td>
    </tr>
  </tbody>
</table>
<h1 id="audio-sources">Audio Sources</h1>
<p>Sounds in Unity (<code>AudioClip</code>s) are played by <code>AudioSource</code>s so we need to attach one to each foot. All the default values are fine and we will be setting the <code>AudioClip</code> each time we play a sound.</p>
<p><img src="audio-source.png" class="img-responsive"></p>
<p>In most games the camera won't get close enough to a regular character's feet to give any noticeable difference in the position of each sound so it's quite common to simply give each character one <code>AudioSource</code>. But for this example, having one per foot is a good excuse to explain how to use event parameters.</p>
<h1 id="playing-the-sounds">Playing the Sounds</h1>
<p>The <code>PlaySound</code> method will be called by events and simply plays a random <code>AudioClip</code> from the array:</p>
<pre><code class="language-cs">    [SerializeField]
    private AudioClip[] _Sounds;
    
    public void PlaySound(AudioSource source)
    {
        source.clip = _Sounds[Random.Range(0, _Sounds.Length)];
        source.Play();
    }
}
</code></pre>
<ul>
<li>It takes an <code>AudioSource</code> as a parameter so that each foot can play its sound from a different location.</li>
<li>Using only a single footstep sound every time feels repetitive for players, so instead we have an array of similar ones and pick a random one each time.</li>
<li>Note that the minimum value in <code>Random.Range</code> is <em>inclusive</em> (so it can pick 0) while the maximum value is <em>exclusive</em> (so it can not pick <code>_Sounds.Length</code>), which is perfect for picking a random element from an array.</li>
</ul>
<h1 id="animation-events">Animation Events</h1>
<p><img src="architecture-animation.png" class="img-responsive" id="architecture-animation"></p>
<p></p><details><summary><a href="../../../manual/events/animation">Animation Events</a> are defined in <code>AnimationClip</code>s which are assets, meaning they can't reference scene objects such as the <code>AudioSource</code>s on the character's feet. So the events will need to use an <code>Int</code> parameter to indicate which foot they are referring to which a script will then use to determine which <code>AudioSource</code> to use.</summary>
<p>This is because the asset could be loaded without the scene being loaded. Unity simply doesn't allow that to happen.</p>
<p>That means the <code>Object</code> parameter can only reference other assets which is useful in other circumstances but doesn't help us here.</p>
</details><p></p>
<p>Note that <a href="../../../manual/events/animation">Animation Events</a> don't directly interact with Animancer so this setup process is exactly the same as it would be without Animancer.</p>
<h2 id="fields">Fields</h2>
<p>Since it's only necessary for this system (but not <a href="../../../manual/events/animancer">Animancer Events</a>) it's better to not add anything extra to the <code><a href="/animancer/api/Animancer.Examples.Events/FootstepEvents">FootstepEvents</a></code> script that will be shared by both systems. So instead, <code><a href="/animancer/api/Animancer.Examples.Events/FootstepEventsAnimation">FootstepEventsAnimation</a></code> is a separate script which references the character's <code><a href="/animancer/api/Animancer.Examples.Events/FootstepEvents">FootstepEvents</a></code> script and foot <code>AudioSource</code>s:</p>
<pre><code class="language-cs">public sealed class <a href="/animancer/api/Animancer.Examples.Events/FootstepEventsAnimation">FootstepEventsAnimation</a> : MonoBehaviour
{
    [SerializeField] private <a href="/animancer/api/Animancer.Examples.Events/FootstepEvents">FootstepEvents</a> _FootstepEvents;
    [SerializeField] private AudioSource[] _FootSources;
</code></pre>
<p><img src="footstep-events-animation.png" class="img-responsive"></p>
<h2 id="receiver-method">Receiver Method</h2>
<p>Each <a href="../../../manual/events/animation">Animation Event</a> has a <code>Function Name</code> to determine which script method it runs and optional parameters that will be passed into the method if it has them. In this case, we will be using the name <code>Footstep</code> and also the <code>Int</code> parameter to indicate which foot the event is for:</p>
<pre><code class="language-cs">    private void Footstep(int foot)
    {
</code></pre>
<p>Then all that method needs to do is get the <code>AudioSource</code> for the specified foot from the array and tell the <code><a href="/animancer/api/Animancer.Examples.Events/FootstepEvents">FootstepEvents</a></code> script to play a sound on it:</p>
<pre><code class="language-cs">        _FootstepEvents.PlaySound(_FootSources[foot]);
    }
}
</code></pre>
<h2 id="duplicate-animation">Duplicate Animation</h2>
<p><a href="../../../manual/events/animation">Animation Events</a> are defined in <code>AnimationClip</code> assets. In a regular project you would likely want the same events everywhere a particular animation is used, but that's not the case for these examples since most of the others don't involve events (and ones that do use <a href="../../../manual/events/animancer">Animancer Events</a> instead). So this example uses <em>Humanoid-Walk-Footsteps</em> which is a copy of the original <em>Humanoid-Walk</em> animation which was created for this example by selecting the original and using the <code>Edit/Duplicate</code> function (<code>Ctrl + D</code>).</p>
<h2 id="adding-events">Adding Events</h2>
<p>The <a href="../../../manual/events/animation">Animation Events</a> page briefly explains how to add events to an animation and has links to the Unity Manual which explais it in more detail so we won't be repeating that here.</p>
<p>In this example, we have two events with their <code>Function Name</code> set to <code>Footstep</code>:</p>
<p><img src="animation-event-timeline.png" class="img-responsive"></p>
<table class="table">
  <thead>
    <tr><th style="width:50%">Left Foot</th>
    <th style="width:50%">Right Foot</th>
  </tr></thead>
  <tbody>
    <tr>
      <td>The first event on frame 1 has its <code>Int</code> prameter at <code>0</code> to refer to the <code>LeftFoot (Audio Source)</code> shown in the above image of the Inspector.</td>
      <td>The second event on frame 13 has its <code>Int</code> prameter at <code>1</code> to refer to the <code>RightFoot (Audio Source)</code> shown in the above image of the Inspector.</td>
    </tr>
    <tr>
      <td><img src="animation-event-left.png" class="img-responsive"></td>
      <td><img src="animation-event-right.png" class="img-responsive"></td>
    </tr>
  </tbody>
</table>
<h1 id="animancer-events">Animancer Events</h1>
<p><img src="architecture-animancer.png" class="img-responsive" id="architecture-animancer"></p>
<p>Setting up this character is simpler because the events are stored in the <code>_Walk</code> <a href="../../../manual/transitions">Transition</a> in the <code><a href="/animancer/api/Animancer.Examples.Events/FootstepEvents">FootstepEvents</a></code> component. That component is in the scene so it can directly reference the foot <code>AudioSource</code>s. The <a href="../../../manual/events/animancer">Animancer Events</a> page explains how to set up events so all we need to do is follow that process.</p>
<table class="table">
  <thead>
    <tr><th style="width:50%">Left Footstep</th>
    <th style="width:50%">Right Footstep</th>
  </tr></thead>
  <tbody>
    <tr>
      <td>The first event on frame 1 will pass the <code>LeftFoot (Audio Source)</code> into the <code>PlaySound</code> method.</td>
      <td>The second event on frame 13 will pass the <code>RightFoot (Audio Source)</code> into the <code>PlaySound</code> method.</td>
    </tr>
    <tr>
      <td><img src="animancer-event-left.png" class="img-responsive"></td>
      <td><img src="animancer-event-right.png" class="img-responsive"></td>
    </tr>
  </tbody>
</table>
<h1 id="conclusion">Conclusion</h1>
<p>The workflow of <a href="../../../manual/events/animancer">Animancer Events</a> is clearly superior for this particular example because they could be set up where they were needed, directly referenced the objects they interact with, and did not require a duplicate of the <code>AnimationClip</code>, but that will not always be the case. You may encounter situations where <a href="../../../manual/events/animation">Animation Events</a> are more useful so it's important to understand all the tools you have available.</p>
<p><img src="footstep-events.png" class="pngif img-responsive"></p>
<h1 id="what-next">What Next?</h1>
<table class="table">
<thead>
<tr>
<th>Example</th>
<th>Topic</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><a href="../golf">Golf Events</a></strong></td>
<td>Demonstrates a hybrid approach to <a href="../../../manual/events/animancer">Animancer Events</a> where you setup and tweak their times in the Inspector but leave their <code>Callback</code>s blank to set them in code.</td>
</tr>
<tr>
<td><a href="../../ik/uneven-ground">Uneven Ground</a></td>
<td>Uses raycasts to determine how to position the character's feet without floating or going through the ground. This example doesn't involve events, you could potentially use the same data to determine when to trigger footstep sounds as well. That would allow it to work for all animations without manually adding events to them all and could do things like calculating the desired volume based on the velocity of the foot and playing different sounds based on where each foot actually lands rather than the character's center.</td>
</tr>
<tr>
<td><a href="../../animator-controllers/3d-game-kit">3D Game Kit</a></td>
<td>Uses animation curves to determine when to play footstep sounds instead of events. It also has different sounds depending on the surface the character is standing on.</td>
</tr>
</tbody>
</table>

	</section>
                
            </div>           
            
            <!-- Footer -->
            <footer class="main-footer">
            </footer>
            
        </div>
        <div class="wrapper bottom-wrapper">
            <footer class="bottom-footer">
                <strong><div style="text-align:left; display:flex">

<div>
<p>Documentation</p>
<p><a href="/animancer/docs/examples">Examples</a></p>
<p><a href="/animancer/docs/manual">User Manual</a></p>
<p><a href="/animancer/docs/changes">Change Log</a></p>
</div>

<div style="width:10%"></div>

<div>
<p>Download</p>
<p><a href="https://kybernetik.itch.io/animancer-pro">Itch.io (Recommended)</a></p>
<p><a href="https://assetstore.unity.com/packages/tools/animation/animancer-pro-116514?aid=1100l8ah5">Asset Store (Animancer Pro)</a></p>
<p><a href="https://assetstore.unity.com/packages/tools/animation/animancer-lite-116516?aid=1100l8ah5">Asset Store (Animancer Lite)</a></p>
</div>

<div style="width:10%"></div>

<div>
<p>Contact</p>
<p><a href="https://github.com/KybernetikGames/animancer/issues">Github Issues</a></p>
<p><a href="/animancer/redirect/forum">Unity Forum</a></p>
<p><a href="mailto:animancer@kybernetik.com.au?subject=Animancer">Email</a></p>
</div>

<div style="width:10%"></div>

<div>
<p>Other Assets</p>
<p><a href="/flexi-motion">FlexiMotion</a></p>
<p><a href="/inspector-gadgets">Inspector Gadgets</a></p>
<p><a href="/weaver">Weaver</a></p>
</div>

<div style="width:10%"></div>

<div>
<p>&nbsp;</p>
<p><a href="https://assetstore.unity.com/packages/vfx/shaders/simple-sun-shader-72042?aid=1100l8ah5">Simple Sun Shader</a></p>
<p><a href="https://assetstore.unity.com/packages/tools/version-control/link-sync-229569?aid=1100l8ah5">Link &amp; Sync</a></p>
<p><a href="/ultevents">UltEvents</a></p>
</div>

</div></strong>
<script src="/animancer/assets/js/pngif.js"></script>
            </footer>
        </div>
        <a href="javascript:" id="return-to-top"><i class="fa fa-chevron-up"></i></a>
        
        <script>           
            // Close the sidebar if we select an anchor link
            $(".main-sidebar a[href^='#']:not('.expand')").click(function(){
                $(document.body).removeClass('sidebar-open');
            });
            
            $(document).ready(function() {
                mermaid.initialize(
                {
                    flowchart:
                    {
                        useMaxWidth: false
                    },
					startOnLoad: false,
					cloneCssStyles: false
                });     
                mermaid.init(undefined, ".mermaid");

                // Remove the max-width setting that Mermaid sets
                var mermaidSvg = $('.mermaid svg');
                mermaidSvg.addClass('img-responsive');
                mermaidSvg.css('max-width', '');

                // Make it scrollable
				var target = document.querySelector(".mermaid svg");
				if(target !== null)
				{
					var panZoom = window.panZoom = svgPanZoom(target, {
						zoomEnabled: true,
						controlIconsEnabled: true,
						fit: true,
						center: true,
                        maxZoom: 20,
                        zoomScaleSensitivity: 0.6
					});			                          

                    // Do the reset once right away to fit the diagram
                    panZoom.resize();
                    panZoom.fit();
                    panZoom.center();
                    
                    $(window).resize(function(){
                        panZoom.resize();
                        panZoom.fit();
                        panZoom.center();
                    });
				}
                
                $('pre code').each(function(i, block) {
                    hljs.highlightBlock(block);
                });  
            });

            hljs.initHighlightingOnLoad();

            // Back to top
            $(window).scroll(function() {
                if ($(this).scrollTop() >= 200) {        // If page is scrolled more than 50px
                    $('#return-to-top').fadeIn(1000);    // Fade in the arrow
                } else {
                    $('#return-to-top').fadeOut(1000);   // Else fade out the arrow
                }
            });
            $('#return-to-top').click(function() {      // When arrow is clicked
                $('body,html').animate({
                    scrollTop : 0                       // Scroll to top of body
                }, 500);
            });
        </script>
    
</body></html>