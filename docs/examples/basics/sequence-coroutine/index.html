<!DOCTYPE html><html><head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=Edge">
        <meta name="description">
        <meta name="keywords" content="static content generator,static site generator,static site,HTML,web development,.NET,C#,Razor,Markdown,YAML">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="shortcut icon" href="/animancer/assets/img/favicon.ico" type="image/x-icon">
        <link rel="icon" href="/animancer/assets/img/favicon.ico" type="image/x-icon">
        <title>Animancer - 03 Sequence Coroutine</title>
        <link href="/animancer/assets/css/highlight.css" rel="stylesheet">
        <link href="/animancer/assets/css/bootstrap/bootstrap.css" rel="stylesheet">
        <link href="/animancer/assets/css/adminlte/AdminLTE.css" rel="stylesheet">
        <link href="/animancer/assets/css/theme/theme.css" rel="stylesheet">
        <link href="//fonts.googleapis.com/css?family=Roboto+Mono:400,700|Roboto:400,400i,700,700i" rel="stylesheet">
        <link href="/animancer/assets/css/font-awesome.min.css" rel="stylesheet" type="text/css">
        <link href="/animancer/assets/css/override.css" rel="stylesheet">
        <script src="/animancer/assets/js/jquery-2.2.3.min.js"></script>
        <script src="/animancer/assets/js/bootstrap.min.js"></script>        
        <script src="/animancer/assets/js/app.min.js"></script>         
        <script src="/animancer/assets/js/highlight.pack.js"></script>   
        <script src="/animancer/assets/js/jquery.slimscroll.min.js"></script>
        <script src="/animancer/assets/js/jquery.sticky-kit.min.js"></script>
        <script src="/animancer/assets/js/mermaid.min.js"></script>
        <script src="/animancer/assets/js/svg-pan-zoom.min.js"></script>
        <!--[if lt IE 9]>
        <script src="/animancer/assets/js/html5shiv.min.js"></script>
        <script src="/animancer/assets/js/respond.min.js"></script>
        <![endif]-->  

        
    </head>
    <body class="hold-transition wyam layout-boxed  ">    
        <div class="top-banner"></div>
        <div class="wrapper with-container">
            <!-- Header -->
            <header class="main-header">   
                     
                <a href="/animancer/" class="logo">
                            <span>Animancer</span>
                </a>   
                         
                <nav class="navbar navbar-static-top" role="navigation">
                    <!-- Sidebar toggle button-->
                        <a href="#" class="sidebar-toggle visible-xs-block" data-toggle="offcanvas" role="button">
                            <span class="sr-only">Toggle side menu</span>
                            <i class="fa fa-chevron-circle-right"></i>
                        </a>
                                        
                    <div class="navbar-header">
                        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse">
                            <span class="sr-only">Toggle side menu</span>
                            <i class="fa fa-chevron-circle-down"></i>
                        </button>
                    </div>
            
                    <!-- Collect the nav links, forms, and other content for toggling -->
                    <div class="collapse navbar-collapse pull-left" id="navbar-collapse">
                        <ul class="nav navbar-nav">                            
                                    <li><a href="/animancer/docs/introduction/features"><img src="/animancer/images/features.png" height="20px" width="20px" style="left:-7px"> Features</a></li>
        <li><a href="/animancer/docs/download"><img src="/animancer/images/download.png" height="20px" width="20px" style="left:-7px"> Download</a></li>
        <li class="active"><a href="/animancer/docs"><img src="/animancer/images/docs.png" height="20px" width="7.5px" style="left:-5px"> Documentation</a></li>
        <li><a href="/animancer/docs/help"><img src="/animancer/images/help.png" height="20px" width="10.625px" style="left:-4px"> Help</a></li>
        <li><a href="/animancer/api/Animancer/AnimancerComponent"><img src="/animancer/images/api.png" height="20px" width="18.125px" style="left:-3px"> API v6.1</a></li>
        <li><a href="/kailas-dierk/unity-assets"><img src="/animancer/images/kybernetik.png" height="20px" width="20px" style="left:-2px"> Other Assets</a></li>

<li style="width:100%">
<form class="search-form" name="search" action="/animancer/search">
<span><input class="search-input" id="search" name="q" type="text" placeholder="Search..."></span>
<div class="search-button"><button type="submit"><i class="fa fa-search"></i></button></div>
</form>
</li> 
                        </ul>       
                    </div>
                    <!-- /.navbar-collapse -->
                
                    <!-- Navbar Right Menu -->
                </nav>
            </header>
            
            <!-- Left side column. contains the logo and sidebar -->
            <aside class="main-sidebar ">
                <section class="infobar" data-spy="affix" data-offset-top="60" data-offset-bottom="200"> 
                    	
    <div id="infobar-headings"><h6>On This Page</h6><p><a href="#tutorial">Tutorial</a></p>
<p><a href="#basic-script">Basic Script</a></p>
<p><a href="#basic-coroutine">Basic Coroutine</a></p>
<p><a href="#using-the-sequence">Using the Sequence</a></p>
<p><a href="#animation-names">Animation Names</a></p>
<p><a href="#animation-durations">Animation Durations</a></p>
<p><a href="#alternate-loop-duration">Alternate Loop Duration</a></p>
<p><a href="#transitions">Transitions</a></p>
<p><a href="#assertions">Assertions</a></p>
<hr class="infobar-hidden">
</div>

                </section>
                <section class="sidebar">    
                                     
                    

                    <ul class="sidebar-menu">
                        

                <li><a href="/animancer/docs/download">Download</a></li>
                <li class="treeview">
                    <a href="/animancer/docs/introduction">Introduction</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/introduction/features">Features</a></li>
                <li class="treeview">
                    <a href="/animancer/docs/introduction/mecanim-vs-animancer">Mecanim vs. Animancer</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li class="treeview">
                    <a href="/animancer/docs/introduction/mecanim-vs-animancer/why">Why Replace Mecanim?</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/introduction/mecanim-vs-animancer/why/simplicity">Simplicity</a></li>
                <li><a href="/animancer/docs/introduction/mecanim-vs-animancer/why/transparency">Transparency</a></li>
                <li><a href="/animancer/docs/introduction/mecanim-vs-animancer/why/adaptability">Adaptability</a></li>
                <li><a href="/animancer/docs/introduction/mecanim-vs-animancer/why/clarity">Clarity</a></li>
                <li><a href="/animancer/docs/introduction/mecanim-vs-animancer/why/safety">Safety</a></li>
                <li><a href="/animancer/docs/introduction/mecanim-vs-animancer/why/reliability">Reliability</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/introduction/mecanim-vs-animancer/comparison">Comparison</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/introduction/mecanim-vs-animancer/comparison/playing">Playing</a></li>
                <li><a href="/animancer/docs/introduction/mecanim-vs-animancer/comparison/waiting">Waiting</a></li>
                <li><a href="/animancer/docs/introduction/mecanim-vs-animancer/comparison/speed-and-time">Speed and Time</a></li>
                <li><a href="/animancer/docs/introduction/mecanim-vs-animancer/comparison/weapon-animations">Weapon Animations</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/docs/introduction/mecanim-vs-animancer/conversion">Conversion</a></li>
                <li><a href="/animancer/docs/introduction/mecanim-vs-animancer/performance">Performance</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/docs/introduction/glossary">Glossary</a></li>
                <li class="treeview">
                    <a href="/animancer/docs/introduction/cs">C# in Unity</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/introduction/cs/overview">Scripting Overview</a></li>
                <li><a href="/animancer/docs/introduction/cs/organisation">Organisation</a></li>
                <li><a href="/animancer/docs/introduction/cs/variables">Variables</a></li>
                <li><a href="/animancer/docs/introduction/cs/methods">Methods</a></li>
                <li><a href="/animancer/docs/introduction/cs/inheritance">Inheritance</a></li>
                <li><a href="/animancer/docs/introduction/cs/vectors">Vectors</a></li>
                <li><a href="/animancer/docs/introduction/cs/other">Other Topics</a></li>

                    </ul>
                </li>

                    </ul>
                </li>
                <li class="treeview active">
                    <a href="/animancer/docs/examples">Examples</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li class="treeview active">
                    <a href="/animancer/docs/examples/basics">01 Basics</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/basics/scene-setup">Basic Scene Setup</a></li>
                <li><a href="/animancer/docs/examples/basics/quick-play">01 Quick Play</a></li>
                <li><a href="/animancer/docs/examples/basics/playing-and-fading">02 Playing and Fading</a></li>
                <li class="selected"><a href="/animancer/docs/examples/basics/sequence-coroutine">03 Sequence Coroutine</a></li>
                <li><a href="/animancer/docs/examples/basics/named-animations">04 Named Animations</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/examples/fine-control">02 Fine Control</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/fine-control/spider-bot">01 Spider Bot</a></li>
                <li><a href="/animancer/docs/examples/fine-control/doors">02 Doors</a></li>
                <li><a href="/animancer/docs/examples/fine-control/solo-animation">03 Solo Animation</a></li>
                <li><a href="/animancer/docs/examples/fine-control/update-rate">04 Update Rate</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/examples/locomotion">03 Locomotion</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/locomotion/walk-and-run">01 Walk and Run</a></li>
                <li><a href="/animancer/docs/examples/locomotion/root-motion">02 Root Motion</a></li>
                <li><a href="/animancer/docs/examples/locomotion/linear-blending">03 Linear Blending</a></li>
                <li><a href="/animancer/docs/examples/locomotion/directional-blending">04 Directional Blending</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/examples/directional-sprites">04 Directional Sprites</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/directional-sprites/basic-movement">01 Basic Movement</a></li>
                <li><a href="/animancer/docs/examples/directional-sprites/character-controller">02 Character Controller</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/examples/events">05 Events</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/events/footsteps">01 Footstep Events</a></li>
                <li><a href="/animancer/docs/examples/events/golf">02 Golf Events</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/examples/fsm">06 State Machines</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li class="treeview">
                    <a href="/animancer/docs/examples/fsm/game-manager">01 Game Manager</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/fsm/game-manager/enum">Enum</a></li>
                <li><a href="/animancer/docs/examples/fsm/game-manager/fsm">FSM</a></li>
                <li><a href="/animancer/docs/examples/fsm/game-manager/comparison">Comparison</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/docs/examples/fsm/creatures">02 Creatures</a></li>
                <li><a href="/animancer/docs/examples/fsm/interrupts">03 Interrupt Management</a></li>
                <li><a href="/animancer/docs/examples/fsm/brains">04 Brains</a></li>
                <li><a href="/animancer/docs/examples/fsm/more-brains">05 More Brains</a></li>
                <li><a href="/animancer/docs/examples/fsm/weapons">06 Weapons</a></li>
                <li><a href="/animancer/docs/examples/fsm/platformer">07 Platformer</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/docs/examples/layers">07 Layers</a></li>
                <li class="treeview">
                    <a href="/animancer/docs/examples/ik">08 Inverse Kinematics</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/ik/puppet">01 Puppet</a></li>
                <li><a href="/animancer/docs/examples/ik/uneven-ground">02 Uneven Ground</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/examples/animator-controllers">09 Animator Controllers</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/animator-controllers/basics">01 Hybrid Basics</a></li>
                <li><a href="/animancer/docs/examples/animator-controllers/mini-game">02 Hybrid Mini Game</a></li>
                <li class="treeview">
                    <a href="/animancer/docs/examples/animator-controllers/3d-game-kit">03 3D Game Kit</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/animator-controllers/3d-game-kit/problems">Problems with the Mecanim Character</a></li>
                <li><a href="/animancer/docs/examples/animator-controllers/3d-game-kit/respawn">Respawn</a></li>
                <li><a href="/animancer/docs/examples/animator-controllers/3d-game-kit/idle">Idle</a></li>
                <li class="treeview">
                    <a href="/animancer/docs/examples/animator-controllers/3d-game-kit/locomotion">Locomotion</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/animator-controllers/3d-game-kit/locomotion/movement">Movement</a></li>
                <li><a href="/animancer/docs/examples/animator-controllers/3d-game-kit/locomotion/turning">Turning</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/docs/examples/animator-controllers/3d-game-kit/airborne">Airborne</a></li>
                <li><a href="/animancer/docs/examples/animator-controllers/3d-game-kit/landing">Landing</a></li>
                <li><a href="/animancer/docs/examples/animator-controllers/3d-game-kit/attack">Attack</a></li>
                <li><a href="/animancer/docs/examples/animator-controllers/3d-game-kit/flinch">Flinch</a></li>
                <li><a href="/animancer/docs/examples/animator-controllers/3d-game-kit/die">Die</a></li>

                    </ul>
                </li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/examples/jobs">10 Animation Jobs</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/jobs/two-bone-ik">01 Two Bone IK</a></li>
                <li><a href="/animancer/docs/examples/jobs/damping">02 Damping</a></li>
                <li><a href="/animancer/docs/examples/jobs/lean">03 Lean</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/examples/integration">Integration</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/examples/integration/animation-rigging">Animation Rigging</a></li>
                <li><a href="/animancer/docs/examples/integration/dynamic-bone">Dynamic Bone</a></li>
                <li><a href="/animancer/docs/examples/integration/final-ik">Final IK</a></li>
                <li><a href="/animancer/docs/examples/integration/hairibar-ragdoll">Hairibar Ragdoll</a></li>
                <li><a href="/animancer/docs/examples/integration/puppet-master">Puppet Master</a></li>

                    </ul>
                </li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/manual">User Manual</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li class="treeview">
                    <a href="/animancer/docs/manual/getting">Getting Animations</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/manual/getting/mixamo">Mixamo</a></li>
                <li><a href="/animancer/docs/manual/getting/importing">Importing</a></li>
                <li><a href="/animancer/docs/manual/getting/animation-window">Animation Window</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/manual/playing">Playing Animations</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/manual/playing/states">States</a></li>
                <li><a href="/animancer/docs/manual/playing/inspector">Inspector</a></li>
                <li><a href="/animancer/docs/manual/playing/component-types">Component Types</a></li>
                <li><a href="/animancer/docs/manual/playing/directional-sets">Directional Animation Sets</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/manual/transitions">Transitions</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/manual/transitions/types">Transition Types</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/manual/blending">Blending</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/manual/blending/fading">Fading</a></li>
                <li><a href="/animancer/docs/manual/blending/layers">Layers</a></li>
                <li><a href="/animancer/docs/manual/blending/mixers">Mixers</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/manual/events">Events</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/manual/events/animation">Animation Events</a></li>
                <li><a href="/animancer/docs/manual/events/animancer">Animancer Events</a></li>
                <li><a href="/animancer/docs/manual/events/end">End Events</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/docs/manual/fsm">Finite State Machines</a></li>
                <li><a href="/animancer/docs/manual/animator-controllers">Animator Controllers</a></li>
                <li><a href="/animancer/docs/manual/timeline">Timeline</a></li>
                <li><a href="/animancer/docs/manual/ik">Inverse Kinematics</a></li>
                <li class="treeview">
                    <a href="/animancer/docs/manual/tools">Animancer Tools</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/manual/tools/pack-textures">Pack Textures</a></li>
                <li><a href="/animancer/docs/manual/tools/modify-sprites">Modify Sprites</a></li>
                <li><a href="/animancer/docs/manual/tools/rename-sprites">Rename Sprites</a></li>
                <li><a href="/animancer/docs/manual/tools/generate-sprite-animations">Generate Sprite Animations</a></li>
                <li><a href="/animancer/docs/manual/tools/remap-sprite-animation">Remap Sprite Animation</a></li>
                <li><a href="/animancer/docs/manual/tools/remap-animation-bindings">Remap Animation Bindings</a></li>

                    </ul>
                </li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/bugs">Unity Bugs</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/bugs/events">Animation Events</a></li>
                <li><a href="/animancer/docs/bugs/animator-controller-speed">Animator Controller Speed</a></li>
                <li><a href="/animancer/docs/bugs/paused-skinned-mesh-update">Paused Skinned Mesh Update</a></li>
                <li><a href="/animancer/docs/bugs/serialized-array-initialization">Serialized Array Initialization</a></li>
                <li><a href="/animancer/docs/bugs/stabilize-feet">Stabilize Feet</a></li>
                <li><a href="/animancer/docs/bugs/timeline">Timeline</a></li>
                <li><a href="/animancer/docs/bugs/timing">Timing</a></li>
                <li><a href="/animancer/docs/bugs/update-modes">Update Modes</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/source">Source Code</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/source/dlls">DLLs</a></li>
                <li><a href="/animancer/docs/source/creating-custom-states">Creating Custom States</a></li>
                <li><a href="/animancer/docs/source/graph-structure">Graph Structure</a></li>
                <li><a href="/animancer/docs/source/asset-sources">Asset Sources</a></li>
                <li><a href="/animancer/docs/source/coding-standard">Coding Standard</a></li>
                <li><a href="/animancer/docs/source/default-script-template">Default Script Template</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/changes">Change Log</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/changes/animancer-v6-1">Animancer v6.1</a></li>
                <li class="treeview">
                    <a href="/animancer/docs/changes/animancer-v6-0">Animancer v6.0</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/changes/animancer-v6-0/test">Test Releases</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/docs/changes/animancer-v5-3">Animancer v5.3</a></li>
                <li><a href="/animancer/docs/changes/animancer-v5-2">Animancer v5.2</a></li>
                <li><a href="/animancer/docs/changes/animancer-v5-1">Animancer v5.1</a></li>
                <li class="treeview">
                    <a href="/animancer/docs/changes/animancer-v5-0">Animancer v5.0</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/changes/animancer-v5-0/test">Test Releases</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/docs/changes/animancer-v4-4">Animancer v4.4</a></li>
                <li><a href="/animancer/docs/changes/animancer-v4-3">Animancer v4.3</a></li>
                <li><a href="/animancer/docs/changes/animancer-v4-2">Animancer v4.2</a></li>
                <li><a href="/animancer/docs/changes/animancer-v4-1">Animancer v4.1</a></li>
                <li class="treeview">
                    <a href="/animancer/docs/changes/animancer-v4-0">Animancer v4.0</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/changes/animancer-v4-0/test">Test Releases</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/docs/changes/animancer-v3-1">Animancer v3.1</a></li>
                <li><a href="/animancer/docs/changes/animancer-v3-0">Animancer v3.0</a></li>
                <li><a href="/animancer/docs/changes/animancer-v2-0">Animancer v2.0</a></li>
                <li><a href="/animancer/docs/changes/animancer-v1-3">Animancer v1.3</a></li>
                <li><a href="/animancer/docs/changes/animancer-v1-2">Animancer v1.2</a></li>
                <li><a href="/animancer/docs/changes/animancer-v1-1">Animancer v1.1</a></li>
                <li><a href="/animancer/docs/changes/animancer-v1-0">Animancer v1.0</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/help">Help and FAQ</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/help/debugging">Debugging</a></li>

                    </ul>
                </li>

                    </ul>
                            
                </section>                
            </aside>
            
            <!-- Content Wrapper. Contains page content -->
            <div class="content-wrapper">
                



		<section class="content-header">
			<h1>03 Sequence Coroutine</h1>
		</section>
	<section class="content">
		<blockquote class="blockquote">
<p><strong>Difficulty</strong>: <a href="../../../introduction/glossary#example-difficulty">Beginner</a> - Recommended after <a href="../quick-play">Quick Play</a></p>
<p><strong>Location</strong>: <em>Assets/Plugins/Animancer/Examples/01 Basics/03 Sequence Coroutine</em></p>
<p><strong>Namespace</strong>: <a href="../../../../api/Animancer.Examples.Basics"><code>Animancer.Examples.Basics</code></a></p>
</blockquote>
<p>This example demonstrates how you can use a coroutine to play through an array of animations in a simple sequence as if to showcase them for a professional portfolio or a pack of animations to release on the Asset Store. Or in a game, this approach could be adapted for a melee attack combo system. It uses <a href="../../../manual/transitions">Transitions</a> to allow the details of each animation to be easily customised in the Inspector.</p>
<p><em><a href="../../../introduction/features"><strong>Pro-Only Features</strong></a> are used in this example: <a href="../../../manual/events/end">Custom End Times</a>. Animancer Lite allows you to try out these features in the Unity Editor, but they are not available in runtime builds unless you purchase <a href="/animancer/pro">Animancer Pro</a>.</em></p>
<p><img src="transition-sequence.gif" class="img-responsive"></p>
<h1 id="tutorial">Tutorial</h1>
<p></p><details><summary>Here's the script we will be building in this tutorial:</summary><p>
</p><pre><code class="language-cs">using Animancer;
using System.Collections;
using UnityEngine;

public sealed class SequenceCoroutineTutorial : MonoBehaviour
{
    [SerializeField] private <a href="/animancer/api/Animancer/AnimancerComponent">AnimancerComponent</a> _Animancer;
    [SerializeField] private TextMesh _Text;
    [SerializeField] private ClipState.Transition[] _Animations;

    private void OnEnable()
    {
        Debug.Assert(_Animations.Length &gt; 1, "Must have more than 1 animation assigned.");
        Debug.Assert(_Animations[0].Clip.isLooping, "The first animation should be looping.");

        Play(0);
    }

    public void PlaySequence()
    {
        StopAllCoroutines();
        StartCoroutine(CoroutineAnimationSequence());
    }

    private IEnumerator CoroutineAnimationSequence()
    {
        for (int i = 1; i &lt; _Animations.Length; i++)
        {
            var state = Play(i);
            yield return state;
        }

        Play(0);
    }

    private <a href="/animancer/api/Animancer/AnimancerState">AnimancerState</a> Play(int index)
    {
        var animation = _Animations[index];
        _Text.text = animation.Clip.name;
        return _Animancer.Play(animation);
    }
}
</code></pre>
<p>And this that it looks like in the Inspector:</p>
<p><img src="transitions.png" class="img-responsive"></p>
<p></p></details><p></p>
<p>Start by following the <a href="../scene-setup">Basic Scene Setup</a> instructions to create a new scene with the character in it.</p>
<h1 id="basic-script">Basic Script</h1>
<ol>
<li>Create a new script called <code>SequenceCoroutineTutorial</code> and open it up.</li>
<li>Put <code>using Animancer;</code> at the top of the script.</li>
<li>Give it serialized <code><a href="/animancer/api/Animancer/AnimancerComponent">AnimancerComponent</a></code> and <code>AnimationClip[]</code> fields for the animations in the sequence.</li>
<li>Use the <code>OnEnable</code> method to play the first clip in the sequence.</li>
</ol>
<p></p><details><summary>The script looks like this so far:</summary><p>
</p><pre><code class="language-cs">using Animancer;
using UnityEngine;

public sealed class SequenceCoroutineTutorial : MonoBehaviour
{
    [SerializeField] private <a href="/animancer/api/Animancer/AnimancerComponent">AnimancerComponent</a> _Animancer;
    [SerializeField] private AnimationClip[] _Animations;

    private void OnEnable()
    {
        _Animancer.Play(_Animations[0]);
    }
}
</code></pre>
<p></p></details><p></p>
<h1 id="basic-coroutine">Basic Coroutine</h1>
<p>We could test it out now, but there's not much point because all it does so far is play a single animation. Instead, start making the <a href="https://docs.unity3d.com/Manual/Coroutines.html">Coroutine</a> that will play through each animation in the array one by one.</p>
<p>A coroutine is a special type of method with <code>IEnumerator</code> as the return type like so:</p>
<pre><code class="language-cs">private IEnumerator CoroutineAnimationSequence()
{
}
</code></pre>
<p><code>IEnumerator</code> is located in the <code>System.Collections</code> namespace so we need <code>using System.Collections;</code> at the top of the script if it isn't there already. If you are using Visual Studio you can select <code>IEnumerator</code> and press <code>Ctrl + .</code> to open a menu which allows you to easily add the correct <code>using</code> statement.</p>
<p>At this point it's still a regular method that just happens to return an <code>IEnumerator</code>, not actually a coroutine. For example, we could put in <code>return _Animations.GetEnumerator();</code> to return an object that can be used to iterate through every element of the <code>_Animations</code> array and we could call it like a regular method. This is why if you intend for a method to be used as a coroutine you choose a naming convention to make that clear, such as starting the name with <code>Coroutine</code> as we have done here (or even simply <code>Cr</code> if you prefer something shorter).</p>
<p>What actually makes it a coroutine is the use of <code>yield</code> statements. For example, we could put in <code>yield break;</code> which ends the method like a <code>return;</code> statement in a regular method. That would get it to stop giving us compiler errors, but all we would have is a coroutine that still does nothing.</p>
<p>To implement our sequence, we want to use a loop to iterate through every animation in the <code>_Animations</code> array and make use of Unity's <code>WaitForSeconds</code> class to wait a bit while each one plays:</p>
<pre><code class="language-cs">private IEnumerator CoroutineAnimationSequence()
{
    // Start at the second animation (index [1]) since we are already playing the first.
    for (int i = 1; i &lt; _Animations.Length; i++)
    {
        // Play it.
        _Animancer.Play(_Animations[i]);

        // Wait for 1 second.
        yield return new WaitForSeconds(1);

        // Then go to the next animation.
    }

    // After the last animation plays and waits, go back to the first animation.
    _Animancer.Play(_Animations[0]);
}
</code></pre>
<p>Obviously playing each animation for the same 1 second duration isn't going to be what we want because they have different lengths, so we will improve that soon (in <a href="#animation-durations">Animation Durations</a>).</p>
<p>The last thing we need before we can go back to Unity and try it out is a method to actually run the coroutine which we will make <code>public</code> so it can be called by a UI <code>Button</code>. To do that, we need to call it and pass the <code>IEnumerator</code> it creates into the <code>StartCoroutine</code> method so Unity knows it needs to continue checking when the next part of the coroutine should be executed (according to the <code>yield</code> statement we put in.</p>
<p>We also want to call <code>StopAllCoroutines</code> first, just in case the button gets clicked again before the previous sequence ends. It wouldn't be very useful to have two sequences running at once (it can be in other situations, but not for this). <code>StartCoroutine</code> actually returns a <code>Coroutine</code> object which you can store in a field in case you want to stop that specific one later on, but since we only have one we can just stop everything.</p>
<pre><code class="language-cs">public void PlaySequence()
{
    StopAllCoroutines();
    StartCoroutine(CoroutineAnimationSequence());
}
</code></pre>
<p></p><details><summary>The full script now looks like this:</summary><p>
</p><pre><code class="language-cs">using Animancer;
using System.Collections;
using UnityEngine;

public sealed class SequenceCoroutineTutorial : MonoBehaviour
{
    [SerializeField] private <a href="/animancer/api/Animancer/AnimancerComponent">AnimancerComponent</a> _Animancer;
    [SerializeField] private AnimationClip[] _Animations;

    private void OnEnable()
    {
        _Animancer.Play(_Animations[0]);
    }

    public void PlaySequence()
    {
        StopAllCoroutines();
        StartCoroutine(CoroutineAnimationSequence());
    }

    private IEnumerator CoroutineAnimationSequence()
    {
        for (int i = 1; i &lt; _Animations.Length; i++)
        {
            _Animancer.Play(_Animations[i]);

            yield return new WaitForSeconds(1);
        }

        _Animancer.Play(_Animations[0]);
    }
}
</code></pre>
<p></p></details><p></p>
<h1 id="using-the-sequence">Using the Sequence</h1>
<p>Save the script and go back to the Unity scene so we can see it in action.</p>
<ol>
<li>Add the <code>SequenceCoroutineTutorial</code> script we just created to the <em>DefaultHumanoid</em> in the scene. It would work regardless of which object we put it on, but there is the most convenient.</li>
<li>Assign the <em>DefaultHumanoid</em>'s <code><a href="/animancer/api/Animancer/AnimancerComponent">AnimancerComponent</a></code> to the <code>Animancer</code> field on the component we just added.</li>
<li>Assign the animations you want in your sequence to the <code>Animations</code> array, starting with an <em>Idle</em> animation.</li>
</ol>
<p><img src="basic-sequence-inspector.png" class="img-responsive"></p>
<p></p><details><summary>Those foldout arrows to the left of each field come from <a href="https://kybernetik.com.au/inspector-gadgets">Inspector Gadgets Pro</a> and allow you to view the Inspector of the referenced object without needing to change your selection. In this case it allows us to view the import settings of the <code>AnimationClip</code>s, but we will not be using it here since all their settings are already configured correctly.</summary><p>
</p><p>Unfortunately, due to limitations in Unity's GUI system, when this feature is used on the elements of an array the object's Inspector will be drawn below the entire array rather than directly below the object's field.</p>
<p><img src="nested-object-drawer.gif" class="img-responsive"></p>
<p></p></details><p></p>
<p>Now we need a <a href="../scene-setup#buttons">UI Button</a> to call our <code>PlaySequence</code> method:</p>
<ol>
<li>Right click in the Hierarchy window and create a new <em>UI/Button</em>. This creates a <em>Canvas</em> with a <em>Button</em> as its child and an <em>Event System</em>.</li>
<li>Click on the <code>Anchor Presets</code> button in the top left of the <em>Button</em>'s <code>RectTransform</code> component.</li>
<li>Hold both <code>Shift</code> and <code>Alt</code> then click on the <em>Bottom Center</em> preset to move the anchors, pivot, and position.</li>
<li>Go to the <code>On Click</code> event of the <code>Button</code> component and use the <code>+</code> button to add a new function to call.</li>
<li>Drag the <em>DefaultHumanoid</em> from the Hierarchy window into the object reference field of the new function.</li>
<li>Use the dropdown menu to select the <code>SequenceCoroutineTutorial -&gt; PlaySequence</code> method we created earlier.</li>
<li>Select the <em>Text</em> object under the <em>Button</em> and change its text to "Play Sequence".</li>
</ol>
<p><img src="button-setup.gif" class="img-responsive"></p>
<p>Now if we enter Play Mode we can see the sequence in action.</p>
<p><img src="basic-sequence-play.gif" class="img-responsive"></p>
<p>Remember to exit Play Mode after you are done looking.</p>
<h1 id="animation-names">Animation Names</h1>
<p>That's not the best sequence ever, but before we start fixing it up it would be nice to have a clear indication of which animation is playing, so let's add some text to show the name of the current animation.</p>
<p>Add a <code>TextMesh</code> field:</p>
<pre><code class="language-cs">[SerializeField] private TextMesh _Text;
</code></pre>
<p>Now we need to set the text whenever we play an animation so let's make a new method to do both at once:</p>
<pre><code class="language-cs">private void Play(AnimationClip animation)
{
    _Text.text = animation.name;
    _Animancer.Play(animation);
}
</code></pre>
<p>That would allow us to call <code>Play(_Animations[0])</code> and <code>Play(_Animations[i])</code>, but for the sake of demonstration we can go one step further by changing the parameter to an <code>int index</code>:</p>
<pre><code class="language-cs">private void Play(int index)
{
    var animation = _Animations[index];
    _Text.text = animation.name;
    _Animancer.Play(animation);
}
</code></pre>
<p>Now we can call <code>Play(0)</code> and <code>Play(i)</code> instead. In such a simple self-contained script the difference doesn't really matter, but if you were to expose this method to other scripts you would consider whether you want them to be playing animations managed in this script by index or passing in their own animations which this script does not need to know anything about.</p>
<p></p><details><summary>Once we change all <code>_Animancer.Play</code> calls to use our <code>Play</code> method the full script looks like this:</summary><p>
</p><pre><code class="language-cs">using Animancer;
using System.Collections;
using UnityEngine;

public sealed class SequenceCoroutineTutorial : MonoBehaviour
{
    [SerializeField] private <a href="/animancer/api/Animancer/AnimancerComponent">AnimancerComponent</a> _Animancer;
    [SerializeField] private TextMesh _Text;
    [SerializeField] private AnimationClip[] _Animations;

    private void OnEnable()
    {
        Play(0);
    }

    public void PlaySequence()
    {
        StopAllCoroutines();
        StartCoroutine(CoroutineAnimationSequence());
    }

    private IEnumerator CoroutineAnimationSequence()
    {
        for (int i = 1; i &lt; _Animations.Length; i++)
        {
            Play(i);

            yield return new WaitForSeconds(1);
        }

        Play(0);
    }

    private void Play(int index)
    {
        var animation = _Animations[index];
        _Text.text = animation.name;
        _Animancer.Play(animation);
    }
}
</code></pre>
<p></p></details><p></p>
<p>Save the script and return to Unity to create and connect the text object:</p>
<ol>
<li>Right click in the Hierarchy window and create a new <em>3D Object/3D Text</em> and call it <em>Animation Name</em>.</li>
<li>Set its <em>Position</em> to <code>0, 2, 0</code>. <a href="https://kybernetik.com.au/inspector-gadgets">Inspector Gadgets</a> allows you to <em>Middle Click</em> any field in the <code>Transform</code> component to reset its value, but otherwise you can simply reset the <code>X</code> and <code>Z</code> values manually.</li>
<li>Set its <em>Rotation</em> to <code>0, 180, 0</code>.</li>
<li>Set its <em>Scale</em> to <code>0.1, 0.1, 0.1</code>. <a href="https://kybernetik.com.au/inspector-gadgets">Inspector Gadgets</a> shows <em>Scale</em> as a single field when all values are the same (the <code>=</code> button separates the fields), but otherwise you can just type the same value in each field.</li>
<li>Configure the <code>TextMesh</code>: <code>Text = "Animation Name"</code>, <code>Anchor = Lower Center</code>, <code>Font Size = 25</code>.</li>
<li>Go to our <code>SequenceCoroutineTutorial</code> component on the <em>DefaultHumanoid</em> and drag the <em>Animation Name</em> object into the <code>Text</code> field we just added to the script.</li>
</ol>
<p>Now in Play Mode we will be able to see the name of the animation being played.</p>
<p><img src="create-text.gif" class="img-responsive"></p>
<p>Remember to exit Play Mode after you are done looking.</p>
<h1 id="animation-durations">Animation Durations</h1>
<p>Giving every animation the same arbitrary duration is clearly not the best way to do things because each animation can have a different length. Fortunately, since we have the <code>AnimationClip</code>s, we have direct access to their <code>length</code>s so we could change the <code>WaitForSeconds</code> instruction to use that instead of a constant 1:</p>
<pre><code class="language-cs">Play(i);
yield return new WaitForSeconds(_Animations[i].length);
</code></pre>
<p>That would definitely get the job done for this situation, but it is not necessarily the best way to do it. For example, if something else started a different animation or changed the speed of this one, the coroutine would still be waiting for the original fixed amount of time.</p>
<p>Instead, we can change our <code>Play</code> method to return the <code><a href="/animancer/api/Animancer/AnimancerState">AnimancerState</a></code> it gets from <code>_Animancer.Play</code> and use that state as the <code>yield</code> instruction. This will wait until that state either reaches the end or stops playing for any reason, including any interruptions, speed changes, or even direct manipulation of its <code>Time</code> property:</p>
<pre><code class="language-cs">private <a href="/animancer/api/Animancer/AnimancerState">AnimancerState</a> Play(int index)
{
    var animation = _Animations[index];
    _Text.text = animation.name;
    return _Animancer.Play(animation);
}

...

var state = Play(i);
yield return state;
</code></pre>
<p></p><details><summary>The full script now looks like this:</summary><p>
</p><pre><code class="language-cs">using Animancer;
using System.Collections;
using UnityEngine;
using UnityEngine.UI;

public sealed class SequenceCoroutineTutorial : MonoBehaviour
{
    [SerializeField] private <a href="/animancer/api/Animancer/AnimancerComponent">AnimancerComponent</a> _Animancer;
    [SerializeField] private TextMesh _Text;
    [SerializeField] private AnimationClip[] _Animations;

    private void OnEnable()
    {
        Play(0);
    }

    public void PlaySequence()
    {
        StopAllCoroutines();
        StartCoroutine(CoroutineAnimationSequence());
    }

    private IEnumerator CoroutineAnimationSequence()
    {
        for (int i = 1; i &lt; _Animations.Length; i++)
        {
            var state = Play(i);
            yield return state;
        }

        Play(0);
    }

    private <a href="/animancer/api/Animancer/AnimancerState">AnimancerState</a> Play(int index)
    {
        var animation = _Animations[index];
        _Text.text = animation.name;
        return _Animancer.Play(animation);
    }
}
</code></pre>
<p></p></details><p></p>
<p>And if we try it in Play Mode, this time it will play through each animation fully.</p>
<p><img src="sequence-with-basic-time.gif" class="img-responsive"></p>
<p>Remember to exit Play Mode after you are done looking.</p>
<h1 id="alternate-loop-duration">Alternate Loop Duration</h1>
<p>Playing through each animation once works well for non-looping animations like <em>GolfSwing</em>, but not so well for looping ones. <em>Walk</em> and <em>Run</em> only play one step with each foot and <em>GolfSwingReady</em> only shows for a brief moment since it is only a stationary pose.</p>
<p>So let's add another field to specify the duration to show looping animations.</p>
<pre><code class="language-cs">[SerializeField] private float _LoopDuration = 3;
</code></pre>
<p>3 seconds seems like a reasonable default value, but since it's a serializable field we can use the Inspector to adjust it if we want to.</p>
<p>Now we can use that field in our coroutine depending on whether each animation is looping or not:</p>
<pre><code class="language-cs">var state = Play(i);

if (state.IsLooping)
    yield return new WaitForSeconds(_LoopDuration);
else
    yield return state;
</code></pre>
<p></p><details><summary>The full script now looks like this:</summary><p>
</p><pre><code class="language-cs">using Animancer;
using System.Collections;
using UnityEngine;

public sealed class SequenceCoroutineTutorial : MonoBehaviour
{
    [SerializeField] private <a href="/animancer/api/Animancer/AnimancerComponent">AnimancerComponent</a> _Animancer;
    [SerializeField] private TextMesh _Text;
    [SerializeField] private float _LoopDuration = 3;
    [SerializeField] private AnimationClip[] _Animations;

    private void OnEnable()
    {
        Play(0);
    }

    public void PlaySequence()
    {
        StopAllCoroutines();
        StartCoroutine(CoroutineAnimationSequence());
    }

    private IEnumerator CoroutineAnimationSequence()
    {
        for (int i = 1; i &lt; _Animations.Length; i++)
        {
            var state = Play(i);

            if (state.IsLooping)
                yield return new WaitForSeconds(_LoopDuration);
            else
                yield return state;
        }

        Play(0);
    }

    private <a href="/animancer/api/Animancer/AnimancerState">AnimancerState</a> Play(int index)
    {
        var animation = _Animations[index];
        _Text.text = animation.name;
        return _Animancer.Play(animation);
    }
}
</code></pre>
<p></p></details><p></p>
<p>And if we try it in Play Mode, we get to see the looping animations for 3 seconds each while the <em>GolfSwing</em> just plays its full length once.</p>
<p><img src="sequence-with-loop-time.gif" class="img-responsive"></p>
<p>Remember to exit Play Mode after you are done looking.</p>
<h1 id="transitions">Transitions</h1>
<p>What we have made so far works pretty well, but doesn't give us any convenient way to adjust the details of the individual animations. For example, the <em>GolfSwingReady</em> animation is just a stationary pose so it really doesn't need the same 3 seconds that we give <em>Walk</em> and <em>Run</em>.</p>
<p>We could turn <code>_LoopDuration</code> into a <code>float[]</code> with each value corresponding to one of the <code>_Animations</code>, but that wouldn't be particularly convenient to work with in the Inspector and would rely on the user to always make sure both arrays have the same size. This would be even worse if we wanted to specify transition durations and play speeds as well.</p>
<p>This is where <a href="../../../manual/transitions">Transitions</a> come in. They are serializable classes that package additional fields along with each <code>AnimationClip</code>.</p>
<p>So let's make a few changes to the script:</p>
<ol>
<li>Change the <code>_Animations</code> field type to <code>ClipState.Transition[]</code>. A <code><a href="/animancer/api/Animancer/ClipState">ClipState</a></code> is a type of <code><a href="/animancer/api/Animancer/AnimancerState">AnimancerState</a></code> that is used to play a single <code>AnimationClip</code> so we want transitions that will create <code><a href="/animancer/api/Animancer/ClipState">ClipState</a></code>s when we play them.</li>
<li>Remove the <code>_LoopDuration</code> field and change the coroutine back to just <code>yield return state;</code>.</li>
<li>Change the <code>Play</code> method to get the animation name from <code>animation.Clip.name</code> instead of just <code>animation.name</code>. Since it already uses <code>var animation = ...</code> instead of specifying the exact type (<code>AnimationClip animation = ...</code>) we do not need to modify that part after changing the <code>_Animations</code> field.</li>
</ol>
<p></p><details><summary>The full script now looks like this:</summary><p>
</p><pre><code class="language-cs">using Animancer;
using System.Collections;
using UnityEngine;

public sealed class SequenceCoroutineTutorial : MonoBehaviour
{
    [SerializeField] private <a href="/animancer/api/Animancer/AnimancerComponent">AnimancerComponent</a> _Animancer;
    [SerializeField] private TextMesh _Text;
    [SerializeField] private ClipState.Transition[] _Animations;

    private void OnEnable()
    {
        Play(0);
    }

    public void PlaySequence()
    {
        StopAllCoroutines();
        StartCoroutine(CoroutineAnimationSequence());
    }

    private IEnumerator CoroutineAnimationSequence()
    {
        for (int i = 1; i &lt; _Animations.Length; i++)
        {
            var state = Play(i);
            yield return state;
        }

        Play(0);
    }

    private <a href="/animancer/api/Animancer/AnimancerState">AnimancerState</a> Play(int index)
    {
        var animation = _Animations[index];
        _Text.text = animation.Clip.name;
        return _Animancer.Play(animation);
    }
}
</code></pre>
<p></p></details><p></p>
<p>Unfortunately, changing the field from direct <code>AnimationClip</code> references to another class that happens to contain an <code>AnimationClip</code> means that Unity will lose the references we assigned earlier, so you need to select the <em>DefaultHumanoid</em> and assign all the animations again.</p>
<p><img src="transitions-collapsed.png" class="img-responsive"></p>
<p>As you can see, the fields now have foldout arrows and an "Eye" icon on the right (which allows you to preview each transition). Unlike the <a href="https://kybernetik.com.au/inspector-gadgets">Inspector Gadgets</a> foldout arrows, these ones expand to show the details of each transition. See the <a href="../../../manual/transitions">Transitions</a> page for a full explanation of all the details, but the only one we care about right now is the <code>End Time</code> which will determine how long the <code>yield</code> lasts:</p>
<ol>
<li>For the <em>Idle</em> animation it does not matter because we are not waiting for it to finish. Changing the <code>End Time</code> will not do anything on its own if your code is not <a href="../../../manual/events/end">waiting for the animation to end</a>.</li>
<li>For the <em>Walk</em> and <em>Run</em> animations we want them to each show a few walk cycles. Set them using the normalized time field (the left one with the "x"). 3 loops of the <em>Walk</em> takes about 3 seconds but since the <em>Run</em> is shorter it can do 4 loops in a similar amount of time.</li>
<li>The <em>GolfSwingReady</em> animation is a stationary pose so we do not really care about the way it loops and can just set it to take 1 second (this time using the right field with the "s").</li>
<li>Unlike the others, the <em>GolfSwing</em> animation is not looping so we just want it to play through once and therefore we do not need to change the <code>End Time</code>.</li>
</ol>
<p><em>As noted at the start of this example, the ability to set <a href="../../../manual/events/end">Custom End Times</a> like this is a <a href="/animancer/pro"><strong>Pro-Only</strong></a> feature. Animancer Lite allows you to try it out in the Unity Editor, but it will always use the default end time (the actual end of the animation) in runtime builds. See the <a href="../../../introduction/features">Feature Comparison</a> for more information.</em></p>
<p><img src="transition-setup.gif" class="img-responsive"></p>
<p><img src="transition-sequence.gif" class="img-responsive"></p>
<h1 id="assertions">Assertions</h1>
<p>That is all we are going to do with the sequence itself, but there is one more advantage to the approach used here which would not be possible when using an Animator Controller: your scripts can easily check and validate their expectations.</p>
<p>The script we have written would give a generic <code>IndexOutOfRangeException</code> if we did not set up any of the animations in the Inspector and if we only added one animation it would actually work fine but simply do nothing more than play that animation, which defeats its purpose. So we can use <code>Debug.Assert</code> in our <code>OnEnable</code> method to ensure that there are at least two animations and give a more helpful error message if there are not:</p>
<pre><code class="language-cs">Debug.Assert(_Animations.Length &gt; 1, "Must have more than 1 animation assigned.");
</code></pre>
<p><code>Debug.Assert</code> is like saying "<em>(condition) must be true, so give error (message) if it is not</em>". If you check its definition, you can see that it has a <code>[Conditional("UNITY_ASSERTIONS")]</code> attribute which means that any calls to that method will be automatically removed if that conditional compilation symbol is not defined, as if we had put <code>#if UNITY_ASSERTIONS</code> before it and <code>#endif</code> after.</p>
<p>In the case of <code>UNITY_ASSERTIONS</code>, it is defined in the Unity Editor and in Development Builds, but not in regular release builds. This allows us to validate our data to catch issues during development without affecting the performance of the released game.</p>
<p>Since we have access to the animation details, we can enforce specific restrictions on them as well. The script would still work fine with a non-looping animation, but since we are using it as an <em>Idle</em> animation, it would probably not be appropriate to just play it once and freeze on the last frame. So we can also check that:</p>
<pre><code class="language-cs">Debug.Assert(_Animations[0].Clip.isLooping, "The first animation should be looping.");
</code></pre>
<p></p><details><summary>This is what the final script looks like:</summary><p>
</p><pre><code class="language-cs">using Animancer;
using System.Collections;
using UnityEngine;

public sealed class SequenceCoroutineTutorial : MonoBehaviour
{
    [SerializeField] private <a href="/animancer/api/Animancer/AnimancerComponent">AnimancerComponent</a> _Animancer;
    [SerializeField] private TextMesh _Text;
    [SerializeField] private ClipState.Transition[] _Animations;

    private void OnEnable()
    {
        Debug.Assert(_Animations.Length &gt; 1, "Must have more than 1 animation assigned.");
        Debug.Assert(_Animations[0].Clip.isLooping, "The first animation should be looping.");

        Play(0);
    }

    public void PlaySequence()
    {
        StopAllCoroutines();
        StartCoroutine(CoroutineAnimationSequence());
    }

    private IEnumerator CoroutineAnimationSequence()
    {
        for (int i = 1; i &lt; _Animations.Length; i++)
        {
            var state = Play(i);
            yield return state;
        }

        Play(0);
    }

    private <a href="/animancer/api/Animancer/AnimancerState">AnimancerState</a> Play(int index)
    {
        var animation = _Animations[index];
        _Text.text = animation.Clip.name;
        return _Animancer.Play(animation);
    }
}
</code></pre>
<p></p></details><p></p>

	</section>
                
            </div>           
            
            <!-- Footer -->
            <footer class="main-footer">
            </footer>
            
        </div>
        <div class="wrapper bottom-wrapper">
            <footer class="bottom-footer">
                <strong><div style="text-align:left; display:flex">

<div>
<p>Documentation</p>
<p><a href="/animancer/docs/examples">Examples</a></p>
<p><a href="/animancer/docs/manual">User Manual</a></p>
<p><a href="/animancer/docs/changes">Change Log</a></p>
</div>

<div style="width:10%"></div>

<div>
<p>Download</p>
<p><a href="https://kybernetik.itch.io/animancer-pro">Itch.io (Recommended)</a></p>
<p><a href="https://assetstore.unity.com/packages/tools/animation/animancer-pro-116514?aid=1100l8ah5">Asset Store (Animancer Pro)</a></p>
<p><a href="https://assetstore.unity.com/packages/tools/animation/animancer-lite-116516?aid=1100l8ah5">Asset Store (Animancer Lite)</a></p>
</div>

<div style="width:10%"></div>

<div>
<p>Contact</p>
<p><a href="https://github.com/KybernetikGames/animancer/issues">Github Issues</a></p>
<p><a href="/animancer/forum">Unity Forum</a></p>
<p><a href="mailto:animancer@kybernetik.com.au?subject=Animancer">Email</a></p>
</div>

<div style="width:10%"></div>

<div>
<p>Other Assets</p>
<p><a href="/inspector-gadgets">Inspector Gadgets</a></p>
<p><a href="/weaver">Weaver</a></p>
<p><a href="/ultevents">UltEvents</a></p>
</div>

</div></strong>
            </footer>
        </div>
        <a href="javascript:" id="return-to-top"><i class="fa fa-chevron-up"></i></a>
        
        <script>           
            // Close the sidebar if we select an anchor link
            $(".main-sidebar a[href^='#']:not('.expand')").click(function(){
                $(document.body).removeClass('sidebar-open');
            });
            
            $(document).ready(function() {
                mermaid.initialize(
                {
                    flowchart:
                    {
                        useMaxWidth: false
                    },
					startOnLoad: false,
					cloneCssStyles: false
                });     
                mermaid.init(undefined, ".mermaid");

                // Remove the max-width setting that Mermaid sets
                var mermaidSvg = $('.mermaid svg');
                mermaidSvg.addClass('img-responsive');
                mermaidSvg.css('max-width', '');

                // Make it scrollable
				var target = document.querySelector(".mermaid svg");
				if(target !== null)
				{
					var panZoom = window.panZoom = svgPanZoom(target, {
						zoomEnabled: true,
						controlIconsEnabled: true,
						fit: true,
						center: true,
                        maxZoom: 20,
                        zoomScaleSensitivity: 0.6
					});			                          

                    // Do the reset once right away to fit the diagram
                    panZoom.resize();
                    panZoom.fit();
                    panZoom.center();
                    
                    $(window).resize(function(){
                        panZoom.resize();
                        panZoom.fit();
                        panZoom.center();
                    });
				}
                
                $('pre code').each(function(i, block) {
                    hljs.highlightBlock(block);
                });  
            });

            hljs.initHighlightingOnLoad();

            // Back to top
            $(window).scroll(function() {
                if ($(this).scrollTop() >= 200) {        // If page is scrolled more than 50px
                    $('#return-to-top').fadeIn(1000);    // Fade in the arrow
                } else {
                    $('#return-to-top').fadeOut(1000);   // Else fade out the arrow
                }
            });
            $('#return-to-top').click(function() {      // When arrow is clicked
                $('body,html').animate({
                    scrollTop : 0                       // Scroll to top of body
                }, 500);
            });
        </script>
    
</body></html>