<!DOCTYPE html><html><head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=Edge">
        <meta name="description">
        <meta name="keywords" content="static content generator,static site generator,static site,HTML,web development,.NET,C#,Razor,Markdown,YAML">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="shortcut icon" href="/animancer/assets/img/favicon.ico" type="image/x-icon">
        <link rel="icon" href="/animancer/assets/img/favicon.ico" type="image/x-icon">
        <title>Animancer - 06-03 Brains</title>
        <link href="/animancer/assets/css/highlight.css" rel="stylesheet">
        <link href="/animancer/assets/css/bootstrap/bootstrap.css" rel="stylesheet">
        <link href="/animancer/assets/css/adminlte/AdminLTE.css" rel="stylesheet">
        <link href="/animancer/assets/css/theme/theme.css" rel="stylesheet">
        <link href="//fonts.googleapis.com/css?family=Roboto+Mono:400,700|Roboto:400,400i,700,700i" rel="stylesheet">
        <link href="/animancer/assets/css/font-awesome.min.css" rel="stylesheet" type="text/css">
        <link href="/animancer/assets/css/override.css" rel="stylesheet">
        <script src="/animancer/assets/js/jquery-2.2.3.min.js"></script>
        <script src="/animancer/assets/js/bootstrap.min.js"></script>        
        <script src="/animancer/assets/js/app.min.js"></script>         
        <script src="/animancer/assets/js/highlight.pack.js"></script>   
        <script src="/animancer/assets/js/jquery.slimscroll.min.js"></script>
        <script src="/animancer/assets/js/jquery.sticky-kit.min.js"></script>
        <script src="/animancer/assets/js/mermaid.min.js"></script>
        <script src="/animancer/assets/js/svg-pan-zoom.min.js"></script>
        <!--[if lt IE 9]>
        <script src="/animancer/assets/js/html5shiv.min.js"></script>
        <script src="/animancer/assets/js/respond.min.js"></script>
        <![endif]-->  

        
    </head>
    <body class="hold-transition wyam layout-boxed  ">    
        <div class="top-banner"></div>
        <div class="wrapper with-container">
            <!-- Header -->
            <header class="main-header">   
                     
                <a href="/animancer/" class="logo">
                            <span>Animancer</span>
                </a>   
                         
                <nav class="navbar navbar-static-top" role="navigation">
                    <!-- Sidebar toggle button-->
                        <a href="#" class="sidebar-toggle visible-xs-block" data-toggle="offcanvas" role="button">
                            <span class="sr-only">Toggle side menu</span>
                            <i class="fa fa-chevron-circle-right"></i>
                        </a>
                                        
                    <div class="navbar-header">
                        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse">
                            <span class="sr-only">Toggle side menu</span>
                            <i class="fa fa-chevron-circle-down"></i>
                        </button>
                    </div>
            
                    <!-- Collect the nav links, forms, and other content for toggling -->
                    <div class="collapse navbar-collapse pull-left" id="navbar-collapse">
                        <ul class="nav navbar-nav">                            
                                    <li><a href="/animancer/docs/introduction/features"><img src="/animancer/images/icons/features.png" height="20px" width="20px" style="left:-7px"> Features</a></li>
        <li><a href="/animancer/docs/download"><img src="/animancer/images/icons/download.png" height="20px" width="20px" style="left:-7px"> Download</a></li>
        <li class="active"><a href="/animancer/docs"><img src="/animancer/images/icons/docs.png" height="20px" width="7.5px" style="left:-5px"> Documentation</a></li>
        <li><a href="/animancer/docs/help"><img src="/animancer/images/icons/help.png" height="20px" width="10.625px" style="left:-4px"> Help</a></li>
        <li><a href="/animancer/api/Animancer/AnimancerComponent"><img src="/animancer/images/icons/api.png" height="20px" width="18.125px" style="left:-3px"> API v8.1</a></li>
        <li><a href="https://kybernetik.com.au"><img src="/animancer/images/icons/kybernetik.png" height="20px" width="20px" style="left:-2px"> Other Assets</a></li>

<li style="width:100%">
<form class="search-form" name="search" action="/animancer/search">
<span><input class="search-input" id="search" name="q" type="text" placeholder="Search..."></span>
<div class="search-button"><button type="submit"><i class="fa fa-search"></i></button></div>
</form>
</li> 
                        </ul>       
                    </div>
                    <!-- /.navbar-collapse -->
                
                    <!-- Navbar Right Menu -->
                </nav>
            </header>
            
            <!-- Left side column. contains the logo and sidebar -->
            <aside class="main-sidebar ">
                <section class="infobar" data-spy="affix" data-offset-top="60" data-offset-bottom="200"> 
                    	
    <div id="infobar-headings"><h6>On This Page</h6><p><a href="#summary">Summary</a></p>
<p><a href="#controls">Controls</a></p>
<p><a href="#overview">Overview</a></p>
<p><a href="#why-brains">Why Brains?</a></p>
<p><a href="#parameters">Parameters</a></p>
<p><a href="#moving-character-brain">Moving Character Brain</a></p>
<p><a href="#move-state">Move State</a></p>
<p><a href="#walking-and-running">Walking and Running</a></p>
<p><a href="#root-motion">Root Motion</a></p>
<p><a href="#turning">Turning</a></p>
<p><a href="#conclusion">Conclusion</a></p>
<p><a href="#what-next">What Next?</a></p>
<hr class="infobar-hidden">
</div>

                </section>
                <section class="sidebar">    
                                     
                    

                    <ul class="sidebar-menu">
                        

                <li><a href="/animancer/docs/download">Download</a></li>
                <li class="treeview">
                    <a href="/animancer/docs/introduction">Introduction</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/introduction/features">Features</a></li>
                <li class="treeview">
                    <a href="/animancer/docs/introduction/mecanim-vs-animancer">Mecanim vs. Animancer</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li class="treeview">
                    <a href="/animancer/docs/introduction/mecanim-vs-animancer/why">Why Replace Mecanim?</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/introduction/mecanim-vs-animancer/why/simplicity">Simplicity</a></li>
                <li><a href="/animancer/docs/introduction/mecanim-vs-animancer/why/transparency">Transparency</a></li>
                <li><a href="/animancer/docs/introduction/mecanim-vs-animancer/why/adaptability">Adaptability</a></li>
                <li><a href="/animancer/docs/introduction/mecanim-vs-animancer/why/clarity">Clarity</a></li>
                <li><a href="/animancer/docs/introduction/mecanim-vs-animancer/why/safety">Safety</a></li>
                <li><a href="/animancer/docs/introduction/mecanim-vs-animancer/why/reliability">Reliability</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/introduction/mecanim-vs-animancer/comparison">Comparison</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/introduction/mecanim-vs-animancer/comparison/playing">Playing</a></li>
                <li><a href="/animancer/docs/introduction/mecanim-vs-animancer/comparison/waiting">Waiting</a></li>
                <li><a href="/animancer/docs/introduction/mecanim-vs-animancer/comparison/speed-and-time">Speed and Time</a></li>
                <li><a href="/animancer/docs/introduction/mecanim-vs-animancer/comparison/weapon-animations">Weapon Animations</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/docs/introduction/mecanim-vs-animancer/performance">Performance</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/docs/introduction/glossary">Glossary</a></li>
                <li><a href="/animancer/docs/introduction/cs">C# in Unity</a></li>

                    </ul>
                </li>
                <li class="treeview active">
                    <a href="/animancer/docs/samples">Samples</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li class="treeview">
                    <a href="/animancer/docs/samples/basics">01 Basics</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/samples/basics/quick-play">01-01 Quick Play</a></li>
                <li><a href="/animancer/docs/samples/basics/movement">01-02 Basic Movement</a></li>
                <li><a href="/animancer/docs/samples/basics/action">01-03 Basic Action</a></li>
                <li><a href="/animancer/docs/samples/basics/transitions">01-04 Transitions</a></li>
                <li><a href="/animancer/docs/samples/basics/character">01-05 Basic Character</a></li>
                <li><a href="/animancer/docs/samples/basics/library">01-06 Library Character</a></li>
                <li><a href="/animancer/docs/samples/basics/scene-setup">Basic Scene Setup</a></li>
                <li><a href="/animancer/docs/samples/basics/input">Input</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/samples/fine-control">02 Fine Control</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/samples/fine-control/named">02-01 Named Character</a></li>
                <li><a href="/animancer/docs/samples/fine-control/live-inspector">02-02 Live Inspector</a></li>
                <li><a href="/animancer/docs/samples/fine-control/doors">02-03 Doors</a></li>
                <li><a href="/animancer/docs/samples/fine-control/update-rate">02-04 Update Rate</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/samples/mixers">03 Mixers</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/samples/mixers/linear">03-01 Linear Mixers</a></li>
                <li><a href="/animancer/docs/samples/mixers/directional">03-02 Directional Mixers</a></li>
                <li><a href="/animancer/docs/samples/mixers/serialization">03-03 Animation Serialization</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/samples/layers">04 Layers</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/samples/layers/basic">04-01 Basic Layers</a></li>
                <li><a href="/animancer/docs/samples/layers/dynamic">04-02 Dynamic Layers</a></li>
                <li><a href="/animancer/docs/samples/layers/face">04-03 Facial Expressions</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/samples/events">05 Events</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/samples/events/golf">05-01 Golf Events</a></li>
                <li><a href="/animancer/docs/samples/events/footsteps">05-02 Footstep Events</a></li>

                    </ul>
                </li>
                <li class="treeview active">
                    <a href="/animancer/docs/samples/fsm">06 State Machines</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/samples/fsm/characters">06-01 Characters</a></li>
                <li><a href="/animancer/docs/samples/fsm/interruptions">06-02 Interruptions</a></li>
                <li class="selected"><a href="/animancer/docs/samples/fsm/brains">06-03 Brains</a></li>
                <li><a href="/animancer/docs/samples/fsm/weapons">06-04 Weapons</a></li>
                <li><a href="/animancer/docs/samples/fsm/platformer">Platformer Game Kit</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/samples/sprites">07 Sprites</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/samples/sprites/basics">07-01 Directional Basics</a></li>
                <li><a href="/animancer/docs/samples/sprites/character">07-02 Directional Character</a></li>
                <li><a href="/animancer/docs/samples/sprites/character-3d">07-03 Directional Character 3D</a></li>
                <li><a href="/animancer/docs/samples/sprites/platformer">Platformer Game Kit</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/samples/animator-controllers">08 Animator Controllers</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/samples/animator-controllers/character">08-01 Hybrid Character</a></li>
                <li class="treeview">
                    <a href="/animancer/docs/samples/animator-controllers/3d-game-kit">08-02 3D Game Kit</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/samples/animator-controllers/3d-game-kit/problems">Problems with the Mecanim Character</a></li>
                <li><a href="/animancer/docs/samples/animator-controllers/3d-game-kit/respawn">Respawn</a></li>
                <li><a href="/animancer/docs/samples/animator-controllers/3d-game-kit/idle">Idle</a></li>
                <li class="treeview">
                    <a href="/animancer/docs/samples/animator-controllers/3d-game-kit/locomotion">Locomotion</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/samples/animator-controllers/3d-game-kit/locomotion/movement">Movement</a></li>
                <li><a href="/animancer/docs/samples/animator-controllers/3d-game-kit/locomotion/turning">Turning</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/docs/samples/animator-controllers/3d-game-kit/airborne">Airborne</a></li>
                <li><a href="/animancer/docs/samples/animator-controllers/3d-game-kit/landing">Landing</a></li>
                <li><a href="/animancer/docs/samples/animator-controllers/3d-game-kit/attack">Attack</a></li>
                <li><a href="/animancer/docs/samples/animator-controllers/3d-game-kit/flinch">Flinch</a></li>
                <li><a href="/animancer/docs/samples/animator-controllers/3d-game-kit/die">Die</a></li>

                    </ul>
                </li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/samples/ik">09 Inverse Kinematics</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/samples/ik/puppet">09-01 Puppet</a></li>
                <li><a href="/animancer/docs/samples/ik/uneven-ground">09-02 Uneven Ground</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/samples/jobs">10 Animation Jobs</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/samples/jobs/two-bone-ik">10-01 Two Bone IK</a></li>
                <li><a href="/animancer/docs/samples/jobs/damping">10-02 Damping</a></li>
                <li><a href="/animancer/docs/samples/jobs/hit-impacts">10-03 Hit Impacts</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/samples/integration">Integration</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/samples/integration/animation-rigging">Animation Rigging</a></li>
                <li><a href="/animancer/docs/samples/integration/dynamic-bone">Dynamic Bone</a></li>
                <li><a href="/animancer/docs/samples/integration/final-ik">Final IK</a></li>
                <li><a href="/animancer/docs/samples/integration/hairibar-ragdoll">Hairibar Ragdoll</a></li>
                <li><a href="/animancer/docs/samples/integration/lod">Level of Detail (LOD)</a></li>
                <li><a href="/animancer/docs/samples/integration/odin-inspector">Odin Inspector</a></li>
                <li><a href="/animancer/docs/samples/integration/puppet-master">Puppet Master</a></li>
                <li><a href="/animancer/docs/samples/integration/spine">Spine</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/docs/samples/no-video-tutorials">No Video Tutorials</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/manual">User Manual</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li class="treeview">
                    <a href="/animancer/docs/manual/getting">Getting Animations</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/manual/getting/mixamo">Mixamo</a></li>
                <li><a href="/animancer/docs/manual/getting/importing">Importing</a></li>
                <li><a href="/animancer/docs/manual/getting/animation-window">Animation Window</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/manual/playing">Playing Animations</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/manual/playing/states">States</a></li>
                <li><a href="/animancer/docs/manual/playing/keys">Keys</a></li>
                <li><a href="/animancer/docs/manual/playing/inspector">Inspector</a></li>
                <li><a href="/animancer/docs/manual/playing/component-types">Component Types</a></li>
                <li><a href="/animancer/docs/manual/playing/edit-mode">Playing in Edit Mode</a></li>
                <li><a href="/animancer/docs/manual/playing/directional-sets">Directional Animation Sets</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/manual/transitions">Transitions</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/manual/transitions/types">Transition Types</a></li>
                <li><a href="/animancer/docs/manual/transitions/assets">Transition Assets</a></li>
                <li><a href="/animancer/docs/manual/transitions/libraries">Transition Libraries</a></li>
                <li><a href="/animancer/docs/manual/transitions/previews">Transition Previews</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/manual/blending">Blending</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li class="treeview">
                    <a href="/animancer/docs/manual/blending/fading">Fading</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/manual/blending/fading/modes">Fade Modes</a></li>
                <li><a href="/animancer/docs/manual/blending/fading/custom">Custom Easing</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/manual/blending/layers">Layers</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/manual/blending/layers/weighted">Weighted Mask Layers</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/manual/blending/mixers">Mixers</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/manual/blending/mixers/creation">Mixer Creation</a></li>
                <li><a href="/animancer/docs/manual/blending/mixers/synchronization">Mixer Synchronization</a></li>

                    </ul>
                </li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/manual/events">Events</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/manual/events/animation">Animation Events</a></li>
                <li class="treeview">
                    <a href="/animancer/docs/manual/events/animancer">Animancer Events</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/manual/events/animancer/usage">Usage</a></li>
                <li><a href="/animancer/docs/manual/events/animancer/behaviour">Behaviour</a></li>
                <li><a href="/animancer/docs/manual/events/animancer/parameters">Parameters</a></li>
                <li><a href="/animancer/docs/manual/events/animancer/utilities">Event Utilities</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/manual/events/end">End Events</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/manual/events/end/alternatives">Alternatives to End Events</a></li>

                    </ul>
                </li>

                    </ul>
                </li>
                <li><a href="/animancer/docs/manual/parameters">Parameters</a></li>
                <li class="treeview">
                    <a href="/animancer/docs/manual/fsm">Finite State Machines</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/manual/fsm/overview">Overview</a></li>
                <li><a href="/animancer/docs/manual/fsm/state-types">1. State Types</a></li>
                <li><a href="/animancer/docs/manual/fsm/initialization">2. Initialization</a></li>
                <li><a href="/animancer/docs/manual/fsm/changing-states">3. Changing States</a></li>
                <li><a href="/animancer/docs/manual/fsm/keys">Keys</a></li>
                <li class="treeview">
                    <a href="/animancer/docs/manual/fsm/utilities">Utilities</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/manual/fsm/utilities/input-buffer">Input Buffers</a></li>
                <li><a href="/animancer/docs/manual/fsm/utilities/state-selector">State Selectors</a></li>
                <li><a href="/animancer/docs/manual/fsm/utilities/owned-states">Owned States</a></li>

                    </ul>
                </li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/manual/animator-controllers">Animator Controllers</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/manual/animator-controllers/conversion">Conversion</a></li>
                <li><a href="/animancer/docs/manual/animator-controllers/controller-states">Controller States</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/docs/manual/timeline">Timeline</a></li>
                <li><a href="/animancer/docs/manual/ik">Inverse Kinematics</a></li>
                <li class="treeview">
                    <a href="/animancer/docs/manual/tools">Animancer Tools</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/manual/tools/pack-textures">Pack Textures</a></li>
                <li><a href="/animancer/docs/manual/tools/modify-sprites">Modify Sprites</a></li>
                <li><a href="/animancer/docs/manual/tools/rename-sprites">Rename Sprites</a></li>
                <li><a href="/animancer/docs/manual/tools/generate-sprite-animations">Generate Sprite Animations</a></li>
                <li><a href="/animancer/docs/manual/tools/remap-sprite-animation">Remap Sprite Animation</a></li>
                <li><a href="/animancer/docs/manual/tools/remap-animation-bindings">Remap Animation Bindings</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/manual/other">Other Features</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/manual/other/animation-clip-inspector">Animation Clip Inspector</a></li>
                <li><a href="/animancer/docs/manual/other/polymorphic">Polymorphic Drawer</a></li>
                <li><a href="/animancer/docs/manual/other/root-motion">Root Motion</a></li>
                <li><a href="/animancer/docs/manual/other/sprite-renderer-texture-swap">Sprite Renderer Texture Swap</a></li>
                <li><a href="/animancer/docs/manual/other/strings">Strings</a></li>
                <li><a href="/animancer/docs/manual/other/units">Units Attributes</a></li>

                    </ul>
                </li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/bugs">Unity Bugs</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/bugs/paused-skinned-mesh-update">Paused Skinned Mesh Update</a></li>
                <li><a href="/animancer/docs/bugs/reorderable-array-height">Reorderable Array Height</a></li>
                <li><a href="/animancer/docs/bugs/serialized-array-initialization">Serialized Array Initialization</a></li>
                <li><a href="/animancer/docs/bugs/timing">Timing</a></li>
                <li><a href="/animancer/docs/bugs/update-modes">Update Modes</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/source">Source Code</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/source/dlls">DLLs</a></li>
                <li><a href="/animancer/docs/source/creating-custom-states">Creating Custom States</a></li>
                <li><a href="/animancer/docs/source/graph-structure">Graph Structure</a></li>
                <li><a href="/animancer/docs/source/asset-sources">Asset Sources</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/changes">Change Log</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/changes/animancer-v8-1">Animancer v8.1</a></li>
                <li class="treeview">
                    <a href="/animancer/docs/changes/animancer-v8-0">Animancer v8.0</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/changes/animancer-v8-0/upgrade-guide">Animancer v8.0 Upgrade Guide</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/docs/changes/animancer-v7-4">Animancer v7.4</a></li>
                <li><a href="/animancer/docs/changes/animancer-v7-3">Animancer v7.3</a></li>
                <li><a href="/animancer/docs/changes/animancer-v7-2">Animancer v7.2</a></li>
                <li><a href="/animancer/docs/changes/animancer-v7-1">Animancer v7.1</a></li>
                <li><a href="/animancer/docs/changes/animancer-v7-0">Animancer v7.0</a></li>
                <li><a href="/animancer/docs/changes/animancer-v6-1">Animancer v6.1</a></li>
                <li class="treeview">
                    <a href="/animancer/docs/changes/animancer-v6-0">Animancer v6.0</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/changes/animancer-v6-0/test">Test Releases</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/docs/changes/animancer-v5-3">Animancer v5.3</a></li>
                <li><a href="/animancer/docs/changes/animancer-v5-2">Animancer v5.2</a></li>
                <li><a href="/animancer/docs/changes/animancer-v5-1">Animancer v5.1</a></li>
                <li class="treeview">
                    <a href="/animancer/docs/changes/animancer-v5-0">Animancer v5.0</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/changes/animancer-v5-0/test">Test Releases</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/docs/changes/animancer-v4-4">Animancer v4.4</a></li>
                <li><a href="/animancer/docs/changes/animancer-v4-3">Animancer v4.3</a></li>
                <li><a href="/animancer/docs/changes/animancer-v4-2">Animancer v4.2</a></li>
                <li><a href="/animancer/docs/changes/animancer-v4-1">Animancer v4.1</a></li>
                <li class="treeview">
                    <a href="/animancer/docs/changes/animancer-v4-0">Animancer v4.0</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/changes/animancer-v4-0/test">Test Releases</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/docs/changes/animancer-v3-1">Animancer v3.1</a></li>
                <li><a href="/animancer/docs/changes/animancer-v3-0">Animancer v3.0</a></li>
                <li><a href="/animancer/docs/changes/animancer-v2-0">Animancer v2.0</a></li>
                <li><a href="/animancer/docs/changes/animancer-v1-3">Animancer v1.3</a></li>
                <li><a href="/animancer/docs/changes/animancer-v1-2">Animancer v1.2</a></li>
                <li><a href="/animancer/docs/changes/animancer-v1-1">Animancer v1.1</a></li>
                <li><a href="/animancer/docs/changes/animancer-v1-0">Animancer v1.0</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/docs/help">Help and FAQ</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/docs/help/debugging">Debugging</a></li>

                    </ul>
                </li>

                    </ul>
                            
                </section>                
            </aside>
            
            <!-- Content Wrapper. Contains page content -->
            <div class="content-wrapper">
                



		<section class="content-header">
			<h1>06-03 Brains</h1>
		</section>
	<section class="content">
		<blockquote class="blockquote">
<p><i class="emw fa fa-folder"></i> <a href="../../"><strong>Location</strong>: Samples/06 State Machines/03 Brains</a></p>
<p><i class="emw fa fa-code-fork"></i> <strong>Recommended After</strong>: <a href="../characters">Characters</a> and <a href="../../mixers/linear">Linear Mixer</a></p>
<p><i class="emw fa fa-puzzle-piece"></i> <strong>Learning Outcomes</strong>: <span class="mini">in this sample you will learn:</span></p>
<p><i class="emw fa fa-lightbulb-o"></i> How to separate inputs from actions and why doing so is useful.</p>
<p><i class="emw fa fa-lightbulb-o"></i> How to organize other parts of a character's logic beyond their state machine.</p>
<p><i class="emw fa fa-lightbulb-o"></i> How to make a character turn in the direction they want to move.</p>
</blockquote>
<img src="brains.png" class="pngif img-responsive img-right">
<h1 id="summary">Summary</h1>
<p>This sample expands upon the <a href="../characters">Characters</a> sample to demonstrate the concept of "brains" for controlling a character using player input, AI, or any other decision making process separately from the systems that determine what they can do or how they do it.</p>
<ul>
<li>Separating the logic that controls what a character wants to do into a separate script from the logic that controls what they actually can do and the execution of those actions can greatly improve the flexibility and reusability of your code.</li>
<li>Using a central class to hold parameters such as the direction the character wants to move is an effective way of communicating between the brain and the character's other scripts.</li>
</ul>
<h1 id="controls">Controls</h1>
<ul>
<li>WASD = Walk</li>
<li>WASD + Left Shift = Run</li>
<li>Left Click = Shoot</li>
</ul>
<h1 id="overview">Overview</h1>
<p>The general code structure of the <a href="../characters">Characters</a> sample can still be seen here, but there are some notable changes and additions.</p>
<p><a href="architecture.png"><img src="architecture.png" class="img-responsive" id="architecture"></a></p>
<table class="table">
<thead>
<tr>
<th>Change</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>CapsuleCollider</code> and <code>Rigidbody</code></td>
<td>Allows the character to move around the scene without going through walls.</td>
</tr>
<tr>
<td><code>CharacterParameters</code></td>
<td>Used for communicating between the brain and other components. The <code>Character</code> component always had this field, but it wasn't used in earlier samples.</td>
</tr>
<tr>
<td><code>RootMotionRedirect</code></td>
<td>Takes the root motion from animations which would normally be applied to the character model and applies it to the <code>Rigidbody</code> instead.</td>
</tr>
<tr>
<td><code><a href="/animancer/api/Animancer.Samples.StateMachines/MoveState">MoveState</a></code></td>
<td>Replaces the second <code>IdleState</code> from earlier samples. It contains logic for walking, running, and turning based on the <code>CharacterParameters</code>.</td>
</tr>
<tr>
<td><code><a href="/animancer/api/Animancer.Samples.StateMachines/MovingCharacterBrain">MovingCharacterBrain</a></code></td>
<td>Replaces the <code>SimpleCharacterBrain</code> from earlier samples as the script that controls the character's actions based on user input.</td>
</tr>
</tbody>
</table>
<p>The additions from the <a href="../interruptions">Interruptions</a> sample aren't included in this sample because they aren't relevant to the topics discussed here and would only add unnecessary complexity to the scene. But those components would still work if you wanted to add them (a <code><a href="/animancer/api/Animancer.Samples.StateMachines/HealthPool">HealthPool</a></code> and <code>FlinchState</code> for the character, and <code><a href="/animancer/api/Animancer.Samples.FineControl/ClickToInteract">ClickToInteract</a></code> somewhere else in the scene).</p>
<h1 id="why-brains">Why Brains?</h1>
<p>Consider the steps that are involved in getting a character to perform an action:</p>
<ol>
<li>Detect that the Left Mouse Button was pressed.</li>
<li>Check if the character was already doing something else that would prevent them from performing the action.</li>
<li>Play the action animation.</li>
</ol>
<p>Only step 1 of that process is relevant to determining what the character <em>wants to do</em> (or in this case, what the player wants them to do) so that's the only part that goes in the brain. When it detects the button press it tells the character to attempt the action and leaves the remaining steps up to the other systems.</p>
<p>This <a href="https://en.wikipedia.org/wiki/Separation_of_concerns">Separation of Concerns</a> means that each type of state only needs to be implemented once and will then be usable by any kind of character, whether it be the player, or an NPC. This also makes it easy to change the way a character is controlled without affecting the way any of their actions actually work, either by modifying the brain or by assigning a different brain.</p>
<p>The term "Brain" was chosen because it accurately describes its purpose, which is to control the behaviour of a <code>Character</code>. But feel free to use other terminology that suits you such as "Character Input".</p>
<h1 id="parameters">Parameters</h1>
<p>Earlier samples had the <code>SimpleCharacterBrain</code> telling the <code>StateMachine</code> when to enter a particular state, but in this sample the <code><a href="/animancer/api/Animancer.Samples.StateMachines/MoveState">MoveState</a></code> also needs to know which direction the brain wants to move and whether it wants to run or not. You could put those parameters in the brain or in the <code>Character</code>, but this sample uses a dedicated <code>CharacterParameters</code> class.</p>
<p><img src="inspector-parameter.png" class="pngif img-responsive"></p>
<p>This class doesn't really need to be serializable since it's only set at runtime, but making it serializable means it can easily show the current parameter values in the Inspector which can be very helpful for debugging.</p>
<pre><code class="language-cs">[Serializable]
public class CharacterParameters
{
</code></pre>
<p>The <code>MovementDirection</code> is a <code>Vector3</code> indicating which way the character wants to move. If the brain wants to move slowly we can allow a small vector to be assigned, but we don't want to allow the brain to make the character move faster by just setting a larger vector so we use <code>Vector3.ClampMagnitude</code> to limit the magnitude of the assigned value to 1:</p>
<pre><code class="language-cs">    [SerializeField]
    private Vector3 _MovementDirection;
    public Vector3 MovementDirection
    {
        get =&gt; _MovementDirection;
        set =&gt; _MovementDirection = Vector3.ClampMagnitude(value, 1);
    }
</code></pre>
<p><code>WantsToRun</code> doesn't need any special validation but we still want it to have a field with the <code>[SerializeField]</code> attribute so we use a <code>ref</code> property which allows the value to be get and set without needing to write the actual <code>get</code> and <code>set</code> methods:</p>
<pre><code class="language-cs">    [SerializeField]
    private bool _WantsToRun;
    public ref bool WantsToRun =&gt; ref _WantsToRun;
}
</code></pre>
<h2 id="parameters-field">Parameters Field</h2>
<p>The <code>CharacterParameters</code> is used as a serialized field in the <code>Character</code> class:</p>
<pre><code class="language-cs">class Character
{
    ...
    
    [SerializeField]
    private CharacterParameters _Parameters;
    public CharacterParameters Parameters =&gt; _Parameters;
}
</code></pre>
<p><img src="../characters/inspector-character.png" class="img-responsive"></p>
<h1 id="moving-character-brain">Moving Character Brain</h1>
<p>With the parameters defined, we're now ready to make a brain to control them. This new brain class is identical to <code>SimpleCharacterBrain</code> from the <a href="../characters">Characters</a> sample, except for the <code>UpdateMovement</code> method:</p>
<pre><code class="language-cs">public class <a href="/animancer/api/Animancer.Samples.StateMachines/MovingCharacterBrain">MovingCharacterBrain</a> : MonoBehaviour
{
    [SerializeField] private Character _Character;
    [SerializeField] private CharacterState _Move;
    [SerializeField] private CharacterState _Action;

    protected virtual void Update()
    {
        UpdateMovement();
        UpdateAction();
    }

    private void UpdateMovement()
    {
        // This method is different and will be explained below.
    }

    private void UpdateAction()
    {
        if (SampleInput.LeftMouseUp)
            _Character.StateMachine.TryResetState(_Action);
    }
}
</code></pre>
<p></p><details><summary><code>SimpleCharacterBrain</code> and <code><a href="/animancer/api/Animancer.Samples.StateMachines/MovingCharacterBrain">MovingCharacterBrain</a></code> were implemented as completely separate scripts to keep each of these samples a bit more self-contained, but with a few changes they could utilise <a href="/cs-unity/docs/introduction/inheritance">Inheritance</a> to avoid needing to repeat so much of the same code.</summary>
<ol>
<li>Remove the <code>sealed</code> keyword from <code>SimpleCharacterBrain</code> so it can be inherited.</li>
<li>Change the <code>UpdateMovement</code> method in <code>SimpleCharacterBrain</code> from <code>private</code> to <code>protected virtual</code> so it can be overridden.</li>
<li>Change the <code>_Move</code> method in <code>SimpleCharacterBrain</code> from <code>private</code> to <code>protected</code> so it can be accessed in an inheriting class.</li>
<li>Change the <code>UpdateMovement</code> method in <code><a href="/animancer/api/Animancer.Samples.StateMachines/MovingCharacterBrain">MovingCharacterBrain</a></code> from <code>private</code> to <code>protected override</code> so it replaces the method in the base class (<code>SimpleCharacterBrain</code>).</li>
<li>Remove everything else from <code><a href="/animancer/api/Animancer.Samples.StateMachines/MovingCharacterBrain">MovingCharacterBrain</a></code> because it's all inherited from the base class now.</li>
</ol>
</details><p></p>
<p>Where the <code>SimpleCharacterBrain.UpdateMovement</code> method only had to try to enter the <em>Move</em> or <em>Idle</em> state, this one also needs to set the <code>MovementDirection</code> and <code>WantsToRun</code> parameters.</p>
<p>First, it checks if the input is not zero:</p>
<pre><code class="language-cs">private void UpdateMovement()
{
    Vector2 input = SampleInput.WASD;
    if (input != Vector2.zero)
    {
</code></pre>
<p>It needs to take the user's 2D screen-space <code>WASD</code> input and convert that into a 3D world-space vector to set the <code>MovementDirection</code>. It's important to do this conversion here in the brain because this is where code that's specific to player input is supposed to go. It wouldn't make sense to do it in <code>CharacterParameters</code> or <code><a href="/animancer/api/Animancer.Samples.StateMachines/MoveState">MoveState</a></code> because those classes are supposed to be usable by any character and this conversion is only relevant to the player.</p>
<p>First, convert the 2D input directly into 3D on the XZ plane:</p>
<pre><code class="language-cs">        Vector3 movementDirection = new Vector3(input.x, 0, input.y);
</code></pre>
<p>Then have the <code>Camera</code> transform that direction, which essentially means rotating it by the current rotation of the camera:</p>
<pre><code class="language-cs">        Transform camera = Camera.main.transform;
        movementDirection = camera.TransformDirection(movementDirection);
        _Character.Parameters.MovementDirection = movementDirection;
</code></pre>
<p>And it still needs to try to enter the movement state:</p>
<pre><code class="language-cs">        _Character.StateMachine.TrySetState(_Move);
    }
</code></pre>
<p>If the player isn't trying to move, clear the movement vector and return to idle:</p>
<pre><code class="language-cs">    else
    {
        _Character.Parameters.MovementDirection = Vector3.zero;
        _Character.StateMachine.TrySetDefaultState();
    }
</code></pre>
<p>And finally, indicate whether the character wants to run or not:</p>
<pre><code class="language-cs">    _Character.Parameters.WantsToRun = SampleInput.LeftShiftHold;
}
</code></pre>
<p></p><details><summary>Why is the <code>_Move</code> field a base <code>CharacterState</code> instead of the more specific <code><a href="/animancer/api/Animancer.Samples.StateMachines/MoveState">MoveState</a></code>?</summary>
<p>You might be wondering why the brain uses:</p>
<pre><code class="language-cs">[SerializeField] private CharacterState _Move;
</code></pre>
<p>Instead of:</p>
<pre><code class="language-cs">[SerializeField] private <a href="/animancer/api/Animancer.Samples.StateMachines/MoveState">MoveState</a> _Move;
</code></pre>
<p>It's because nothing in the brain actually cares what specific type of state it is, as long as it inherits from <code>CharacterState</code> to be usable in the <code>Character</code>'s <code>StateMachine</code>.</p>
<p>In the <a href="../weapons">Weapons</a> sample, the brain needs to set the <code>NextWeapon</code> before entering the <code><a href="/animancer/api/Animancer.Samples.StateMachines/EquipState">EquipState</a></code> so that brain has an actual <code><a href="/animancer/api/Animancer.Samples.StateMachines/EquipState">EquipState</a></code> field.</p>
<p>But this sample isn't doing that so the field might as well be as unrestrictive as possible which means you could potentially use the same control logic on a different type of state without needing to modify this brain.</p>
</details><p></p>
<h1 id="move-state">Move State</h1>
<p></p><details><summary>Where the earlier samples simply used an <code>IdleState</code> with a movement animation assigned, this time we have a proper <code><a href="/animancer/api/Animancer.Samples.StateMachines/MoveState">MoveState</a></code> which is responsible for <a href="#walking-and-running">Walking and Running</a> as well as <a href="#turning">Turning</a>:</summary>
<pre><code class="language-cs">public class <a href="/animancer/api/Animancer.Samples.StateMachines/MoveState">MoveState</a> : CharacterState
{
    [SerializeField] private <a href="/animancer/api/Animancer/TransitionAsset">TransitionAsset</a> _Animation;
    [SerializeField] private <a href="/animancer/api/Animancer/StringAsset">StringAsset</a> _SpeedParameter;
    [SerializeField] private float _WalkParameterValue = 0.5f;
    [SerializeField] private float _RunParameterValue = 1;
    [SerializeField, Seconds] private float _ParameterSmoothTime = 0.15f;
    [SerializeField, DegreesPerSecond] private float _TurnSpeed = 360;

    private <a href="/animancer/api/Animancer/SmoothedFloatParameter">SmoothedFloatParameter</a> _Speed;

    protected virtual void Awake()
    {
        _Speed = new SmoothedFloatParameter(
            Character.Animancer,
            _SpeedParameter,
            _ParameterSmoothTime);
    }

    protected virtual void OnEnable()
    {
        Character.Animancer.Play(_Animation);
    }

    protected virtual void Update()
    {
        UpdateSpeed();
        UpdateTurning();
    }

    private void UpdateSpeed()
    {
        _Speed.TargetValue = Character.Parameters.WantsToRun
            ? _RunParameterValue
            : _WalkParameterValue;
    }

    private void UpdateTurning()
    {
        Vector3 movement = Character.Parameters.MovementDirection;
        if (movement == Vector3.zero)
            return;

        float targetAngle = Mathf.Atan2(movement.x, movement.z) * Mathf.Rad2Deg;

        float turnDelta = _TurnSpeed * Time.deltaTime;

        Transform transform = Character.Animancer.transform;
        Vector3 eulerAngles = transform.eulerAngles;
        eulerAngles.y = Mathf.MoveTowardsAngle(eulerAngles.y, targetAngle, turnDelta);
        transform.eulerAngles = eulerAngles;
    }
}
</code></pre>
</details><p></p>
<p><img src="inspector-move.png" class="img-responsive"></p>
<h1 id="walking-and-running">Walking and Running</h1>
<p><code><a href="/animancer/api/Animancer.Samples.StateMachines/MoveState">MoveState</a></code> is responsible for both walking and running. Two animation states managed by one logical state because they both use the same logic. This could be implemented by simply giving it two <code><a href="/animancer/api/Animancer/TransitionAsset">TransitionAsset</a></code> fields, but then whenever it changes between them it would need to synchronize their times to avoid going from one part of the walk animation to a completely different part of the run animation. That problem is explained further in the <a href="../../../manual/blending/mixers/synchronization">Mixer Synchronization</a> section and that's also the solution, because mixers already have inbuilt synchronization so this state can just reuse <em>Idle-Walk-Run</em> mixer from the <a href="../../mixers/linear">Linear Mixer</a> sample.</p>
<p>That means we need a bunch of additional details:</p>
<table class="table">
<thead>
<tr>
<th>Field</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code><a href="/animancer/api/Animancer/TransitionAsset">TransitionAsset</a> _Animation;</code></td>
<td>The mixer from the <a href="../../mixers/linear">Linear Mixer</a> sample.</td>
</tr>
<tr>
<td><code><a href="/animancer/api/Animancer/StringAsset">StringAsset</a> _SpeedParameter;</code></td>
<td>The name of the mixer's <a href="../../../manual/parameters">Parameter</a>.</td>
</tr>
<tr>
<td><code>private float _WalkParameterValue = 0.5f;</code><br><code>private float _RunParameterValue = 1;</code></td>
<td>The parameter values at which the character will <em>Walk</em> and <em>Run</em>.</td>
</tr>
<tr>
<td><code>private float _ParameterSmoothTime = 0.15f;</code></td>
<td>Mixers don't have any inbuilt <a href="../../../manual/parameters#smoothing">Parameter Smoothing</a> and we don't want to instantly snap between <em>Walk</em> and <em>Run</em> so this script needs to apply smoothing itself.</td>
</tr>
</tbody>
</table>
<p>We could apply smoothing by manually using functions like <code>Mathf.MoveTowards</code> or <code>Mathf.SmoothDamp</code>, but using a <code><a href="/animancer/api/Animancer/SmoothedFloatParameter">SmoothedFloatParameter</a></code> handles that for us (using <code>Mathf.SmoothDamp</code> internally).</p>
<pre><code class="language-cs">    private <a href="/animancer/api/Animancer/SmoothedFloatParameter">SmoothedFloatParameter</a> _Speed;
        
    protected virtual void Awake()
    {
        _Speed = new SmoothedFloatParameter(
            Character.Animancer,
            _SpeedParameter,
            _ParameterSmoothTime);
    }
</code></pre>
<p>To update the speed, we simply set the <code>TargetValue</code> of that smoother using a <em>Conditional Expression</em>: if <code>WantsToRun</code> is true, it will set the target to <code>_RunParameterValue</code>, otherwise it will set it to <code>_WalkParameterValue</code>.</p>
<pre><code class="language-cs">    protected virtual void Update()
    {
        UpdateSpeed();
        UpdateTurning();
    }

    private void UpdateSpeed()
    {
        _Speed.TargetValue = Character.Parameters.WantsToRun
            ? _RunParameterValue
            : _WalkParameterValue;
    }
</code></pre>
<p>With the target set, the smoother will automatically move the actual parameter value towards that value over time.</p>
<h1 id="root-motion">Root Motion</h1>
<p>This sample moves the character around using <a href="#root-motion">Root Motion</a> so this state doesn't do any actual moving. If you don't want to use <a href="#root-motion">Root Motion</a>, you could give the <code>Character</code> a reference to their <code>Rigidbody</code> (or whatever character controller system you are using) and control it in this state as well.</p>
<p>Since the model (with the <code>Animator</code> and <code><a href="/animancer/api/Animancer/AnimancerComponent">AnimancerComponent</a></code>) is a child of the character's root (with the <code>CapsuleCollider</code>, <code>Rigidbody</code>, and <code>Character</code>) the root motion would normally be applied only to the model to move it independently of the character's physics. That's obviously undesirable so we <a href="../../../manual/other/root-motion">Redirect the Root Motion</a> to the parent <code>Rigidbody</code> instead.</p>
<p><img src="inspector-model.png" class="img-responsive"></p>
<h1 id="turning">Turning</h1>
<p>Some games use additional animations to make the turning look more natural (such as leaning over if you turn while running) or the <a href="../../animator-controllers/3d-game-kit/locomotion/turning">Quick Turn</a> animations used in the <a href="../../animator-controllers/3d-game-kit">3D Game Kit</a> sample, but for this sample we're just going to rotate the model around the Y axis.</p>
<p>So the <code><a href="/animancer/api/Animancer.Samples.StateMachines/MoveState">MoveState</a></code> script has a field to determine how fast it can turn (<a href="../../../manual/other/units">measured in degrees per second</a>):</p>
<pre><code class="language-cs">    [SerializeField, DegreesPerSecond] private float _TurnSpeed = 360;
</code></pre>
<p>Firstly, it needs to make sure it actually has a <code>MovementDirection</code>, because it wouldn't know which way to turn if it somehow ended up in this state without the brain setting the direction:</p>
<pre><code class="language-cs">    private void UpdateTurning()
    {
        Vector3 movement = Character.Parameters.MovementDirection;
        if (movement == Vector3.zero)
            return;
</code></pre>
<p>Then it determines the angle it wants to turn towards:</p>
<pre><code class="language-cs">        float targetAngle = Mathf.Atan2(movement.x, movement.z) * Mathf.Rad2Deg;
</code></pre>
<p>Without going into the maths behind it, <code>Mathf.Atan2</code> gives the angle of a vector in radians. So the state just feeds in the <code>x</code> and <code>z</code> values to get the angle around the <code>y</code> axis, then converts the result to degrees because <code>Transform.eulerAngles</code> uses degrees.</p>
<p>Then it calculate how far to rotate this frame:</p>
<pre><code class="language-cs">        float turnDelta = _TurnSpeed * Time.deltaTime;
</code></pre>
<p>Then it gets the <code>Transform.eulerAngles</code>, moves the <code>y</code> value towards the target angle, and applies those angles back to the <code>Transform</code>:</p>
<pre><code class="language-cs">        Transform transform = Character.Animancer.transform;
        Vector3 eulerAngles = transform.eulerAngles;
        eulerAngles.y = Mathf.MoveTowardsAngle(eulerAngles.y, targetAngle, turnDelta);
        transform.eulerAngles = eulerAngles;
    }
}
</code></pre>
<p>It rotates the <em>DefaultHumanoid</em> model independently from the root <em>Character</em> object because the <em>Character</em> has a <code>CapsuleCollider</code> and <code>Rigidbody</code> on it. The capsule is only a vague approximation of the character's shape anyway, so there's no need for the rotation to have any interaction with the physics system.</p>
<h1 id="conclusion">Conclusion</h1>
<p>Now we have a character who can walk, run, turn, and shoot:</p>
<p><img src="brains.png" class="pngif img-responsive"></p>
<h1 id="what-next">What Next?</h1>
<table class="table">
<thead>
<tr>
<th>Sample</th>
<th>Topic</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><a href="../weapons">Weapons</a></strong></td>
<td>Defining animations separately from the character (i.e. on weapons) and swapping between them dynamically.</td>
</tr>
<tr>
<td><a href="/platformer">Platformer Game Kit</a></td>
<td>A separate (free) package which demonstrates a much more complete character implementation for a 2D platformer game. In addition to its <a href="/platformer/docs/characters/brains/player">Player Input Brain</a> it also has a <a href="/platformer/docs/characters/brains/behaviour">Behaviour Tree Brain</a> which controls the enemies using a simple node based system.</td>
</tr>
<tr>
<td><a href="../../animator-controllers/3d-game-kit">3D Game Kit</a></td>
<td>A more complex character framework based on Unity's <a href="https://assetstore.unity.com/packages/templates/tutorials/3d-game-kit-lite-135162">3D Game Kit Lite</a>.</td>
</tr>
</tbody>
</table>

	</section>
                
            </div>           
            
            <!-- Footer -->
            <footer class="main-footer">
            </footer>
            
        </div>
        <div class="wrapper bottom-wrapper">
            <footer class="bottom-footer">
                <strong><div style="text-align:left; display:flex">

<div>
<p>Documentation</p>
<p><a href="/animancer/docs/samples">Samples</a></p>
<p><a href="/animancer/docs/manual">User Manual</a></p>
<p><a href="/animancer/docs/changes">Change Log</a></p>
</div>

<div style="width:10%"></div>

<div>
<p>Download</p>
<p><a href="https://kybernetik.itch.io/animancer-pro">Itch.io</a></p>
<p><a href="https://assetstore.unity.com/packages/tools/animation/animancer-pro-293522?aid=1100l8ah5">Asset Store (Animancer Pro)</a></p>
<p><a href="https://assetstore.unity.com/packages/tools/animation/animancer-lite-293524?aid=1100l8ah5">Asset Store (Animancer Lite)</a></p>
</div>

<div style="width:10%"></div>

<div>
<p>Contact</p>
<p><a href="https://github.com/KybernetikGames/animancer/issues">Github Issues</a></p>
<p><a href="/animancer/redirect/discussions">Unity Discussions</a></p>
<p><a href="mailto:animancer@kybernetik.com.au?subject=Animancer">Email</a></p>
</div>

<div style="width:10%"></div>

<div>
<p>Other Assets</p>
<p><a href="/flexi-motion">FlexiMotion</a></p>
<p><a href="/inspector-gadgets">Inspector Gadgets</a></p>
<p><a href="/weaver">Weaver</a></p>
</div>

<div style="width:10%"></div>

<div>
<p>&nbsp;</p>
<p><a href="https://assetstore.unity.com/packages/vfx/shaders/simple-sun-shader-72042?aid=1100l8ah5">Simple Sun Shader</a></p>
<p><a href="https://assetstore.unity.com/packages/tools/version-control/link-sync-229569?aid=1100l8ah5">Link &amp; Sync</a></p>
<p><a href="/ultevents">UltEvents</a></p>
</div>

</div></strong>
<script src="/animancer/assets/js/pngif.js"></script>
            </footer>
        </div>
        <a href="javascript:" id="return-to-top"><i class="fa fa-chevron-up"></i></a>
        
        <script>           
            // Close the sidebar if we select an anchor link
            $(".main-sidebar a[href^='#']:not('.expand')").click(function(){
                $(document.body).removeClass('sidebar-open');
            });
            
            $(document).ready(function() {
                mermaid.initialize(
                {
                    flowchart:
                    {
                        useMaxWidth: false
                    },
					startOnLoad: false,
					cloneCssStyles: false
                });     
                mermaid.init(undefined, ".mermaid");

                // Remove the max-width setting that Mermaid sets
                var mermaidSvg = $('.mermaid svg');
                mermaidSvg.addClass('img-responsive');
                mermaidSvg.css('max-width', '');

                // Make it scrollable
				var target = document.querySelector(".mermaid svg");
				if(target !== null)
				{
					var panZoom = window.panZoom = svgPanZoom(target, {
						zoomEnabled: true,
						controlIconsEnabled: true,
						fit: true,
						center: true,
                        maxZoom: 20,
                        zoomScaleSensitivity: 0.6
					});			                          

                    // Do the reset once right away to fit the diagram
                    panZoom.resize();
                    panZoom.fit();
                    panZoom.center();
                    
                    $(window).resize(function(){
                        panZoom.resize();
                        panZoom.fit();
                        panZoom.center();
                    });
				}
                
                $('pre code').each(function(i, block) {
                    hljs.highlightBlock(block);
                });  
            });

            hljs.initHighlightingOnLoad();

            // Back to top
            $(window).scroll(function() {
                if ($(this).scrollTop() >= 200) {        // If page is scrolled more than 50px
                    $('#return-to-top').fadeIn(1000);    // Fade in the arrow
                } else {
                    $('#return-to-top').fadeOut(1000);   // Else fade out the arrow
                }
            });
            $('#return-to-top').click(function() {      // When arrow is clicked
                $('body,html').animate({
                    scrollTop : 0                       // Scroll to top of body
                }, 500);
            });
        </script>
    
</body></html>