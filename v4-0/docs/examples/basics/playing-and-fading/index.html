<!DOCTYPE html><html><head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=Edge">
        <meta name="description">
        <meta name="keywords" content="static content generator,static site generator,static site,HTML,web development,.NET,C#,Razor,Markdown,YAML">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="shortcut icon" href="/animancer/v4-0/assets/img/favicon.ico" type="image/x-icon">
        <link rel="icon" href="/animancer/v4-0/assets/img/favicon.ico" type="image/x-icon">
        <title>Animancer - 02 Playing and Fading</title>
        <link href="/animancer/v4-0/assets/css/highlight.css" rel="stylesheet">
        <link href="/animancer/v4-0/assets/css/bootstrap/bootstrap.css" rel="stylesheet">
        <link href="/animancer/v4-0/assets/css/adminlte/AdminLTE.css" rel="stylesheet">
        <link href="/animancer/v4-0/assets/css/theme/theme.css" rel="stylesheet">
        <link href="//fonts.googleapis.com/css?family=Roboto+Mono:400,700|Roboto:400,400i,700,700i" rel="stylesheet">
        <link href="/animancer/v4-0/assets/css/font-awesome.min.css" rel="stylesheet" type="text/css">
        <link href="/animancer/v4-0/assets/css/override.css" rel="stylesheet">
        <script src="/animancer/v4-0/assets/js/jquery-2.2.3.min.js"></script>
        <script src="/animancer/v4-0/assets/js/bootstrap.min.js"></script>        
        <script src="/animancer/v4-0/assets/js/app.min.js"></script>         
        <script src="/animancer/v4-0/assets/js/highlight.pack.js"></script>   
        <script src="/animancer/v4-0/assets/js/jquery.slimscroll.min.js"></script>
        <script src="/animancer/v4-0/assets/js/jquery.sticky-kit.min.js"></script>
        <script src="/animancer/v4-0/assets/js/mermaid.min.js"></script>
        <script src="/animancer/v4-0/assets/js/svg-pan-zoom.min.js"></script>
        <!--[if lt IE 9]>
        <script src="/animancer/v4-0/assets/js/html5shiv.min.js"></script>
        <script src="/animancer/v4-0/assets/js/respond.min.js"></script>
        <![endif]-->  

        
    </head>
    <body class="hold-transition wyam layout-boxed  ">    
        <div class="top-banner"></div>
        <div class="wrapper with-container">
            <!-- Header -->
            <header class="main-header">   
                     
                <a href="/animancer/v4-0/" class="logo">
                            <span>Animancer</span>
                </a>   
                         
                <nav class="navbar navbar-static-top" role="navigation">
                    <!-- Sidebar toggle button-->
                        <a href="#" class="sidebar-toggle visible-xs-block" data-toggle="offcanvas" role="button">
                            <span class="sr-only">Toggle side menu</span>
                            <i class="fa fa-chevron-circle-right"></i>
                        </a>
                                        
                    <div class="navbar-header">
                        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse">
                            <span class="sr-only">Toggle side menu</span>
                            <i class="fa fa-chevron-circle-down"></i>
                        </button>
                    </div>
            
                    <!-- Collect the nav links, forms, and other content for toggling -->
                    <div class="collapse navbar-collapse pull-left" id="navbar-collapse">
                        <ul class="nav navbar-nav">                            
                                    <li class="active"><a href="/animancer/v4-0/docs"><img src="/animancer/v4-0/images/docs.png" height="20" style="position:relative; left:-5px; top:-1px;"> Docs</a></li>
        <li><a href="/animancer/v4-0/docs/help"><img src="/animancer/v4-0/images/help.png" height="20" style="position:relative; left:-4px; top:-1px;"> Help</a></li>
        <li><a href="/animancer/v4-0/api/Animancer/AnimancerComponent"><img src="/animancer/v4-0/images/api.png" height="20" style="position:relative; left:-3px; top:-1px;"> API v4.0</a></li>
        <li><a href="/animancer/lite"><img src="/animancer/v4-0/images/unity-logo.png" height="20" style="position:relative; left:-4px; top:-1px;"> Try</a></li>
        <li><a href="/animancer/pro"><img src="/animancer/v4-0/images/unity-logo.png" height="20" style="position:relative; left:-4px; top:-1px;"> Buy</a></li>
        <li><a href="https://kybernetik.com.au/kailas-dierk/unity-assets"><img src="/animancer/v4-0/images/kybernetik.png" height="20" style="position:relative; left:-2px; top:-1px;"> Other Assets</a></li>
 
                        </ul>       
                    </div>
                    <!-- /.navbar-collapse -->
                
                    <!-- Navbar Right Menu -->
                </nav>
<a href="/animancer" style="font-size:1.42em; color:white">This is the <strong>Animancer v4.0 Beta</strong> Documentation. Click Here to return to the v3.1 Documentation.</a>
            </header>
            
            <!-- Left side column. contains the logo and sidebar -->
            <aside class="main-sidebar ">
                <section class="infobar" data-spy="affix" data-offset-top="60" data-offset-bottom="200"> 
                    	
    <div id="infobar-headings"><h6>On This Page</h6><p><a href="#script-setup">Script Setup</a></p>
<p><a href="#play">Play</a></p>
<p><a href="#play-then-idle">Play then Idle</a></p>
<p><a href="#play-from-start">Play from Start</a></p>
<p><a href="#play-from-start-then-idle">Play from Start then Idle</a></p>
<p><a href="#crossfade">CrossFade</a></p>
<p><a href="#crossfade-then-idle">CrossFade then Idle</a></p>
<p><a href="#bad-crossfade-from-start">Bad CrossFade from Start</a></p>
<p><a href="#good-crossfade-from-start">Good CrossFade from Start</a></p>
<p><a href="#good-crossfade-from-start-then-idle">Good CrossFade from Start then Idle</a></p>
<hr class="infobar-hidden">
</div>

                </section>
                <section class="sidebar">    
                                     
                    

                    <ul class="sidebar-menu">
                        

                <li><a href="/animancer/v4-0/docs/help">Help and FAQ</a></li>
                <li class="treeview">
                    <a href="/animancer/v4-0/docs/introduction">Introduction</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li class="treeview">
                    <a href="/animancer/v4-0/docs/introduction/mecanim-vs-animancer">Mecanim vs. Animancer</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/v4-0/docs/introduction/mecanim-vs-animancer/why-replace-mecanim">Why Replace Mecanim?</a></li>
                <li><a href="/animancer/v4-0/docs/introduction/mecanim-vs-animancer/playing">Playing</a></li>
                <li><a href="/animancer/v4-0/docs/introduction/mecanim-vs-animancer/waiting">Waiting</a></li>
                <li><a href="/animancer/v4-0/docs/introduction/mecanim-vs-animancer/speed-and-time">Speed and Time</a></li>
                <li><a href="/animancer/v4-0/docs/introduction/mecanim-vs-animancer/weapon-animations">Weapon Animations</a></li>
                <li><a href="/animancer/v4-0/docs/introduction/mecanim-vs-animancer/performance">Performance</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/v4-0/docs/introduction/features">Features</a></li>
                <li><a href="/animancer/v4-0/docs/introduction/glossary">Glossary</a></li>
                <li class="treeview">
                    <a href="/animancer/v4-0/docs/introduction/cs">C# in Unity</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/v4-0/docs/introduction/cs/overview">Scripting Overview</a></li>
                <li><a href="/animancer/v4-0/docs/introduction/cs/organisation">Organisation</a></li>
                <li><a href="/animancer/v4-0/docs/introduction/cs/variables">Variables</a></li>
                <li><a href="/animancer/v4-0/docs/introduction/cs/methods">Methods</a></li>
                <li><a href="/animancer/v4-0/docs/introduction/cs/inheritance">Inheritance</a></li>
                <li><a href="/animancer/v4-0/docs/introduction/cs/vectors">Vectors</a></li>
                <li><a href="/animancer/v4-0/docs/introduction/cs/other">Other Topics</a></li>

                    </ul>
                </li>

                    </ul>
                </li>
                <li class="treeview active">
                    <a href="/animancer/v4-0/docs/examples">Examples</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li class="treeview active">
                    <a href="/animancer/v4-0/docs/examples/basics">01 Basics</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/v4-0/docs/examples/basics/scene-setup">Basic Scene Setup</a></li>
                <li><a href="/animancer/v4-0/docs/examples/basics/quick-play">01 Quick Play</a></li>
                <li class="selected"><a href="/animancer/v4-0/docs/examples/basics/playing-and-fading">02 Playing and Fading</a></li>
                <li><a href="/animancer/v4-0/docs/examples/basics/sequence-coroutine">03 Sequence Coroutine</a></li>
                <li><a href="/animancer/v4-0/docs/examples/basics/named-animations">04 Named Animations</a></li>
                <li><a href="/animancer/v4-0/docs/examples/basics/hybrid">05 Hybrid Basics</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/v4-0/docs/examples/fine-control">02 Fine Control</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/v4-0/docs/examples/fine-control/spider-bot">01 Spider Bot</a></li>
                <li><a href="/animancer/v4-0/docs/examples/fine-control/doors">02 Doors</a></li>
                <li><a href="/animancer/v4-0/docs/examples/fine-control/solo-animation">03 Solo Animation</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/v4-0/docs/examples/locomotion">03 Locomotion</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/v4-0/docs/examples/locomotion/walk-and-run">01 Walk and Run</a></li>
                <li><a href="/animancer/v4-0/docs/examples/locomotion/root-motion">02 Root Motion</a></li>
                <li><a href="/animancer/v4-0/docs/examples/locomotion/linear-blending">03 Linear Blending</a></li>
                <li><a href="/animancer/v4-0/docs/examples/locomotion/directional-blending">04 Directional Blending</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/v4-0/docs/examples/directional-sprites">04 Directional Sprites</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/v4-0/docs/examples/directional-sprites/basic-movement">01 Basic Movement</a></li>
                <li><a href="/animancer/v4-0/docs/examples/directional-sprites/character-controller">02 Character Controller</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/v4-0/docs/examples/events">05 Events</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/v4-0/docs/examples/events/footstep-events">01 Footstep Events</a></li>
                <li><a href="/animancer/v4-0/docs/examples/events/golf-events">02 Golf Events</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/v4-0/docs/examples/fsm">06 State Machines</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/v4-0/docs/examples/fsm/creatures">01 Creatures</a></li>
                <li><a href="/animancer/v4-0/docs/examples/fsm/interrupt-management">02 Interrupt Management</a></li>
                <li><a href="/animancer/v4-0/docs/examples/fsm/brains">03 Brains</a></li>
                <li><a href="/animancer/v4-0/docs/examples/fsm/more-brains">04 More Brains</a></li>
                <li><a href="/animancer/v4-0/docs/examples/fsm/platformer">05 Platformer</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/v4-0/docs/examples/layers">07 Layers</a></li>
                <li class="treeview">
                    <a href="/animancer/v4-0/docs/examples/inverse-kinematics">08 Inverse Kinematics</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/v4-0/docs/examples/inverse-kinematics/puppet">01 Puppet</a></li>
                <li><a href="/animancer/v4-0/docs/examples/inverse-kinematics/uneven-ground">02 Uneven Ground</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/v4-0/docs/examples/animator-controllers">09 Animator Controllers</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/v4-0/docs/examples/animator-controllers/hybrid">01 Hybrid Mini Game</a></li>
                <li class="treeview">
                    <a href="/animancer/v4-0/docs/examples/animator-controllers/3d-game-kit">02 3D Game Kit</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/v4-0/docs/examples/animator-controllers/3d-game-kit/problems">Problems with the Original</a></li>
                <li><a href="/animancer/v4-0/docs/examples/animator-controllers/3d-game-kit/respawn">Respawn</a></li>
                <li><a href="/animancer/v4-0/docs/examples/animator-controllers/3d-game-kit/idle">Idle</a></li>
                <li class="treeview">
                    <a href="/animancer/v4-0/docs/examples/animator-controllers/3d-game-kit/locomotion">Locomotion</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/v4-0/docs/examples/animator-controllers/3d-game-kit/locomotion/movement">Movement</a></li>
                <li><a href="/animancer/v4-0/docs/examples/animator-controllers/3d-game-kit/locomotion/turning">Turning</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/v4-0/docs/examples/animator-controllers/3d-game-kit/airborne">Airborne</a></li>
                <li><a href="/animancer/v4-0/docs/examples/animator-controllers/3d-game-kit/landing">Landing</a></li>
                <li><a href="/animancer/v4-0/docs/examples/animator-controllers/3d-game-kit/attack">Attack</a></li>

                    </ul>
                </li>

                    </ul>
                </li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/v4-0/docs/manual">User Manual</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li class="treeview">
                    <a href="/animancer/v4-0/docs/manual/playing">Playing Animations</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/v4-0/docs/manual/playing/states">States</a></li>
                <li><a href="/animancer/v4-0/docs/manual/playing/inspector">Inspector</a></li>
                <li><a href="/animancer/v4-0/docs/manual/playing/component-types">Component Types</a></li>
                <li><a href="/animancer/v4-0/docs/manual/playing/directional-sets">Directional Animation Sets</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/v4-0/docs/manual/transitions">Transitions</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/v4-0/docs/manual/transitions/types">Transition Types</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/v4-0/docs/manual/blending">Blending</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/v4-0/docs/manual/blending/fading">Fading</a></li>
                <li><a href="/animancer/v4-0/docs/manual/blending/layers">Layers</a></li>
                <li><a href="/animancer/v4-0/docs/manual/blending/mixers">Mixers</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/v4-0/docs/manual/events">Events</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/v4-0/docs/manual/events/animation">Animation Events</a></li>
                <li><a href="/animancer/v4-0/docs/manual/events/animancer">Animancer Events</a></li>
                <li><a href="/animancer/v4-0/docs/manual/events/end">End Events</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/v4-0/docs/manual/fsm">Finite State Machines</a></li>
                <li><a href="/animancer/v4-0/docs/manual/animator-controllers">Animator Controllers</a></li>
                <li><a href="/animancer/v4-0/docs/manual/inverse-kinematics">Inverse Kinematics</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/v4-0/docs/bugs">Unity Bugs</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/v4-0/docs/bugs/inconsistent-timing">Inconsistent Timing</a></li>
                <li><a href="/animancer/v4-0/docs/bugs/paused-skinned-mesh-update">Paused Skinned Mesh Update</a></li>
                <li><a href="/animancer/v4-0/docs/bugs/resetting-animated-values">Resetting Animated Values</a></li>
                <li><a href="/animancer/v4-0/docs/bugs/unused-graph-destroy-warning">Unused Graph Destroy Warning</a></li>
                <li><a href="/animancer/v4-0/docs/bugs/update-modes">Update Modes</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/v4-0/docs/source">Source Code</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/v4-0/docs/source/dlls">DLLs</a></li>
                <li><a href="/animancer/v4-0/docs/source/creating-custom-states">Creating Custom States</a></li>
                <li><a href="/animancer/v4-0/docs/source/graph-structure">Graph Structure</a></li>
                <li><a href="/animancer/v4-0/docs/source/asset-sources">Asset Sources</a></li>
                <li><a href="/animancer/v4-0/docs/source/coding-standard">Coding Standard</a></li>
                <li><a href="/animancer/v4-0/docs/source/default-script-template">Default Script Template</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/v4-0/docs/changes">Change Log</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/v4-0/docs/changes/animancer-v4-0-beta">Beta Test v4.0</a></li>
                <li><a href="/animancer/v4-0/docs/changes/animancer-v4-0">Progress of v4.0</a></li>
                <li><a href="/animancer/v4-0/docs/changes/animancer-v3-1">Animancer v3.1</a></li>
                <li><a href="/animancer/v4-0/docs/changes/animancer-v3-0">Animancer v3.0</a></li>
                <li><a href="/animancer/v4-0/docs/changes/animancer-v2-0">Animancer v2.0</a></li>
                <li><a href="/animancer/v4-0/docs/changes/animancer-v1-3">Animancer v1.3</a></li>
                <li><a href="/animancer/v4-0/docs/changes/animancer-v1-2">Animancer v1.2</a></li>
                <li><a href="/animancer/v4-0/docs/changes/animancer-v1-1">Animancer v1.1</a></li>
                <li><a href="/animancer/v4-0/docs/changes/animancer-v1-0">Animancer v1.0</a></li>

                    </ul>
                </li>

                    </ul>
                            
                </section>                
            </aside>
            
            <!-- Content Wrapper. Contains page content -->
            <div class="content-wrapper">
                



		<section class="content-header">
			<h1>02 Playing and Fading</h1>
		</section>
	<section class="content">
		<blockquote class="blockquote">
<p><strong>Difficulty</strong>: <a href="../../../introduction/glossary#example-difficulty">Beginner</a></p>
<p><strong>Location</strong>: <em>Assets/Plugins/Animancer/Examples/01 Basics/02 Playing and Fading</em></p>
<p><strong>Namespace</strong>: <a href="../../../../api/Animancer.Examples.Basics"><code>Animancer.Examples.Basics</code></a></p>
</blockquote>
<p>This example compares the common ways to transition between two animations:</p>
<table class="table">
<thead>
<tr>
<th>Idle</th>
<th>Golf Swing</th>
</tr>
</thead>
<tbody>
<tr>
<td><img src="idle.gif" class="img-responsive"></td>
<td><img src="swing.gif" class="img-responsive"></td>
</tr>
</tbody>
</table>
<p>The <a href="../scene-setup">Basic Scene Setup</a> is the same as the first example, but this time we are using the <code><a href="/animancer/v4-0/api/Animancer.Examples.Basics/PlayingAndFading">PlayingAndFading</a></code> script instead of <code><a href="/animancer/v4-0/api/Animancer.Examples.Basics/PlayAnimationOnClick">PlayAnimationOnClick</a></code>. The two scripts look quite similar, but instead of an <code>Update</code> method this one has a bunch of <code>public</code> methods which are called by <a href="../scene-setup#buttons">UI Buttons</a>.</p>
<h1 id="script-setup">Script Setup</h1>
<p>The start of the script is practically identical to the <code><a href="/animancer/v4-0/api/Animancer.Examples.Basics/PlayAnimationOnClick">PlayAnimationOnClick</a></code> script from the <a href="../quick-play">Quick Play</a> example:</p>
<pre><code class="language-cs">public sealed class <a href="/animancer/v4-0/api/Animancer.Examples.Basics/PlayingAndFading">PlayingAndFading</a> : MonoBehaviour
{
    [SerializeField] private <a href="/animancer/v4-0/api/Animancer/AnimancerComponent">AnimancerComponent</a> _Animancer;
    [SerializeField] private AnimationClip _Idle;
    [SerializeField] private AnimationClip _Action;

    private void OnEnable()
    {
        _Animancer.Play(_Idle);
    }
</code></pre>
<p>But instead of using the <em>Humanoid-GolfSwingReady</em> animation as our <code>_Idle</code>, we are using the regular standing <em>Humanoid-Idle</em> to make the differences between it and the <code>_Action</code> much clearer:</p>
<p><img src="inspector.png" class="img-responsive"></p>
<h1 id="play">Play</h1>
<p>First off we simply <code>Play</code> the action animation like so:</p>
<pre><code class="language-cs">public void Play()
{
    _Animancer.Play(_Action);
}
</code></pre>
<p>This method and all the others in this example are set up to be called by <a href="../scene-setup#buttons">UI Buttons</a>.</p>
<p>Which gives us this when we go into Play Mode:</p>
<p><img src="play.gif" class="img-responsive"></p>
<ul>
<li>The <em>Idle</em> animation is looping (the <code>Loop Time</code> toggle is enabled in its import settings), meaning that every time it gets to the end it will just start again.</li>
<li>The <em>GolfSwing</em> animation is not looping, meaning that it will play through once then freeze indefinitely on the last frame.</li>
</ul>
<p></p><details><summary>That method is so simple we could <em>almost</em> just have the UI Button play the animation directly.</summary><p>
</p><p>The UI <code>Button</code> component uses a <code>UnityEvent</code> field to allow the user to specify what they want the button to do when clicked using the Inspector. Unfortunately, it does not allow methods with a non-void return type and since <code>AnimancerComponent.Play</code> returns the <code><a href="/animancer/v4-0/api/Animancer/AnimancerState">AnimancerState</a></code> of the animation being played, that means a <code>UnityEvent</code> will not allow that method to be selected.</p>
<p>This limitation and various others can be avoided with a free plugin called <a href="https://kybernetik.com.au/ultevents">UltEvents</a> (also made by <a href="https://kybernetik.com.au/kailas-dierk/unity-assets">Kybernetik</a> like Animancer). Unfortunately, it is not possible to directly change the inbuilt <code>Button</code> component to use an <code>UltEvent</code> instead of a <code>UnityEvent</code>, but it has an <code>UltEventHolder</code> component which you could add to a <code>Button</code>. Have the <code>Button</code> call the <code>UltEventHolder</code>s <code>Invoke</code> method and configure the event you want in the <code>UltEventHolder</code> instead. It also means that you can use <code>UltEvent</code>s in your own scripts any time you would normally use a <code>UnityEvent</code> to make use of the superior features and improved Inspector interface.</p>
<p></p></details><p></p>
<h1 id="play-then-idle">Play then Idle</h1>
<p>Most of the time you do not want a character to just freeze once they finish an animation, you want them so start doing something else. In this simple example that means we want them to just return to the <em>Idle</em> animation using the <a href="../../../manual/events/end#events">End Event</a>, so our next method looks like this:</p>
<pre><code class="language-cs">public void PlayThenIdle()
{
    _Animancer.Play(_Action).Events.OnEnd = () =&gt; _Animancer.Play(_Idle);
}
</code></pre>
<p>Here we are using a <a href="https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/statements-expressions-operators/lambda-expressions">Lambda Expression</a> to declare the callback method inside the current method. In this case we could have assigned <code>OnEnable</code> to the event since it does the same thing (<code>_Animancer.Play(_Action).Events.OnEnd = OnEnable;</code>) but that is not always so convenient and "OnEnable" is not really an appropriate name for what it does (which does not matter in a simple example like this, but effective naming is very important in more complex projects).</p>
<p><img src="play-then-idle.gif" class="img-responsive"></p>
<p>That might not be what you expected because the <code>Play</code> method does not automatically restart the animation. The <em>GolfSwing</em> was already playing from before, so the <code>Play</code> call did basically nothing and then we registered an <code>OnEnd</code> callback which got triggered the very next frame because the animation was already past its end. The next section (<a href="#play-from-start">Play from Start</a>) explains why it works like this, so let's ignore it for now.</p>
<p>Clicking the button again after that plays it and returns to idle as expected and clicking it repeatedly doesn't interrupt the animation if it is already playing.</p>
<p>Note that all events are <a href="../../../manual/events/animancer#auto-clear">Automatically Cleared</a> whenever a new animation is played. This ensures that the above <a href="#play">Play</a> method will not have to worry about any of these other methods that might have set their own events.</p>
<h1 id="play-from-start">Play from Start</h1>
<p>Often when triggering an animation you will want to ensure that it starts from the beginning, even if it was already playing. To do that, you can set the <code><a href="/animancer/v4-0/api/Animancer/AnimancerState/840B3EB1">AnimancerState.Time</a></code> to 0:</p>
<pre><code class="language-cs">public void PlayFromStart()
{
    _Animancer.Play(_Action).Time = 0;
}
</code></pre>
<p><img src="play-from-start.gif" class="img-responsive"></p>
<p>This time, even if we click the button in the middle of the animation it will always snap back to the start and play from there.</p>
<p>The default behaviour means we can lazily call <code>Play</code> to ensure that a particular animation is playing rather than needing to manually check that it isn't already playing before we call <code>Play</code>.</p>
<h1 id="play-from-start-then-idle">Play from Start then Idle</h1>
<p>For the sake of completeness, this method combines the previous two so that the animation always starts from the beginning and returns to <em>Idle</em> at the end:</p>
<pre><code class="language-cs">public void PlayFromStartThenIdle()
{
    var state = _Animancer.Play(_Action);
    state.Time = 0;
    state.Events.OnEnd = () =&gt; _Animancer.Play(_Idle);
}
</code></pre>
<p><img src="play-from-start-then-idle.gif" class="img-responsive"></p>
<h1 id="crossfade">CrossFade</h1>
<p>Instead of immediately snapping the character's pose to the new animation, it is often desirable to transition towards it over time to give the impression of smooth motion. This is called "<a href="../../../manual/blending/fading"><em>Cross Fading</em></a>", which can be done by simply any of the <a href="../../../manual/playing#cross-fade">Play methods that have a "fadeDuration" parameter</a> to specify how long you want the transition to take:</p>
<pre><code class="language-cs">public void CrossFade()
{
    _Animancer.Play(_Action, 0.25f);
}
</code></pre>
<p>The optional <code><a href="/animancer/v4-0/api/Animancer/FadeMode">FadeMode</a></code> parameter determines whether the specified <code>fadeDuration</code> is measured in seconds or as a portion of the animation's length. The default is seconds.</p>
<p><img src="crossfade.gif" class="img-responsive"></p>
<p>Note how the <code>Weight</code>s on the right of the Inspector change over time instead of snapping to their target value instantly. If you want to see it in slow motion, you can put a <code><a href="/animancer/v4-0/api/Animancer.Examples/TimeScale">TimeScale</a></code> component on any object in the scene to easily control the game's overall speed.</p>
<p>It is often better to use <a href="../../../manual/transitions">Transitions</a> so that you can edit the animation details in the Inspector and preview what it will look like instead of hard-coding everything in your scripts. However, the purpose of this example is to explain how things work internally so they will not be used here.</p>
<h1 id="crossfade-then-idle">CrossFade then Idle</h1>
<p>Same as with <a href="#play-then-idle">Play then Idle</a>, we want to go back to <em>Idle</em> once the <em>GolfSwing</em> ends, but this time we can do it smoothly:</p>
<pre><code class="language-cs">public void CrossFadeThenIdle()
{
    _Animancer.Play(_Action, 0.25f).Events.OnEnd = () =&gt; _Animancer.Play(_Idle, 0.25f);

    // That line is quite long so you might want to split it.
    // Note how the first line does not have a semicolon at the end.
    // _Animancer.Play(_Action, 0.25f)
    //     .Events.OnEnd = () =&gt; _Animancer.Play(_Idle, 0.25f);
}
</code></pre>
<p>Just like with <a href="#play-then-idle">Play then Idle</a>, if we do this when the character is already at the end of the animation he goes straight back to <em>Idle</em>, though this time it does it smoothly.</p>
<p><img src="crossfade-then-idle.gif" class="img-responsive"></p>
<h1 id="bad-crossfade-from-start">Bad CrossFade from Start</h1>
<p>Since <code>...Play(_Action).Time = 0;</code> allows you to ensure that the animation plays from the start, you might try to do the same thing when fading:</p>
<pre><code class="language-cs">public void BadCrossFadeFromStart()
{
    _Animancer.Play(_Action, 0.25f).Time = 0;
}
</code></pre>
<p><img src="bad-crossfade-from-start.gif" class="img-responsive"></p>
<p>This works fine when transitioning from another animation (<em>Idle</em> to <em>GolfSwing</em> is smooth), but instantly snapping the <code>Time</code> back to the start prevents it from executing a smooth transition back to the start of the same animation because an <code><a href="/animancer/v4-0/api/Animancer/AnimancerState">AnimancerState</a></code> only has one <code>Time</code> value. It can either be at its previous value or at the beginning, but not both and trying to interpolate between the two would mean it plays backwards for a moment which isn't very useful either.</p>
<h1 id="good-crossfade-from-start">Good CrossFade from Start</h1>
<p>Fortunately, the optional <code><a href="/animancer/v4-0/api/Animancer/FadeMode">FadeMode</a></code> parameter allows you to indicate that you want the fade to come from the start of the animation:</p>
<pre><code class="language-cs">public void GoodCrossFadeFromStart()
{
    _Animancer.Play(_Action, 0.25f, FadeMode.FromStart);
}
</code></pre>
<p><img src="good-crossfade-from-start.gif" class="img-responsive"></p>
<p>When <code>FadeMode.FromStart</code> tries to fade into an animation that is already playing it creates a second <code><a href="/animancer/v4-0/api/Animancer/AnimancerState">AnimancerState</a></code> to play the same <code>AnimationClip</code> so that the original can continue playing as it fades out while the new one fades in from the start. In this case it still looks rather silly because it doesn't make sense to interrupt a golf swing like that, but the point is that it transitions smoothly instead of snapping back to the start instantly.</p>
<p>If you click the button rapidly it will continue creating new states until it has 5, then it will throw an <code>ArgumentOutOfRangeException</code>. This is an intentional safety measure since it is unlikely that you would actually want that many copies of an animation playing at once so it is a likely indication of a bug in your code (and it certainly looks silly in this example). However, if you really do want to have many copies for whatever reason, you can simply set <code>AnimancerLayer.maxStateDepth</code> to a higher value beforehand.</p>
<h1 id="good-crossfade-from-start-then-idle">Good CrossFade from Start then Idle</h1>
<p>Again for the sake of completeness, let's combine the two:</p>
<pre><code class="language-cs">public void GoodCrossFadeFromStartThenIdle()
{
    _Animancer.Play(_Action, 0.25f, FadeMode.FromStart)
        .Events.OnEnd = () =&gt; _Animancer.Play(_Idle, 0.25f);
}
</code></pre>
<p><img src="good-crossfade-from-start-then-idle.gif" class="img-responsive"></p>
<p>Note how we are not specifying a <code><a href="/animancer/v4-0/api/Animancer/FadeMode">FadeMode</a></code> for the return transition to <em>Idle</em> since we do not actually care what <code>Time</code> that animation is at and it's unlikely that we would try to transition back to idle repeatedly anyway.</p>

	</section>
                
            </div>           
            
            <!-- Footer -->
            <footer class="main-footer">
            </footer>
            
        </div>
        <div class="wrapper bottom-wrapper">
            <footer class="bottom-footer">
                Generated by <a href="https://wyam.io">Wyam</a>
            </footer>
        </div>
        <a href="javascript:" id="return-to-top"><i class="fa fa-chevron-up"></i></a>
        
        <script>           
            // Close the sidebar if we select an anchor link
            $(".main-sidebar a[href^='#']:not('.expand')").click(function(){
                $(document.body).removeClass('sidebar-open');
            });
            
            $(document).ready(function() {
                mermaid.initialize(
                {
                    flowchart:
                    {
                        useMaxWidth: false
                    },
					startOnLoad: false,
					cloneCssStyles: false
                });     
                mermaid.init(undefined, ".mermaid");

                // Remove the max-width setting that Mermaid sets
                var mermaidSvg = $('.mermaid svg');
                mermaidSvg.addClass('img-responsive');
                mermaidSvg.css('max-width', '');

                // Make it scrollable
				var target = document.querySelector(".mermaid svg");
				if(target !== null)
				{
					var panZoom = window.panZoom = svgPanZoom(target, {
						zoomEnabled: true,
						controlIconsEnabled: true,
						fit: true,
						center: true,
                        maxZoom: 20,
                        zoomScaleSensitivity: 0.6
					});			                          

                    // Do the reset once right away to fit the diagram
                    panZoom.resize();
                    panZoom.fit();
                    panZoom.center();
                    
                    $(window).resize(function(){
                        panZoom.resize();
                        panZoom.fit();
                        panZoom.center();
                    });
				}
                
                $('pre code').each(function(i, block) {
                    hljs.highlightBlock(block);
                });  
            });

            hljs.initHighlightingOnLoad();

            // Back to top
            $(window).scroll(function() {
                if ($(this).scrollTop() >= 200) {        // If page is scrolled more than 50px
                    $('#return-to-top').fadeIn(1000);    // Fade in the arrow
                } else {
                    $('#return-to-top').fadeOut(1000);   // Else fade out the arrow
                }
            });
            $('#return-to-top').click(function() {      // When arrow is clicked
                $('body,html').animate({
                    scrollTop : 0                       // Scroll to top of body
                }, 500);
            });
        </script>
    
</body></html>