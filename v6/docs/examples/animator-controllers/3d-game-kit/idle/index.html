<!DOCTYPE html><html><head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=Edge">
        <meta name="description">
        <meta name="keywords" content="static content generator,static site generator,static site,HTML,web development,.NET,C#,Razor,Markdown,YAML">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="shortcut icon" href="/animancer/v6/assets/img/favicon.ico" type="image/x-icon">
        <link rel="icon" href="/animancer/v6/assets/img/favicon.ico" type="image/x-icon">
        <title>Animancer - Idle</title>
        <link href="/animancer/v6/assets/css/highlight.css" rel="stylesheet">
        <link href="/animancer/v6/assets/css/bootstrap/bootstrap.css" rel="stylesheet">
        <link href="/animancer/v6/assets/css/adminlte/AdminLTE.css" rel="stylesheet">
        <link href="/animancer/v6/assets/css/theme/theme.css" rel="stylesheet">
        <link href="//fonts.googleapis.com/css?family=Roboto+Mono:400,700|Roboto:400,400i,700,700i" rel="stylesheet">
        <link href="/animancer/v6/assets/css/font-awesome.min.css" rel="stylesheet" type="text/css">
        <link href="/animancer/v6/assets/css/override.css" rel="stylesheet">
        <script src="/animancer/v6/assets/js/jquery-2.2.3.min.js"></script>
        <script src="/animancer/v6/assets/js/bootstrap.min.js"></script>        
        <script src="/animancer/v6/assets/js/app.min.js"></script>         
        <script src="/animancer/v6/assets/js/highlight.pack.js"></script>   
        <script src="/animancer/v6/assets/js/jquery.slimscroll.min.js"></script>
        <script src="/animancer/v6/assets/js/jquery.sticky-kit.min.js"></script>
        <script src="/animancer/v6/assets/js/mermaid.min.js"></script>
        <script src="/animancer/v6/assets/js/svg-pan-zoom.min.js"></script>
        <!--[if lt IE 9]>
        <script src="/animancer/v6/assets/js/html5shiv.min.js"></script>
        <script src="/animancer/v6/assets/js/respond.min.js"></script>
        <![endif]-->  

        
    </head>
    <body class="hold-transition wyam layout-boxed  ">    
        <div class="top-banner"></div>
        <div class="wrapper with-container">
            <!-- Header -->
            <header class="main-header">   
                     
                <a href="/animancer/v6/" class="logo">
                            <span>Animancer</span>
                </a>   
                         
                <nav class="navbar navbar-static-top" role="navigation">
                    <!-- Sidebar toggle button-->
                        <a href="#" class="sidebar-toggle visible-xs-block" data-toggle="offcanvas" role="button">
                            <span class="sr-only">Toggle side menu</span>
                            <i class="fa fa-chevron-circle-right"></i>
                        </a>
                                        
                    <div class="navbar-header">
                        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse">
                            <span class="sr-only">Toggle side menu</span>
                            <i class="fa fa-chevron-circle-down"></i>
                        </button>
                    </div>
            
                    <!-- Collect the nav links, forms, and other content for toggling -->
                    <div class="collapse navbar-collapse pull-left" id="navbar-collapse">
                        <ul class="nav navbar-nav">                            
                                    <li><a href="/animancer/v6/docs/introduction/features"><img src="/animancer/v6/images/features.png" height="20" style="position:relative; left:-7px; top:-1px;"> Features</a></li>
        <li><a href="/animancer/v6/docs/download"><img src="/animancer/v6/images/download.png" height="20" style="position:relative; left:-7px; top:-1px;"> Download</a></li>
        <li class="active"><a href="/animancer/v6/docs"><img src="/animancer/v6/images/docs.png" height="20" style="position:relative; left:-5px; top:-1px;"> Documentation</a></li>
        <li><a href="/animancer/v6/docs/help"><img src="/animancer/v6/images/help.png" height="20" style="position:relative; left:-4px; top:-1px;"> Help</a></li>
        <li><a href="/animancer/v6/api/Animancer/AnimancerComponent"><img src="/animancer/v6/images/api.png" height="20" style="position:relative; left:-3px; top:-1px;"> API v6.0</a></li>
        <li><a href="https://kybernetik.com.au/kailas-dierk/unity-assets"><img src="/animancer/v6/images/kybernetik.png" height="20" style="position:relative; left:-2px; top:-1px;"> Other Assets</a></li>
 
                        </ul>       
                    </div>
                    <!-- /.navbar-collapse -->
                
                    <!-- Navbar Right Menu -->
                </nav>
<a href="/animancer" style="font-size:1.42em; color:white">This is the <strong>Animancer v6.0 Preview</strong> Documentation. Click Here to return to the v5.3 Documentation.</a>
            </header>
            
            <!-- Left side column. contains the logo and sidebar -->
            <aside class="main-sidebar ">
                <section class="infobar" data-spy="affix" data-offset-top="60" data-offset-bottom="200"> 
                    	
    <div id="infobar-headings"><h6>On This Page</h6><p><a href="#mecanim">Mecanim</a></p>
<p><a href="#animancer">Animancer</a></p>
<p><a href="#startup">Startup</a></p>
<p><a href="#state-entry">State Entry</a></p>
<p><a href="#check-motion-state">Check Motion State</a></p>
<p><a href="#update-speed-control">Update Speed Control</a></p>
<p><a href="#exit-transition">Exit Transition</a></p>
<p><a href="#custom-fade">Custom Fade</a></p>
<p><a href="#adding-more-idles">Adding More Idles</a></p>
<hr class="infobar-hidden">
</div>

                </section>
                <section class="sidebar">    
                                     
                    

                    <ul class="sidebar-menu">
                        

                <li><a href="/animancer/v6/docs/download">Download</a></li>
                <li class="treeview">
                    <a href="/animancer/v6/docs/introduction">Introduction</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/v6/docs/introduction/features">Features</a></li>
                <li class="treeview">
                    <a href="/animancer/v6/docs/introduction/mecanim-vs-animancer">Mecanim vs. Animancer</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li class="treeview">
                    <a href="/animancer/v6/docs/introduction/mecanim-vs-animancer/why">Why Replace Mecanim?</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/v6/docs/introduction/mecanim-vs-animancer/why/simplicity">Simplicity</a></li>
                <li><a href="/animancer/v6/docs/introduction/mecanim-vs-animancer/why/transparency">Transparency</a></li>
                <li><a href="/animancer/v6/docs/introduction/mecanim-vs-animancer/why/adaptability">Adaptability</a></li>
                <li><a href="/animancer/v6/docs/introduction/mecanim-vs-animancer/why/clarity">Clarity</a></li>
                <li><a href="/animancer/v6/docs/introduction/mecanim-vs-animancer/why/safety">Safety</a></li>
                <li><a href="/animancer/v6/docs/introduction/mecanim-vs-animancer/why/reliability">Reliability</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/v6/docs/introduction/mecanim-vs-animancer/comparison">Comparison</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/v6/docs/introduction/mecanim-vs-animancer/comparison/playing">Playing</a></li>
                <li><a href="/animancer/v6/docs/introduction/mecanim-vs-animancer/comparison/waiting">Waiting</a></li>
                <li><a href="/animancer/v6/docs/introduction/mecanim-vs-animancer/comparison/speed-and-time">Speed and Time</a></li>
                <li><a href="/animancer/v6/docs/introduction/mecanim-vs-animancer/comparison/weapon-animations">Weapon Animations</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/v6/docs/introduction/mecanim-vs-animancer/conversion">Conversion</a></li>
                <li><a href="/animancer/v6/docs/introduction/mecanim-vs-animancer/performance">Performance</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/v6/docs/introduction/glossary">Glossary</a></li>
                <li class="treeview">
                    <a href="/animancer/v6/docs/introduction/cs">C# in Unity</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/v6/docs/introduction/cs/overview">Scripting Overview</a></li>
                <li><a href="/animancer/v6/docs/introduction/cs/organisation">Organisation</a></li>
                <li><a href="/animancer/v6/docs/introduction/cs/variables">Variables</a></li>
                <li><a href="/animancer/v6/docs/introduction/cs/methods">Methods</a></li>
                <li><a href="/animancer/v6/docs/introduction/cs/inheritance">Inheritance</a></li>
                <li><a href="/animancer/v6/docs/introduction/cs/vectors">Vectors</a></li>
                <li><a href="/animancer/v6/docs/introduction/cs/other">Other Topics</a></li>

                    </ul>
                </li>

                    </ul>
                </li>
                <li class="treeview active">
                    <a href="/animancer/v6/docs/examples">Examples</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li class="treeview">
                    <a href="/animancer/v6/docs/examples/basics">01 Basics</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/v6/docs/examples/basics/scene-setup">Basic Scene Setup</a></li>
                <li><a href="/animancer/v6/docs/examples/basics/quick-play">01 Quick Play</a></li>
                <li><a href="/animancer/v6/docs/examples/basics/playing-and-fading">02 Playing and Fading</a></li>
                <li><a href="/animancer/v6/docs/examples/basics/sequence-coroutine">03 Sequence Coroutine</a></li>
                <li><a href="/animancer/v6/docs/examples/basics/named-animations">04 Named Animations</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/v6/docs/examples/fine-control">02 Fine Control</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/v6/docs/examples/fine-control/spider-bot">01 Spider Bot</a></li>
                <li><a href="/animancer/v6/docs/examples/fine-control/doors">02 Doors</a></li>
                <li><a href="/animancer/v6/docs/examples/fine-control/solo-animation">03 Solo Animation</a></li>
                <li><a href="/animancer/v6/docs/examples/fine-control/update-rate">04 Update Rate</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/v6/docs/examples/locomotion">03 Locomotion</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/v6/docs/examples/locomotion/walk-and-run">01 Walk and Run</a></li>
                <li><a href="/animancer/v6/docs/examples/locomotion/root-motion">02 Root Motion</a></li>
                <li><a href="/animancer/v6/docs/examples/locomotion/linear-blending">03 Linear Blending</a></li>
                <li><a href="/animancer/v6/docs/examples/locomotion/directional-blending">04 Directional Blending</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/v6/docs/examples/directional-sprites">04 Directional Sprites</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/v6/docs/examples/directional-sprites/basic-movement">01 Basic Movement</a></li>
                <li><a href="/animancer/v6/docs/examples/directional-sprites/character-controller">02 Character Controller</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/v6/docs/examples/events">05 Events</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/v6/docs/examples/events/footsteps">01 Footstep Events</a></li>
                <li><a href="/animancer/v6/docs/examples/events/golf">02 Golf Events</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/v6/docs/examples/fsm">06 State Machines</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li class="treeview">
                    <a href="/animancer/v6/docs/examples/fsm/game-manager">01 Game Manager</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/v6/docs/examples/fsm/game-manager/enum">Enum</a></li>
                <li><a href="/animancer/v6/docs/examples/fsm/game-manager/fsm">FSM</a></li>
                <li><a href="/animancer/v6/docs/examples/fsm/game-manager/comparison">Comparison</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/v6/docs/examples/fsm/creatures">02 Creatures</a></li>
                <li><a href="/animancer/v6/docs/examples/fsm/interrupts">03 Interrupt Management</a></li>
                <li><a href="/animancer/v6/docs/examples/fsm/brains">04 Brains</a></li>
                <li><a href="/animancer/v6/docs/examples/fsm/more-brains">05 More Brains</a></li>
                <li><a href="/animancer/v6/docs/examples/fsm/weapons">06 Weapons</a></li>
                <li><a href="/animancer/v6/docs/examples/fsm/platformer">07 Platformer</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/v6/docs/examples/layers">07 Layers</a></li>
                <li class="treeview">
                    <a href="/animancer/v6/docs/examples/ik">08 Inverse Kinematics</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/v6/docs/examples/ik/puppet">01 Puppet</a></li>
                <li><a href="/animancer/v6/docs/examples/ik/uneven-ground">02 Uneven Ground</a></li>

                    </ul>
                </li>
                <li class="treeview active">
                    <a href="/animancer/v6/docs/examples/animator-controllers">09 Animator Controllers</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/v6/docs/examples/animator-controllers/basics">01 Hybrid Basics</a></li>
                <li><a href="/animancer/v6/docs/examples/animator-controllers/mini-game">02 Hybrid Mini Game</a></li>
                <li class="treeview active">
                    <a href="/animancer/v6/docs/examples/animator-controllers/3d-game-kit">03 3D Game Kit</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/v6/docs/examples/animator-controllers/3d-game-kit/problems">Problems with the Mecanim Character</a></li>
                <li><a href="/animancer/v6/docs/examples/animator-controllers/3d-game-kit/respawn">Respawn</a></li>
                <li class="selected"><a href="/animancer/v6/docs/examples/animator-controllers/3d-game-kit/idle">Idle</a></li>
                <li class="treeview">
                    <a href="/animancer/v6/docs/examples/animator-controllers/3d-game-kit/locomotion">Locomotion</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/v6/docs/examples/animator-controllers/3d-game-kit/locomotion/movement">Movement</a></li>
                <li><a href="/animancer/v6/docs/examples/animator-controllers/3d-game-kit/locomotion/turning">Turning</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/v6/docs/examples/animator-controllers/3d-game-kit/airborne">Airborne</a></li>
                <li><a href="/animancer/v6/docs/examples/animator-controllers/3d-game-kit/landing">Landing</a></li>
                <li><a href="/animancer/v6/docs/examples/animator-controllers/3d-game-kit/attack">Attack</a></li>
                <li><a href="/animancer/v6/docs/examples/animator-controllers/3d-game-kit/flinch">Flinch</a></li>
                <li><a href="/animancer/v6/docs/examples/animator-controllers/3d-game-kit/die">Die</a></li>

                    </ul>
                </li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/v6/docs/examples/jobs">10 Animation Jobs</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/v6/docs/examples/jobs/two-bone-ik">01 Two Bone IK</a></li>
                <li><a href="/animancer/v6/docs/examples/jobs/damping">02 Damping</a></li>
                <li><a href="/animancer/v6/docs/examples/jobs/lean">03 Lean</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/v6/docs/examples/integration">Integration</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/v6/docs/examples/integration/animation-rigging">Animation Rigging</a></li>
                <li><a href="/animancer/v6/docs/examples/integration/dynamic-bone">Dynamic Bone</a></li>
                <li><a href="/animancer/v6/docs/examples/integration/final-ik">Final IK</a></li>
                <li><a href="/animancer/v6/docs/examples/integration/hairibar-ragdoll">Hairibar Ragdoll</a></li>
                <li><a href="/animancer/v6/docs/examples/integration/puppet-master">Puppet Master</a></li>

                    </ul>
                </li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/v6/docs/manual">User Manual</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li class="treeview">
                    <a href="/animancer/v6/docs/manual/getting">Getting Animations</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/v6/docs/manual/getting/mixamo">Mixamo</a></li>
                <li><a href="/animancer/v6/docs/manual/getting/importing">Importing</a></li>
                <li><a href="/animancer/v6/docs/manual/getting/animation-window">Animation Window</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/v6/docs/manual/playing">Playing Animations</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/v6/docs/manual/playing/states">States</a></li>
                <li><a href="/animancer/v6/docs/manual/playing/inspector">Inspector</a></li>
                <li><a href="/animancer/v6/docs/manual/playing/component-types">Component Types</a></li>
                <li><a href="/animancer/v6/docs/manual/playing/directional-sets">Directional Animation Sets</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/v6/docs/manual/transitions">Transitions</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/v6/docs/manual/transitions/types">Transition Types</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/v6/docs/manual/blending">Blending</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/v6/docs/manual/blending/fading">Fading</a></li>
                <li><a href="/animancer/v6/docs/manual/blending/layers">Layers</a></li>
                <li><a href="/animancer/v6/docs/manual/blending/mixers">Mixers</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/v6/docs/manual/events">Events</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/v6/docs/manual/events/animation">Animation Events</a></li>
                <li><a href="/animancer/v6/docs/manual/events/animancer">Animancer Events</a></li>
                <li><a href="/animancer/v6/docs/manual/events/end">End Events</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/v6/docs/manual/fsm">Finite State Machines</a></li>
                <li><a href="/animancer/v6/docs/manual/animator-controllers">Animator Controllers</a></li>
                <li><a href="/animancer/v6/docs/manual/timeline">Timeline</a></li>
                <li><a href="/animancer/v6/docs/manual/ik">Inverse Kinematics</a></li>
                <li class="treeview">
                    <a href="/animancer/v6/docs/manual/tools">Animancer Tools</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/v6/docs/manual/tools/modify-sprites">Modify Sprites</a></li>
                <li><a href="/animancer/v6/docs/manual/tools/rename-sprites">Rename Sprites</a></li>
                <li><a href="/animancer/v6/docs/manual/tools/generate-sprite-animations">Generate Sprite Animations</a></li>
                <li><a href="/animancer/v6/docs/manual/tools/remap-sprite-animation">Remap Sprite Animation</a></li>
                <li><a href="/animancer/v6/docs/manual/tools/remap-animation-bindings">Remap Animation Bindings</a></li>

                    </ul>
                </li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/v6/docs/bugs">Unity Bugs</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/v6/docs/bugs/events">Animation Events</a></li>
                <li><a href="/animancer/v6/docs/bugs/paused-skinned-mesh-update">Paused Skinned Mesh Update</a></li>
                <li><a href="/animancer/v6/docs/bugs/serialized-array-initialization">Serialized Array Initialization</a></li>
                <li><a href="/animancer/v6/docs/bugs/stabilize-feet">Stabilize Feet</a></li>
                <li><a href="/animancer/v6/docs/bugs/timeline">Timeline</a></li>
                <li><a href="/animancer/v6/docs/bugs/timing">Timing</a></li>
                <li><a href="/animancer/v6/docs/bugs/update-modes">Update Modes</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/v6/docs/source">Source Code</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/v6/docs/source/dlls">DLLs</a></li>
                <li><a href="/animancer/v6/docs/source/creating-custom-states">Creating Custom States</a></li>
                <li><a href="/animancer/v6/docs/source/graph-structure">Graph Structure</a></li>
                <li><a href="/animancer/v6/docs/source/asset-sources">Asset Sources</a></li>
                <li><a href="/animancer/v6/docs/source/coding-standard">Coding Standard</a></li>
                <li><a href="/animancer/v6/docs/source/default-script-template">Default Script Template</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/v6/docs/changes">Change Log</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li class="treeview">
                    <a href="/animancer/v6/docs/changes/animancer-v6-0">Animancer v6.0</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/v6/docs/changes/animancer-v6-0/test">Test Releases</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/v6/docs/changes/animancer-v5-3">Animancer v5.3</a></li>
                <li><a href="/animancer/v6/docs/changes/animancer-v5-2">Animancer v5.2</a></li>
                <li><a href="/animancer/v6/docs/changes/animancer-v5-1">Animancer v5.1</a></li>
                <li class="treeview">
                    <a href="/animancer/v6/docs/changes/animancer-v5-0">Animancer v5.0</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/v6/docs/changes/animancer-v5-0/test">Test Releases</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/v6/docs/changes/animancer-v4-4">Animancer v4.4</a></li>
                <li><a href="/animancer/v6/docs/changes/animancer-v4-3">Animancer v4.3</a></li>
                <li><a href="/animancer/v6/docs/changes/animancer-v4-2">Animancer v4.2</a></li>
                <li><a href="/animancer/v6/docs/changes/animancer-v4-1">Animancer v4.1</a></li>
                <li class="treeview">
                    <a href="/animancer/v6/docs/changes/animancer-v4-0">Animancer v4.0</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/v6/docs/changes/animancer-v4-0/test">Test Releases</a></li>

                    </ul>
                </li>
                <li><a href="/animancer/v6/docs/changes/animancer-v3-1">Animancer v3.1</a></li>
                <li><a href="/animancer/v6/docs/changes/animancer-v3-0">Animancer v3.0</a></li>
                <li><a href="/animancer/v6/docs/changes/animancer-v2-0">Animancer v2.0</a></li>
                <li><a href="/animancer/v6/docs/changes/animancer-v1-3">Animancer v1.3</a></li>
                <li><a href="/animancer/v6/docs/changes/animancer-v1-2">Animancer v1.2</a></li>
                <li><a href="/animancer/v6/docs/changes/animancer-v1-1">Animancer v1.1</a></li>
                <li><a href="/animancer/v6/docs/changes/animancer-v1-0">Animancer v1.0</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/animancer/v6/docs/help">Help and FAQ</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/animancer/v6/docs/help/debugging">Debugging</a></li>

                    </ul>
                </li>

                    </ul>
                            
                </section>                
            </aside>
            
            <!-- Content Wrapper. Contains page content -->
            <div class="content-wrapper">
                



		<section class="content-header">
			<h1>Idle</h1>
		</section>
	<section class="content">
		<blockquote class="blockquote">
<p>This page is part of the <a href="../">3D Game Kit</a> example.</p>
</blockquote>
<p>It is fairly common for games to have a single default <em>Idle</em> animation as well as one or more others that can start playing if the default one plays for too long to show the character fidgeting or getting bored.</p>
<p><img src="idle.gif" class="img-responsive"></p>
<h1 id="mecanim">Mecanim</h1>
<p>The Mecanim character's <code>IdleSM</code> state is a <a href="https://docs.unity3d.com/Manual/NestedStateMachines.html">Sub State Machine</a> containing a regular default state and 3 others:</p>
<p><img src="idle-state-machine.png" class="img-responsive"></p>
<p>The default state has a <code>StateMachineBehaviour</code> to handle the countdown to play the other states:</p>
<p><img src="idle-random-state.png" class="img-responsive"></p>
<p>At first glance, that seems like it should be everything we need for the desired behaviour, but according to the Inspector the minimum wait time is set to 0 which seems odd. That would mean there is a chance for the character to become bored as soon as they stop walking or finish an attack.</p>
<p>Upon further investigation, it turns out that most other states do not actually have a direct transition back to <code>IdleSM</code>. Instead, there is actually another <code>Idle</code> state inside the <code>LocomotionSM</code> sub state machine:</p>
<p><img src="locomotion-state-machine.png" class="img-responsive"></p>
<p>So most states return to <code>LocomotionSM.Idle</code> which has a transition to the real <code>IdleSM.Idle</code> state (both of which use the same <code>AnimationClip</code>) based on the <code>TimeoutToIdle</code> trigger parameter.</p>
<p>Looking at the Animator Controller gives us no indication of where or how that parameter is used, but if we search through the code for its name we find it being used for a hash code:</p>
<pre><code class="language-cs">readonly int m_HashTimeoutToIdle = Animator.StringToHash("TimeoutToIdle");
</code></pre>
<p>Which is used in the <code>TimeoutToIdle</code> method that gets called every <code>FixedUpdate</code>:</p>
<pre><code class="language-cs">public float idleTimeout = 5f;// How long before Ellen starts considering random idles.

protected float m_IdleTimer;// Used to count up to Ellen considering a random idle.

// Called each physics step to count up to the point where Ellen considers a random idle.
void TimeoutToIdle()
{
    bool inputDetected = IsMoveInput || m_Input.Attack || m_Input.JumpInput;
    if (m_IsGrounded &amp;&amp; !inputDetected)
    {
        m_IdleTimer += Time.deltaTime;

        if (m_IdleTimer &gt;= idleTimeout)
        {
            m_IdleTimer = 0f;
            m_Animator.SetTrigger(m_HashTimeoutToIdle);
        }
    }
    else
    {
        m_IdleTimer = 0f;
        m_Animator.ResetTrigger(m_HashTimeoutToIdle);
    }

    m_Animator.SetBool(m_HashInputDetected, inputDetected);
}
</code></pre>
<p>Now we can finally understand what happens when the character becomes <em>Idle</em>:</p>
<ol>
<li>When you stop moving, land from a jump, finish an attack, etc. you go to the <code>LocomotionSM.Idle</code> state.</li>
<li>A timer runs constantly, but resets to 0 any time you press a button or leave the ground.</li>
<li>If the timer reaches 5 seconds, it sets the <code>TimeoutToIdle</code> trigger parameter so if you are in the <code>LocomotionSM.Idle</code> state it transitions to the <code>IdleSM.Idle</code> state.</li>
<li>Both of those states have the same <code>AnimationClip</code> so there is no visual difference, but now the <code>RandomStateSMB</code> attached to <code>IdleSM.Idle</code> starts.</li>
<li>When that timer starts it picks a random finish time between 0 and 5. This time it's using <em>normalized time</em>, so in terms of seconds that's actually between 0 and 5 x the length of the default <em>Idle</em> animation (5 x 3.933 = 19.665 seconds).</li>
<li>Once that timer finishes, it sets the <code>RandomIdle</code> parameter to a random number between 0 and 2 (inclusive).</li>
<li>The <code>IdleSM.Idle</code> state has a transition to each of the other animations in response to each possible number.</li>
<li>Once any of the animations finishes, it returns to <code>IdleSM.Idle</code> and starts from step 5 again.</li>
<li>Any interruptions cancel the whole thing and will start from step 1 next time you become <em>Idle</em>.</li>
</ol>
<p>Yet again, the character tried to do something really simple but since it was slightly outside the capabilities of the Animator Controller state machine system the logic ended up being scattered across several scripts, Inspector data in several different places, two Animator Controller parameters, two different timers, and to top it all off there is an <em>Idle</em> state in the <em>Locomotion</em> sub state machine.</p>
<h1 id="animancer">Animancer</h1>
<p></p><details><summary>With Animancer, all the above logic is defined by the <code>IdleState</code> script. As usual, this means less configuration in the Unity Editor in exchange for more code and it is significantly easier to understand the logic:</summary><p>
</p><pre><code class="language-cs">using Animancer;
using System;
using UnityEngine;

public sealed class IdleState : CreatureState
{
    [SerializeField] private <a href="/animancer/v6/api/Animancer/Transition">ClipState.Transition</a> _MainAnimation;
    [SerializeField] private float _RandomizeDelay = 5;
    [SerializeField] private float _MinRandomizeInterval = 0;
    [SerializeField] private float _MaxRandomizeInterval = 20;
    [SerializeField] private ClipState.Transition[] _RandomAnimations;

    private bool _JustStarted;
    private float _RandomizeTime;

    private void Awake()
    {
        Action onEnd = PlayMainAnimation;
        for (int i = 0; i &lt; _RandomAnimations.Length; i++)
        {
            _RandomAnimations[i].OnEnd = onEnd;
        }
    }

    public override bool CanEnterState =&gt; Creature.CharacterController.isGrounded;

    private void OnEnable()
    {
        PlayMainAnimation();
        _RandomizeTime += _FirstRandomizeDelay;
    }

    private void PlayMainAnimation()
    {
        _RandomizeTime = UnityEngine.Random.Range(_MinRandomizeInterval, _MaxRandomizeInterval);
        Creature.Animancer.Play(_MainAnimation);
    }

    private void FixedUpdate()
    {
        if (Creature.CheckMotionState())
            return;

        Creature.UpdateSpeedControl();

        var state = Creature.Animancer.States.Current;
        if (state == _MainAnimation.State &amp;&amp;
            state.Time &gt;= _RandomizeTime)
        {
            PlayRandomAnimation();
        }
    }

    private void PlayRandomAnimation()
    {
        var index = UnityEngine.Random.Range(0, _RandomAnimations.Length);
        var animation = _RandomAnimations[index];
        Creature.Animancer.Play(animation);
        CustomFade.Apply(Creature.Animancer, Easing.Sine.InOut);
    }
}
</code></pre>
<p></p></details><p></p>
<p>We start with some serialized fields to show in the Inspector:</p>
<pre><code class="language-cs">[SerializeField] private <a href="/animancer/v6/api/Animancer/Transition">ClipState.Transition</a> _MainAnimation;
[SerializeField] private float _FirstRandomizeDelay = 5;
[SerializeField] private float _MinRandomizeInterval = 0;
[SerializeField] private float _MaxRandomizeInterval = 20;
[SerializeField] private ClipState.Transition[] _RandomAnimations;
</code></pre>
<p>Note that we are not going to use normalized time like the Mecanim did because there is really no need to. It is much easier to understand values in seconds instead of needing to know how long the animation is to determine how long it will actually wait.</p>
<h1 id="startup">Startup</h1>
<p>On startup, we give each of the random animations an <a href="../../../../manual/events/end">End Event</a> to call the <code>PlayMainAnimation</code> method as if this state had just been entered again. We could just do <code>OnEnd = PlayMainAnimation</code> instead of declaring the <a href="../../../../introduction/cs/methods#delegates">Delegate</a> first, but that  assignment is actually shorthand for <code>OnEnd = new Action(PlayMainAnimation)</code> which would create a new  delegate object for each animation. This way all animations just share the same object.</p>
<pre><code class="language-cs">private void Awake()
{
    Action onEnd = PlayMainAnimation;
    for (int i = 0; i &lt; _RandomAnimations.Length; i++)
    {
        _RandomAnimations[i].OnEnd = onEnd;
    }
}
</code></pre>
<h1 id="state-entry">State Entry</h1>
<p>When the state is actually entered (<code>OnEnable</code>) it picks an amount of time to wait for randomization and starts the <code>_MainAnimation</code>, then adds the <code>_FirstRandomizeDelay</code> to the timer. But when one of the random animation finishes, it only calls <code>PlayMainAnimation</code> so it does not add the <code>_FirstRandomizeDelay</code> (the <code>IdleTimeOut</code> from the Mecanim character).</p>
<pre><code class="language-cs">private void OnEnable()
{
    PlayMainAnimation();
    _RandomizeTime += _FirstRandomizeDelay;
}

private void PlayMainAnimation()
{
    _RandomizeTime = UnityEngine.Random.Range(_MinRandomizeInterval, _MaxRandomizeInterval);
    Creature.Animancer.Play(_MainAnimation);
}
</code></pre>
<h1 id="check-motion-state">Check Motion State</h1>
<p>In <code>FixedUpdate</code> we start by having the <code>Creature</code> check if it needs to enter the <em>Locomotion</em> or <em>Airborne</em> states depending on whether the character is grounded and the movement input from the brain:</p>
<pre><code class="language-cs">private void FixedUpdate()
{
    if (Creature.CheckMotionState())
        return;

    ...

// Creature.cs:
public bool CheckMotionState()
{
    CreatureState state;
    if (_CharacterController.isGrounded)
    {
        state = _Brain.Movement == Vector3.zero ? _Idle : _Locomotion;
    }
    else
    {
        state = _Airborne;
    }

    return
        state != StateMachine.CurrentState &amp;&amp;
        StateMachine.TryResetState(state);
}
</code></pre>
<p>In an Animator Controller you need to manually set up the same transitions all over the place. For example, many states have exit transitions to the <em>Airborne</em> state based on the <code>Grounded</code> parameter so every time a new state is added you also need to make those same transitions. Adding a new movement state such as <em>Swimming</em> or <em>Flying</em> would mean that you need to basically go through every state with a transition to <em>Airborne</em> and add a transition to the new state. However, doing it in code with a standard <code>CheckMotionState</code> method means that any newly added state can clearly have the same standard transitions and any modifications to that method will automatically affect everything which calls that method.</p>
<h1 id="update-speed-control">Update Speed Control</h1>
<p>At this point we know we are still <em>Idle</em> this frame so we just want to decelerate the <code><a href="/animancer/v6/api/Animancer.Examples.AnimatorControllers.GameKit/Creature/224320DD">Creature.ForwardSpeed</a></code>, but we might as well share the same logic that other states will use for movement, so we put that function in the <code>Creature</code> class:</p>
<pre><code class="language-cs">// IdleState.cs:
private void FixedUpdate()
{
    ...
    Creature.UpdateSpeedControl();
}

// Creature.cs:
public void UpdateSpeedControl()
{
    var movement = _Brain.Movement;
    movement = Vector3.ClampMagnitude(movement, 1);

    DesiredForwardSpeed = movement.magnitude * _Stats.MaxSpeed;

    var deltaSpeed = movement != Vector3.zero ? _Stats.Acceleration : _Stats.Deceleration;
    ForwardSpeed = Mathf.MoveTowards(ForwardSpeed, DesiredForwardSpeed, deltaSpeed * Time.deltaTime);
}
</code></pre>
<h1 id="exit-transition">Exit Transition</h1>
<p>Finally, we check if the current state is the <code>_MainAnimation</code> and it has passed the <code>_RandomizeTime</code> that was chosen when it started to choose one of the random animations to play:</p>
<pre><code class="language-cs">private void FixedUpdate()
{
    ...
    var state = Creature.Animancer.States.Current;
    if (state == _MainAnimation.State &amp;&amp;
        state.Time &gt;= _RandomizeTime)
    {
        PlayRandomAnimation();
    }
}

private void PlayRandomAnimation()
{
    var index = UnityEngine.Random.Range(0, _RandomAnimations.Length);
    var animation = _RandomAnimations[index];
    Creature.Animancer.Play(animation);
}
</code></pre>
<h1 id="custom-fade">Custom Fade</h1>
<p>The Mecanim character uses a fixed transition duration of 0.25 seconds between each of the idle animations. That causes a rather sudden change in the character's motion which the Animancer character smoothes out a bit by using 0.5 seconds instead. Each transition could have its duration further customised to suit each individual animation, but that is not the goal of this example. However, there is one more thing we can do to smooth out the transition: we can apply a <a href="../../../../manual/blending/fading#custom-fade">Custom Fade</a> right after starting the transition to replaces its default Linear Interpolation with an <code><a href="/animancer/v6/api/Animancer/Function">Easing.Function</a></code>, <code>AnimationCurve</code>, or custom delegate (such as one of the methods in the <code><a href="/animancer/v6/api/Animancer/Easing">Easing</a></code> class):</p>
<pre><code class="language-cs">private void PlayRandomAnimation()
{
    ...
    Creature.Animancer.Play(animation);
    CustomFade.Apply(Creature.Animancer, Easing.Sine.InOut);
}
</code></pre>
<p>The following video compares the default Linear Interpolation (left) with the <a href="https://easings.net/#easeInOutSine">Sine In Out</a> function (right). The differences are fairly subtle, but if you look at the way the left character suddenly changes direction for each transition you can see that the right character does so a bit more smoothly.</p>
<p><img src="custom-fade.gif" class="img-responsive"></p>
<h1 id="adding-more-idles">Adding More Idles</h1>
<p>Aside from the distribution of data and logic, there is one more notable difference between the two approaches: the use of data structures. Consider the process of adding another animation to the random possibilities:</p>
<table class="table">
  <thead>
    <tr><th style="width:50%">Mecanim</th>
    <th style="width:50%">Animancer</th>
  </tr></thead>
  <tbody>
    <tr>
<td>
<ol>
<li>Add a new state and call it <code>Idle 4</code>.</li>
<li>Assign the <code>AnimationClip</code> you want it to use.</li>
<li>Create the same outgoing transitions as the others: two to <code>Exit</code> and one to <code>Idle</code>.</li>
<li>Create the transition from <code>Idle</code> to the new state and set it to occur when <code>RandomIdle Equals 3</code>.</li>
<li>Go to the <code>RandomStateSMB</code> on the <code>Idle</code> state and set the <code>Number Of States</code> to 4.</li>
</ol>
</td>
<td>
<ol>
<li>Increase the size of the <code>Random Animations</code> array to 4.</li>
<li>Assign the <code>AnimationClip</code> you want the new element to use.</li>
</ol>
</td>
    </tr>
  </tbody>
</table>
<p>The Animancer setup is clearly superior in this regard. Mecanim requires several extra manual steps for every change where Animancer can simply use any array size. Every one of those manual steps is a waste of time upfront and an opportunity to make a mistake which will waste more time later on when you need to track down bugs.</p>

	</section>
                
            </div>           
            
            <!-- Footer -->
            <footer class="main-footer">
            </footer>
            
        </div>
        <div class="wrapper bottom-wrapper">
            <footer class="bottom-footer">
                <strong><div style="text-align:left; display:flex">

<div>
<p>Documentation</p>
<p><a href="/animancer/docs/examples">Examples</a></p>
<p><a href="/animancer/docs/manual">User Manual</a></p>
<p><a href="/animancer/docs/changes">Change Log</a></p>
</div>

<div style="width:10%"></div>

<div>
<p>Download</p>
<p><a href="https://kybernetik.itch.io/animancer-pro">Itch.io (Recommended)</a></p>
<p><a href="https://assetstore.unity.com/packages/tools/animation/animancer-pro-116514?aid=1100l8ah5">Asset Store (Animancer Pro)</a></p>
<p><a href="https://assetstore.unity.com/packages/tools/animation/animancer-lite-116516?aid=1100l8ah5">Asset Store (Animancer Lite)</a></p>
</div>

<div style="width:10%"></div>

<div>
<p>Contact</p>
<p><a href="https://github.com/KybernetikGames/animancer/issues">Github Issues</a></p>
<p><a href="/animancer/forum">Unity Forum</a></p>
<p><a href="mailto:animancer@kybernetik.com.au?subject=Animancer">Email</a></p>
</div>

<div style="width:10%"></div>

<div>
<p>Other Assets</p>
<p><a href="/inspector-gadgets">Inspector Gadgets</a></p>
<p><a href="/weaver">Weaver</a></p>
<p><a href="/ultevents">UltEvents</a></p>
</div>

</div></strong>
            </footer>
        </div>
        <a href="javascript:" id="return-to-top"><i class="fa fa-chevron-up"></i></a>
        
        <script>           
            // Close the sidebar if we select an anchor link
            $(".main-sidebar a[href^='#']:not('.expand')").click(function(){
                $(document.body).removeClass('sidebar-open');
            });
            
            $(document).ready(function() {
                mermaid.initialize(
                {
                    flowchart:
                    {
                        useMaxWidth: false
                    },
					startOnLoad: false,
					cloneCssStyles: false
                });     
                mermaid.init(undefined, ".mermaid");

                // Remove the max-width setting that Mermaid sets
                var mermaidSvg = $('.mermaid svg');
                mermaidSvg.addClass('img-responsive');
                mermaidSvg.css('max-width', '');

                // Make it scrollable
				var target = document.querySelector(".mermaid svg");
				if(target !== null)
				{
					var panZoom = window.panZoom = svgPanZoom(target, {
						zoomEnabled: true,
						controlIconsEnabled: true,
						fit: true,
						center: true,
                        maxZoom: 20,
                        zoomScaleSensitivity: 0.6
					});			                          

                    // Do the reset once right away to fit the diagram
                    panZoom.resize();
                    panZoom.fit();
                    panZoom.center();
                    
                    $(window).resize(function(){
                        panZoom.resize();
                        panZoom.fit();
                        panZoom.center();
                    });
				}
                
                $('pre code').each(function(i, block) {
                    hljs.highlightBlock(block);
                });  
            });

            hljs.initHighlightingOnLoad();

            // Back to top
            $(window).scroll(function() {
                if ($(this).scrollTop() >= 200) {        // If page is scrolled more than 50px
                    $('#return-to-top').fadeIn(1000);    // Fade in the arrow
                } else {
                    $('#return-to-top').fadeOut(1000);   // Else fade out the arrow
                }
            });
            $('#return-to-top').click(function() {      // When arrow is clicked
                $('body,html').animate({
                    scrollTop : 0                       // Scroll to top of body
                }, 500);
            });
        </script>
    
</body></html>